import{Q as V,R as A,D,C as q,F as S}from"./element-plus.6d5d7657.js";import{d as T,s as b,_ as $,b as C,w as E,o as I,J as j,K as t,a as M,T as a,u,Y as P,Q as s,R as m}from"./@vue.7946e41b.js";import{P as Q}from"./index.c487cb65.js";import{f as y}from"./index.fc6caf68.js";const G={class:"pr-8"},z=T({__name:"num-adjust",props:{show:{type:Boolean,required:!0},type:{type:String,default:"robot"},value:{type:[Number,String],required:!0},use:{type:Number}},emits:["update:show","confirm"],setup(i,{emit:w}){const p=b(),d=i,f=w,o=$({action:1,num:"",remark:""}),n=C(()=>{switch(d.type){case"robot":return"\u667A\u80FD\u4F53";case"kb":return"\u77E5\u8BC6\u5E93"}}),c=b(),_=C(()=>Number(d.value)+Number(o.num)*(o.action==1?1:-1)),v={num:[{required:!0,message:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u6570\u91CF"}]},h=e=>{if(e.includes("-"))return y.msgError("\u8BF7\u8F93\u5165\u6B63\u6574\u6570");o.num=e},R=async()=>{var e;await((e=p.value)==null?void 0:e.validate()),f("confirm",o)},B=()=>{var e;f("update:show",!1),(e=p.value)==null||e.resetFields()};return E(()=>d.show,e=>{var r,l;e?(r=c.value)==null||r.open():(l=c.value)==null||l.close()}),E(_,e=>{e<0&&(y.msgError("\u8C03\u6574\u540E\u6570\u91CF\u9700\u5927\u4E8E0"),o.num="")}),(e,r)=>{const l=D,F=V,g=A,k=q,x=S;return I(),j(Q,{ref_key:"popupRef",ref:c,title:`\u8C03\u6574${u(n)}\u6570\u91CF`,width:"500px",onConfirm:R,async:!0,onClose:B},{default:t(()=>[M("div",G,[a(x,{ref_key:"formRef",ref:p,model:u(o),"label-width":"120px",rules:v,onSubmit:r[1]||(r[1]=P(()=>{},["prevent"]))},{default:t(()=>[a(l,{label:`\u5F53\u524D${u(n)}`},{default:t(()=>[s(m(i.value)+"\uFF08 \u5DF2\u4F7F\u7528 "+m(i.use)+" \u4E2A"+m(u(n))+"\uFF09 ",1)]),_:1},8,["label"]),a(l,{label:`${u(n)}\u589E\u51CF`,required:"",prop:"action"},{default:t(()=>[a(g,{modelValue:u(o).action,"onUpdate:modelValue":r[0]||(r[0]=N=>u(o).action=N)},{default:t(()=>[a(F,{label:1},{default:t(()=>[s("\u589E\u52A0\u6570\u91CF")]),_:1}),a(F,{label:2},{default:t(()=>[s("\u6263\u51CF\u6570\u91CF")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(l,{label:"\u8C03\u6574\u4E2A\u6570",prop:"num"},{default:t(()=>[a(k,{"model-value":u(o).num,placeholder:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u4E2A\u6570",type:"number",onInput:h},null,8,["model-value"])]),_:1}),a(l,{label:`\u8C03\u6574\u540E${u(n)}`},{default:t(()=>[s(m(u(_).toFixed(2))+"\u4E2A ",1)]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});export{z as _};
