import{H as Z,C as ee,D as te,I as ae,J as oe,w as le,F as ne,G as ue,K as se,t as ie,L as re,M as me}from"./element-plus.6d5d7657.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang.9b97e6c6.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang.9933e104.js";import{f as A,_ as ce,b as _e}from"./index.fc6caf68.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang.5f8bf4ff.js";import{d as U,s as R,r as ve,_ as ye,ag as be,o as u,c as w,T as t,K as a,u as o,a7 as T,a as d,S as Fe,a6 as Ce,J as i,Q as p,L as b,P as E,R as $,j as ge,n as q}from"./@vue.7946e41b.js";import{a as he,i as ke,j as we,k as Ee,g as Ve}from"./robot_square.88ac39c9.js";import{u as Be}from"./useDictOptions.aef4d901.js";import{u as Se}from"./usePaging.9ff9bac2.js";import{_ as De}from"./edit.vue_vue_type_script_setup_true_lang.34e9cedb.js";import{_ as xe}from"./audit.vue_vue_type_script_setup_true_lang.c933ad1d.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@vueuse.927bd09a.js";import"./lodash.4744e7a5.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./vue-drag-resize.1871ee6b.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";import"./index.c487cb65.js";const Ae={class:"flex items-center"},Re={class:"ml-1 line-clamp-2"},Te={class:"flex items-center group"},$e={class:"opacity-0 group-hover:opacity-100 ml-1"},qe={class:"cursor-pointer text-primary flex"},Ue={class:"flex justify-end mt-4"},Pe=U({name:"robotSquare"}),At=U({...Pe,setup(Ke){const C=R(),V=R(),g=ve(!1),n=ye({name:"",author:"",cid:0,is_show:"",start_time:"",end_time:""}),{pager:f,getLists:c,resetPage:h,resetParams:P}=Se({fetchFun:Ve,params:n}),{optionsData:B}=Be({cate:{api:he}}),K=async s=>{await A.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await ke({id:s}),c()},L=async s=>{await q(),C.value.open(),C.value.setFormData(s)},N=async s=>{var l;g.value=!0,await q(),(l=V.value)==null||l.open(s)},j=async s=>{await A.alert(s)},I=async(s,l)=>{try{await we({id:l,is_show:s})}finally{c()}},J=async(s,l)=>{await Ee({id:l,sort:s}),c()};return c(),(s,l)=>{const S=ee,_=te,v=ae,D=oe,O=fe,y=le,z=ne,x=ue,G=ce,m=se,H=ie,k=Z,M=_e,Q=pe,W=re,X=de,F=be("perms"),Y=me;return u(),w("div",null,[t(x,{class:"!border-none",shadow:"never"},{default:a(()=>[t(z,{ref:"formRef",class:"mb-[-16px]",model:o(n),inline:!0},{default:a(()=>[t(_,{label:"\u667A\u80FD\u4F53\u540D\u79F0"},{default:a(()=>[t(S,{class:"w-[280px]",modelValue:o(n).name,"onUpdate:modelValue":l[0]||(l[0]=e=>o(n).name=e),placeholder:"\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0",clearable:"",onKeyup:T(o(h),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(_,{label:"\u5206\u4EAB\u7528\u6237"},{default:a(()=>[d("div",null,[t(S,{class:"w-[300px]",modelValue:o(n).author,"onUpdate:modelValue":l[1]||(l[1]=e=>o(n).author=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7/\u6635\u79F0",clearable:"",onKeyup:T(o(h),["enter"])},null,8,["modelValue","onKeyup"])])]),_:1}),t(_,{label:"\u6240\u5C5E\u5206\u7C7B"},{default:a(()=>[t(D,{class:"w-[280px]",modelValue:o(n).cid,"onUpdate:modelValue":l[2]||(l[2]=e=>o(n).cid=e),clearable:""},{default:a(()=>[t(v,{label:"\u5168\u90E8",value:0}),(u(!0),w(Fe,null,Ce(o(B).cate,e=>(u(),i(v,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"\u662F\u5426\u663E\u793A"},{default:a(()=>[t(D,{class:"w-[280px]",modelValue:o(n).is_show,"onUpdate:modelValue":l[3]||(l[3]=e=>o(n).is_show=e),clearable:""},{default:a(()=>[t(v,{label:"\u5168\u90E8",value:""}),t(v,{label:"\u663E\u793A",value:1}),t(v,{label:"\u9690\u85CF",value:0})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"\u516C\u5F00\u65F6\u95F4"},{default:a(()=>[t(O,{startTime:o(n).start_time,"onUpdate:startTime":l[4]||(l[4]=e=>o(n).start_time=e),endTime:o(n).end_time,"onUpdate:endTime":l[5]||(l[5]=e=>o(n).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(_,null,{default:a(()=>[t(y,{type:"primary",onClick:o(h)},{default:a(()=>[p("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(y,{onClick:o(P)},{default:a(()=>[p("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(x,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[b((u(),i(W,{size:"large",data:o(f).lists},{default:a(()=>[t(m,{label:"\u667A\u80FD\u4F53\u540D\u79F0","min-width":"200"},{default:a(({row:e})=>[d("div",Ae,[e.image?(u(),i(G,{key:0,radius:"50%",class:"flex-none",src:e.image,width:48,height:48,"preview-src-list":[e.image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):E("",!0),d("div",Re,$(e.name),1)])]),_:1}),t(m,{label:"\u6240\u5C5E\u5206\u7C7B","min-width":"180",prop:"category"}),t(m,{label:"\u5206\u4EAB\u8005","min-width":"150",prop:"author"}),t(m,{label:"\u72B6\u6001","min-width":"100"},{default:a(({row:e})=>[t(H,{modelValue:e.is_show,"onUpdate:modelValue":r=>e.is_show=r,"active-value":1,"inactive-value":0,onChange:r=>I(r,e.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(m,{label:"\u5BA1\u6838\u72B6\u6001","min-width":"140"},{default:a(({row:e})=>[d("div",null,[e.verify_status==1?(u(),i(k,{key:0,class:"ml-2",type:"success"},{default:a(()=>[p(" \u5BA1\u6838\u901A\u8FC7 ")]),_:1})):e.verify_status==0?(u(),i(k,{key:1,class:"ml-2",type:"warning"},{default:a(()=>[p(" \u5BA1\u6838\u4E2D ")]),_:1})):(u(),i(k,{key:2,class:"ml-2 cursor-pointer",type:"danger",onClick:r=>j(e.verify_result)},{default:a(()=>[p(" \u5BA1\u6838\u5931\u8D25 ")]),_:2},1032,["onClick"]))])]),_:1}),t(m,{label:"\u6392\u5E8F","min-width":"100"},{default:a(({row:e})=>[d("div",Te,[d("div",null,$(e.sort),1),b((u(),w("div",$e,[t(Q,{type:"number",limit:32,onConfirm:r=>J(r,e.id)},{default:a(()=>[d("div",qe,[t(M,{name:"el-icon-EditPen"})])]),_:2},1032,["onConfirm"])])),[[F,["kb.square/setSort"]]])])]),_:1}),t(m,{label:"\u516C\u5F00\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(m,{label:"\u64CD\u4F5C",width:"160",fixed:"right"},{default:a(({row:e})=>[b((u(),i(y,{type:"primary",link:"",onClick:r=>L(e)},{default:a(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[F,["kb.square/edit"]]]),e.verify_status?E("",!0):b((u(),i(y,{key:0,type:"primary",link:"",onClick:r=>N([e.id])},{default:a(()=>[p(" \u5BA1\u6838 ")]),_:2},1032,["onClick"])),[[F,["kb.square/verifyStatus"]]]),b((u(),i(y,{type:"danger",link:"",onClick:r=>K(e.id)},{default:a(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[F,["kb.square/del"]]])]),_:1})]),_:1},8,["data"])),[[Y,o(f).loading]]),d("div",Ue,[t(X,{modelValue:o(f),"onUpdate:modelValue":l[6]||(l[6]=e=>ge(f)?f.value=e:null),onChange:o(c)},null,8,["modelValue","onChange"])])]),_:1}),t(De,{ref_key:"editPopup",ref:C,onSuccess:o(c),"cate-lists":o(B).cate},null,8,["onSuccess","cate-lists"]),o(g)?(u(),i(xe,{key:0,ref_key:"auditRef",ref:V,onSuccess:o(c),onClose:l[7]||(l[7]=e=>g.value=!1)},null,8,["onSuccess"])):E("",!0)])}}});export{At as default};
