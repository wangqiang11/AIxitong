import{_ as ce,a1 as pe,a2 as _e,G as fe,D as ve,I as Fe,J as he,C as H,c as Be,a as Ee,t as ge,K as Ve,w as ye,L as be,F as Ae}from"./element-plus.6d5d7657.js";import{f as W,b as xe}from"./index.fc6caf68.js";import{_ as Ce}from"./picker.c6906711.js";import{g as ke}from"./model.7491be3a.js";import{S as we}from"./sortablejs.65032496.js";import{d as De,s as I,b as D,r as X,w as Y,i as Ue,a3 as Me,o as r,c,T as u,K as o,a as n,S as E,a6 as N,J as A,Q as U,R as C,P as v,u as g,n as Ie}from"./@vue.7946e41b.js";const Ne=n("div",{class:"text-xl font-medium mb-[20px]"},"\u57FA\u7840\u914D\u7F6E",-1),Se={class:"w-[460px]"},Re=n("div",{class:"form-tips"}," \u901A\u9053\u7684\u610F\u601D\u662F:\u6BD4\u5982\u9009OpenAI,\u5373(\u6A21\u578B\u914D\u7F6E)\u7684\u6A21\u578B\u9700\u8981\u7B26\u5408OpenAI\u63A5\u53E3\u53C2\u6570\u89C4\u8303\u3002 ",-1),qe={key:0,class:"form-tips"},Te=["href"],Oe={class:"w-[460px]"},$e={class:"w-[460px]"},Le={class:"w-[460px]"},Qe={key:0,class:"flex flex-wrap"},Pe={class:"flex items-center text-tx-regular text-xs"},je={class:"mr-[4px] mt-[2px]"},ze={class:"form-tips"},Je={class:"form-tips"},Ke={class:"form-tips"},Ge={class:"text-xl font-medium mb-[20px]"},He={class:"inline-flex text-tx-secondary"},We={class:"flex-1 min-w-0 max-w-[1000px]"},Xe={class:""},Ye={class:"move-icon cursor-move"},Ze={class:"flex mt-4"},eu={class:"w-[460px]"},uu={class:"w-[460px]"},lu=n("div",{class:"form-tips"}," \u586B\u5199\u524D\u7AEF\u5C31\u663E\u793A\u8BE5\u5B57\u6BB5\uFF0C\u4E0D\u586B\u5199\u9ED8\u8BA4\u663E\u793AAI\u6A21\u578B\u540D\u79F0 ",-1),au={class:"w-[460px]"},tu=n("div",{class:"form-tips"},"\u586B\u51990\u8868\u793A\u4E0D\u6D88\u8017\u7535\u529B\u503C",-1),pu=De({__name:"form",props:{modelValue:{type:Object,required:!0},type:{type:String},currentId:{type:[Number,String]},headerTitle:{type:String}},emits:["update:modelValue"],setup(k,{expose:Z,emit:ee}){const f=k,ue=ee,S=I(),l=D({get(){return f.modelValue},set(d){ue("update:modelValue",d)}}),R=I(),_=X({alias:"",name:"",status:1,price:""});Y(_,d=>{Number(f.type)!=1&&(l.value.models=[d])},{deep:!0}),Y(l,d=>{const[a]=d.models;a&&(_.value=a)},{immediate:!0});const le={logo:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u6807"}],channel:[{required:!0,message:"\u8BF7\u9009\u62E9AI\u901A\u9053"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165AI\u540D\u79F0"}]},q=I(),ae=()=>{const d=q.value.$el.querySelector(".el-table__body tbody");we.create(d,{animation:150,handle:".move-icon",onEnd:({newIndex:a,oldIndex:h})=>{const m=l.value.models,B=m.splice(h,1)[0];m.splice(a,0,B),l.value.models=[],Ie(()=>{l.value.models=m,l.value.models.forEach((i,M)=>{i.sort=M})})}})},te=()=>{l.value.models.push({name:"",alias:"",status:1,price:"",sort:l.value.models.length})},oe=d=>d.id&&d.status==1?W.confirm("\u8BE5\u6A21\u578B\u53EF\u80FD\u5DF2\u7ECF\u88AB\u4F7F\u7528\uFF0C\u7981\u7528\u540E\u5DF2\u7ECF\u9009\u62E9\u8BE5\u6A21\u578B\u7684\u7528\u6237\u5C06\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"):!0,se=async(d,a)=>{a&&await W.confirm("\u8BE5\u6A21\u578B\u53EF\u80FD\u5DF2\u7ECF\u88AB\u4F7F\u7528\uFF0C\u5220\u9664\u540E\u5DF2\u7ECF\u9009\u62E9\u8BE5\u6A21\u578B\u7684\u7528\u6237\u5C06\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"),l.value.models.splice(d,1)},F=X({chatModels:{},exampleModels:{chat:[],vector:[]},rankingModels:{},vectorModels:{},vlModels:{}}),T=D(()=>{if(Number(f.type)===1)return F.value.chatModels;if(Number(f.type)===2)return F.value.vectorModels;if(Number(f.type)===10)return F.value.vlModels;if(Number(f.type)===11)return F.value.rankingModels}),O=D(()=>Number(f.type)===1?F.value.exampleModels.chat:F.value.exampleModels.vector),$=(d,a)=>{const h=d?O.value.filter(m=>m.toLowerCase().includes(d.toLowerCase())):O.value;a(h.map(m=>({value:m})))},x=D(()=>T.value[l.value.channel]),ne=()=>{const d=h=>{const m={};return h.reduce((B,i)=>(i.type=="group"?Object.assign(B,d(i.config)):B[i.key]=i.default,B),m),m},a=d(x.value.configs);l.value.configs=a};return(async()=>{F.value=await ke()})(),Ue(()=>{setTimeout(()=>{Number(f.type)==1&&ae()},100)}),Z({validate:()=>{var d,a;return Promise.all([(d=S.value)==null?void 0:d.validate(),(a=R.value)==null?void 0:a.validate()])}}),(d,a)=>{const h=ce,m=fe,B=Ce,i=ve,M=Fe,de=he,V=H,re=Me("QuestionFilled"),ie=Be,L=Ee,Q=pe,w=ge,P=xe,y=Ve,j=_e,z=H,J=ye,me=be,K=Ae;return r(),c("div",null,[u(m,{class:"!border-none",shadow:"never"},{default:o(()=>[u(h,{content:k.headerTitle,onBack:a[0]||(a[0]=s=>d.$router.back())},null,8,["content"])]),_:1}),u(K,{class:"mt-4",ref_key:"formRef",ref:S,model:l.value,"label-width":"120px",rules:le},{default:o(()=>[u(m,{shadow:"never",class:"!border-none"},{default:o(()=>{var s;return[Ne,u(i,{label:"\u56FE\u6807",prop:"logo"},{default:o(()=>[n("div",null,[u(B,{modelValue:l.value.logo,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.logo=e),limit:1},null,8,["modelValue"])])]),_:1}),u(i,{label:"AI\u901A\u9053",prop:"channel"},{default:o(()=>{var e,t,p;return[n("div",Se,[u(de,{class:"w-full",modelValue:l.value.channel,"onUpdate:modelValue":a[2]||(a[2]=b=>l.value.channel=b),disabled:!!k.currentId,placeholder:"\u8BF7\u9009\u62E9AI\u901A\u9053",onChange:ne},{default:o(()=>[(r(!0),c(E,null,N(T.value,(b,G)=>(r(),A(M,{value:G,label:b.name,key:G},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"]),Re,(e=x.value)!=null&&e.website?(r(),c("div",qe,[U(" \u5F00\u901A\u7F51\u5740\uFF1A"+C((t=x.value)==null?void 0:t.website)+" ",1),n("a",{class:"text-primary",target:"_blank",href:(p=x.value)==null?void 0:p.website},"\u524D\u5F80\u5F00\u901A",8,Te)])):v("",!0)])]}),_:1}),u(i,{label:"AI\u540D\u79F0",prop:"name"},{default:o(()=>[n("div",Oe,[u(V,{modelValue:l.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.name=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165AI\u540D\u79F0",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])]),_:1}),u(i,{label:"\u63CF\u8FF0",prop:"remarks"},{default:o(()=>[n("div",$e,[u(V,{modelValue:l.value.remarks,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.remarks=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u7528\u4E00\u53E5\u7B80\u77ED\u7684\u8BDD\u63CF\u8FF0\u4E00\u4E0B",type:"textarea",rows:4},null,8,["modelValue"])])]),_:1}),(r(!0),c(E,null,N((s=x.value)==null?void 0:s.configs,e=>(r(),A(i,{label:e.name,prop:e.key,key:e.key,rules:e.require?[{required:e.require,trigger:"change",validator(t,p,b){e.key&&!p?b(new Error(e.placeholder)):b()}}]:[]},{default:o(()=>[n("div",Le,[e.type==="group"?(r(),c("div",Qe,[(r(!0),c(E,null,N(e.config,t=>(r(),c("div",{class:"w-[50%] pr-[20px] pb-[20px]",key:t.key},[n("div",Pe,[n("span",je,C(t.name),1),u(L,{class:"box-item",effect:"dark",content:t.tips,placement:"top"},{default:o(()=>[u(ie,{size:"16px"},{default:o(()=>[u(re)]),_:1})]),_:2},1032,["content"])]),t.type==="slider"?(r(),A(Q,{key:0,modelValue:l.value.configs[t.key],"onUpdate:modelValue":p=>l.value.configs[t.key]=p,min:t.range[0],max:t.range[1],step:t.step},null,8,["modelValue","onUpdate:modelValue","min","max","step"])):v("",!0),t.type==="switch"?(r(),A(w,{key:1,modelValue:l.value.configs[t.key],"onUpdate:modelValue":p=>l.value.configs[t.key]=p},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),t.type==="slider-input"?(r(),A(Q,{key:2,"show-input":"",modelValue:l.value.configs[t.key],"onUpdate:modelValue":p=>l.value.configs[t.key]=p,min:t.range[0],max:t.range[1],step:t.step},null,8,["modelValue","onUpdate:modelValue","min","max","step"])):v("",!0)]))),128))])):v("",!0),e.type==="input"?(r(),c(E,{key:1},[u(V,{modelValue:l.value.configs[e.key],"onUpdate:modelValue":t=>l.value.configs[e.key]=t,modelModifiers:{trim:!0},placeholder:e.placeholder||"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),n("div",ze,C(e.tips),1)],64)):v("",!0),e.type==="textarea"?(r(),c(E,{key:2},[u(V,{modelValue:l.value.configs[e.key],"onUpdate:modelValue":t=>l.value.configs[e.key]=t,modelModifiers:{trim:!0},placeholder:e.placeholder||"\u8BF7\u8F93\u5165",type:"textarea",rows:4},null,8,["modelValue","onUpdate:modelValue","placeholder"]),n("div",Je,C(e.tips),1)],64)):v("",!0),e.type==="switch"?(r(),c(E,{key:3},[u(w,{modelValue:l.value.configs[e.key],"onUpdate:modelValue":t=>l.value.configs[e.key]=t,modelModifiers:{trim:!0},placeholder:e.placeholder||"\u8BF7\u8F93\u5165","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue","placeholder"]),n("div",Ke,C(e.tips),1)],64)):v("",!0)])]),_:2},1032,["label","prop","rules"]))),128)),u(i,{label:"\u662F\u5426\u542F\u7528",prop:"is_enable"},{default:o(()=>[u(w,{modelValue:l.value.is_enable,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.is_enable=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]}),_:1}),u(m,{shadow:"never",class:"!border-none mt-4"},{default:o(()=>[n("div",Ge,[U(" \u6A21\u578B\u914D\u7F6E "),u(L,{content:"\u6A21\u578B\u53EF\u81EA\u5B9A\u4E49\u6DFB\u52A0\uFF0C\u70B9\u51FB\u4E0B\u65B9\u7684\u65B0\u589E\u6309\u94AE",placement:"top",effect:"light",teleported:!0},{default:o(()=>[n("span",He,[u(P,{name:"el-icon-QuestionFilled"})])]),_:1})]),n("div",We,[Number(k.type)==1?(r(),c(E,{key:0},[n("div",Xe,[u(me,{ref_key:"tableRef",ref:q,size:"large",class:"mt-4","row-key":"id",data:l.value.models},{default:o(()=>[u(y,{width:"50"},{default:o(()=>[n("div",Ye,[u(P,{name:"el-icon-Rank"})])]),_:1}),u(y,{label:"\u6A21\u578B\u540D\u79F0","min-width":"120"},{default:o(({row:s})=>[u(j,{class:"w-full",modelValue:s.name,"onUpdate:modelValue":e=>s.name=e,modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165AI\u6A21\u578B",clearable:"","fetch-suggestions":$},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),u(y,{label:"\u81EA\u5B9A\u4E49\u540D\u79F0","min-width":"120"},{default:o(({row:s})=>[u(z,{modelValue:s.alias,"onUpdate:modelValue":e=>s.alias=e,placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),u(y,{label:"1000\u5B57\u7B26\u6D88\u8017\u7535\u529B\u503C","min-width":"120"},{default:o(({row:s})=>[u(z,{modelValue:s.price,"onUpdate:modelValue":e=>s.price=e,type:"number",placeholder:"\u4E3A\u7A7A\u4E0D\u6D88\u8017\u7535\u529B\u503C"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),u(y,{label:"\u72B6\u6001","min-width":"100"},{default:o(({row:s})=>[u(w,{modelValue:s.status,"onUpdate:modelValue":e=>s.status=e,"before-change":()=>oe(s),"active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue","before-change"])]),_:1}),u(y,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:o(({row:s,$index:e})=>[u(J,{type:"danger",link:"",onClick:t=>se(e,s.id)},{default:o(()=>[U(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),n("div",Ze,[u(J,{type:"primary",onClick:te},{default:o(()=>[U("+ \u65B0\u589E")]),_:1})])],64)):(r(),A(K,{key:1,ref_key:"formRef1",ref:R,model:g(_),"label-width":"120px"},{default:o(()=>[u(i,{label:"AI\u6A21\u578B",rules:[{required:!0,message:"\u8BF7\u8F93\u5165AI\u6A21\u578B"}],prop:"name"},{default:o(()=>[n("div",eu,[u(j,{class:"w-full",modelValue:g(_).name,"onUpdate:modelValue":a[6]||(a[6]=s=>g(_).name=s),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165AI\u6A21\u578B",clearable:"","fetch-suggestions":$},null,8,["modelValue"])])]),_:1}),u(i,{label:"\u81EA\u5B9A\u4E49\u522B\u540D",prop:"alias"},{default:o(()=>[n("div",uu,[u(V,{modelValue:g(_).alias,"onUpdate:modelValue":a[7]||(a[7]=s=>g(_).alias=s),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u522B\u540D",maxlength:"30","show-word-limit":""},null,8,["modelValue"]),lu])]),_:1}),u(i,{label:"\u6D88\u8017\u7535\u529B\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6D88\u8017\u7535\u529B\u503C"}],prop:"price"},{default:o(()=>[n("div",au,[u(V,{modelValue:g(_).price,"onUpdate:modelValue":a[8]||(a[8]=s=>g(_).price=s),modelModifiers:{trim:!0},type:"number"},null,8,["modelValue"]),tu])]),_:1})]),_:1},8,["model"]))])]),_:1})]),_:1},8,["model"])])}}});export{pu as _};
