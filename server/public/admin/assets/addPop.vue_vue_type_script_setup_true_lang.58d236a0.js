import{P as S}from"./index.c487cb65.js";import{Q as U,R as I,D as q,I as J,J as N,C as O,t as Q,F as T}from"./element-plus.6d5d7657.js";import{_ as $}from"./picker.c6906711.js";import{b as j,f as A,h as G}from"./sticker.36ff1e2f.js";import{d as K,s as f,r as i,o as d,J as y,K as u,T as a,u as t,c as M,S as z,a6 as H,Q as v}from"./@vue.7946e41b.js";const te=K({__name:"addPop",emits:["success","close"],setup(W,{expose:E,emit:V}){const b=V,g=f(),r=i(!1),m=f(),e=i({id:"",status:1,sort:"0",url:[],category_id:0,type:1}),B={type:[{required:!0}],cover:[{required:!0}]},p=i(),C=async()=>{p.value=await G()},k=async()=>{try{r.value=!0,e.value.id?await j({...e.value}):await A({...e.value}),b("success")}catch{r.value=!1}};return E({open:async s=>{m.value.open(),s&&(Object.keys(e.value).map(o=>{e.value[o]=s[o]}),e.value.id=s.id),await C()}}),(s,o)=>{const F=$,n=q,c=J,w=N,_=U,R=I,x=O,D=Q,L=T,P=S;return d(),y(P,{ref_key:"popRef",ref:m,title:t(e).id?"\u7F16\u8F91\u8D34\u7EB8":"\u65B0\u589E\u8D34\u7EB8",width:"600px",async:"",onConfirm:k,onClose:o[5]||(o[5]=l=>s.$emit("close")),"confirm-loading":t(r)},{default:u(()=>[a(L,{"label-width":"90px",ref_key:"formRef",ref:g,model:t(e),rules:B},{default:u(()=>[a(n,{label:"\u8D34\u7EB8\u56FE",prop:"cover"},{default:u(()=>[a(F,{limit:t(e).id?1:10,modelValue:t(e).url,"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).url=l),data:{use_type:2}},null,8,["limit","modelValue"])]),_:1}),a(n,{label:"\u6240\u5C5E\u5206\u7C7B"},{default:u(()=>[a(w,{modelValue:t(e).category_id,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).category_id=l)},{default:u(()=>[a(c,{label:"\u65E0\u5206\u7C7B",value:0}),(d(!0),M(z,null,H(t(p),l=>(d(),y(c,{label:l.name,key:l.id,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"\u7C7B\u578B",prop:"type"},{default:u(()=>[a(R,{modelValue:t(e).type,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).type=l)},{default:u(()=>[a(_,{label:1},{default:u(()=>[v("\u56FE\u7247")]),_:1}),a(_,{label:2},{default:u(()=>[v("\u52A8\u56FE")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"\u6392\u5E8F"},{default:u(()=>[a(x,{modelValue:t(e).sort,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).sort=l),class:"w-[320px]"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u72B6\u6001"},{default:u(()=>[a(D,{"active-value":1,"inactive-value":0,modelValue:t(e).status,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).status=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading"])}}});export{te as _};
