import{H as S,D as U,I as j,J,w as K,F as $,K as q,L as z,M as H}from"./element-plus.6d5d7657.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang.9b97e6c6.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang.5e69f4eb.js";import{P as Q}from"./index.c487cb65.js";import{c as C,a as G}from"./redeem_code.c7538b6b.js";import{u as W}from"./usePaging.9ff9bac2.js";import{d as X,s as v,r as Y,_ as Z,o as m,c as ee,T as e,K as t,a as p,Q as u,R as d,u as a,L as te,J as g,j as ae}from"./@vue.7946e41b.js";const le={class:"edit-popup"},ue={class:"flex flex-wrap"},se={class:"flex justify-end mt-4"},Fe=X({__name:"detail",emits:["success","close"],setup(oe,{expose:y,emit:x}){const w=x,E=v(),f=v(),o=Y({id:"",sn:"",type:1,card_num:"",relation_id:"",valid_start_time:"",valid_end_time:"",create_time:"",remark:"",type_desc:"",content:"",valid_time_desc:"",use_num:0,unused_num:0}),i=Z({id:"",status:""}),{pager:c,getLists:F,resetPage:D,resetParams:ne}=W({fetchFun:C,params:i}),k=async n=>{try{const l=await G({id:n});o.value=l}catch(l){console.log("\u83B7\u53D6\u4F7F\u7528\u8BE6\u60C5=>",l)}},V=async()=>{var n;try{(n=f.value)==null||n.close(),w("success")}catch(l){return l}},R=()=>{w("close")};return y({open:n=>{var l;i.id=n,(l=f.value)==null||l.open(),k(n),F()}}),(n,l)=>{const s=U,b=j,P=J,h=K,A=O,L=$,_=q,B=S,T=z,I=M,N=H;return m(),ee("div",le,[e(Q,{ref_key:"popupRef",ref:f,title:"\u4F7F\u7528\u8BE6\u60C5",async:!0,width:"920px",onConfirm:V,onClose:R},{default:t(()=>[p("div",ue,[e(s,{"label-width":"90px",label:"\u6279\u6B21\u7F16\u53F7:"},{default:t(()=>[u(d(a(o).sn),1)]),_:1}),e(s,{"label-width":"90px",label:"\u5361\u5BC6\u7C7B\u578B:"},{default:t(()=>[u(d(a(o).type_desc),1)]),_:1}),e(s,{"label-width":"90px",label:"\u5361\u5BC6\u9762\u989D:"},{default:t(()=>[u(d(a(o).content),1)]),_:1}),e(s,{"label-width":"90px",label:"\u751F\u6548\u65F6\u95F4:"},{default:t(()=>[u(d(a(o).valid_time_desc),1)]),_:1}),e(s,{"label-width":"90px",label:"\u751F\u6210\u6570\u91CF:"},{default:t(()=>[u(d(a(o).card_num),1)]),_:1}),e(s,{"label-width":"90px",label:"\u5DF2\u4F7F\u7528:"},{default:t(()=>[u(d(a(o).use_num),1)]),_:1}),e(s,{"label-width":"120px",label:"\u672A\u4F7F\u7528:"},{default:t(()=>[u(d(a(o).unused_num),1)]),_:1})]),p("div",null,[e(L,{ref_key:"formRef",ref:E,class:"mt-4",model:a(i),inline:!0},{default:t(()=>[e(s,{label:"\u4F7F\u7528\u72B6\u6001"},{default:t(()=>[e(P,{modelValue:a(i).status,"onUpdate:modelValue":l[0]||(l[0]=r=>a(i).status=r)},{default:t(()=>[e(b,{label:"\u5168\u90E8",value:""}),e(b,{label:"\u672A\u4F7F\u7528",value:0}),e(b,{label:"\u5DF2\u4F7F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(h,{type:"primary",onClick:a(D)},{default:t(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(h,{onClick:l[1]||(l[1]=()=>{a(i).status="",a(F)()})},{default:t(()=>[u("\u91CD\u7F6E")]),_:1}),e(A,{class:"ml-[12px]",params:a(i),fetchFun:a(C)},{default:t(()=>[e(h,null,{default:t(()=>[u(" \u5BFC\u51FA ")]),_:1})]),_:1},8,["params","fetchFun"])]),_:1})]),_:1},8,["model"]),p("div",null,[te((m(),g(T,{size:"large",height:"400px",data:a(c).lists},{default:t(()=>[e(_,{label:"ID",prop:"id","min-width":"60"}),e(_,{label:"\u5361\u5BC6\u7F16\u53F7",prop:"record_sn","min-width":"140"}),e(_,{label:"\u7C7B\u578B",prop:"type_desc","min-width":"120"}),e(_,{label:"\u72B6\u6001","min-width":"120"},{default:t(({row:r})=>[r.status?(m(),g(B,{key:0,type:"success"},{default:t(()=>[u("\u5DF2\u4F7F\u7528")]),_:1})):(m(),g(B,{key:1,type:"warning"},{default:t(()=>[u("\u672A\u4F7F\u7528")]),_:1}))]),_:1}),e(_,{label:"\u4F7F\u7528\u4EBA",prop:"nickname","min-width":"140"}),e(_,{label:"\u4F7F\u7528\u65F6\u95F4",prop:"use_time","min-width":"150"})]),_:1},8,["data"])),[[N,a(c).loading]]),p("div",se,[e(I,{modelValue:a(c),"onUpdate:modelValue":l[2]||(l[2]=r=>ae(c)?c.value=r:null),onChange:a(F)},null,8,["modelValue","onChange"])])])])]),_:1},512)])}}});export{Fe as _};
