import{Y as k,C as A,D as R,t as U,F as P}from"./element-plus.6d5d7657.js";import{a as S,e as j}from"./draw_prompt.8c760c0f.js";import{g as q}from"./draw_prompt_category.07178e98.js";import{P as L}from"./index.c487cb65.js";import{d as I,s as F,r as i,_ as N,o as c,c as B,T as o,K as p,u as t,J as T,a as m,S as z}from"./@vue.7946e41b.js";const J={class:"edit-popup"},K={class:"w-full"},O=m("div",{class:"form-tips"}," \u6DFB\u52A0\u591A\u4E2A\u5173\u952E\u8BCD\uFF0C\u4E2D\u82F1\u6587\u4EE5&\u9694\u5F00\uFF0C\u6309\u56DE\u8F66\u6362\u884C ",-1),Y={class:"w-full"},G={class:"w-full"},H={class:"w-full"},M=m("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u636E\u8D8A\u5927\u8D8A\u6392\u524D\u9762",-1),te=I({__name:"edit",emits:["success","close"],setup(Q,{expose:C,emit:v}){const _=v,f=F(),n=F(),d=i(""),E=i([]),D=N({multiple:!1,checkStrictly:!0,label:"name",value:"id",children:"children",emitPath:!1}),e=i({id:"",category_id:"",prompt:"",prompt_en:"",model:"mj",sort:0,status:"1"}),g={prompt:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",trigger:["blur"]}],prompt_en:[{required:!0,message:"\u8BF7\u8F93\u5165\u82F1\u6587\u5173\u952E\u8BCD",trigger:["blur"]}],category_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7C7B\u76EE",trigger:["blur"]}]},y=async()=>{const r=await q({model:"mj"});E.value=r},V=async()=>{var r,u;try{await((r=f.value)==null?void 0:r.validate()),e.value.id==""?await S({...e.value,prompt:e.value.prompt.split(`
`)}):e.value.id!=""&&await j(e.value),(u=n.value)==null||u.close(),_("success")}catch(a){return a}},w=()=>{_("close")};return C({open:(r,u)=>{var a;y(),r=="add"?(e.value={id:"",category_id:"",prompt:"",model:"mj",prompt_en:"",sort:0,status:1},d.value="\u65B0\u589E\u5173\u952E\u8BCD"):r=="edit"&&(Object.keys(e.value).map(s=>{e.value[s]=u[s]}),console.log(e.value,u),d.value="\u7F16\u8F91\u5173\u952E\u8BCD"),(a=n.value)==null||a.open()}}),(r,u)=>{const a=A,s=R,b=k,h=U,x=P;return c(),B("div",J,[o(L,{ref_key:"popupRef",ref:n,title:t(d),async:!0,width:"550px",onConfirm:V,onClose:w},{default:p(()=>[o(x,{ref_key:"formRef",ref:f,rules:g,model:t(e),"label-width":"100px"},{default:p(()=>[t(e).id?(c(),B(z,{key:1},[o(s,{label:"\u82F1\u6587\u5173\u952E\u8BCD",prop:"prompt_en"},{default:p(()=>[m("div",Y,[o(a,{modelValue:t(e).prompt_en,"onUpdate:modelValue":u[1]||(u[1]=l=>t(e).prompt_en=l),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},null,8,["modelValue"])])]),_:1}),o(s,{label:"\u4E2D\u6587\u5173\u952E\u8BCD",prop:"prompt"},{default:p(()=>[m("div",G,[o(a,{modelValue:t(e).prompt,"onUpdate:modelValue":u[2]||(u[2]=l=>t(e).prompt=l),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},null,8,["modelValue"])])]),_:1})],64)):(c(),T(s,{key:0,label:"\u5173\u952E\u8BCD",prop:"prompt"},{default:p(()=>[m("div",K,[o(a,{modelValue:t(e).prompt,"onUpdate:modelValue":u[0]||(u[0]=l=>t(e).prompt=l),type:"textarea",autosize:{minRows:8,maxRows:20},placeholder:`\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF0C\u5982\uFF1ASurrealism&\u8D85\u73B0\u5B9E\u4E3B\u4E49\r
Baroque&\u5DF4\u6D1B\u514B\r
modern&\u73B0\u4EE3`},null,8,["modelValue"]),O])]),_:1})),o(s,{label:"\u6240\u5C5E\u7C7B\u76EE",prop:"category_id"},{default:p(()=>[o(b,{class:"w-full",modelValue:t(e).category_id,"onUpdate:modelValue":u[3]||(u[3]=l=>t(e).category_id=l),options:t(E),props:t(D),clearable:!0,filterable:!0},null,8,["modelValue","options","props"])]),_:1}),o(s,{label:"\u6392\u5E8F",prop:"sort"},{default:p(()=>[m("div",H,[o(a,{type:"text",modelValue:t(e).sort,"onUpdate:modelValue":u[4]||(u[4]=l=>t(e).sort=l),min:0,max:9999},null,8,["modelValue"]),M])]),_:1}),o(s,{label:"\u72B6\u6001",prop:"sort"},{default:p(()=>[o(h,{modelValue:t(e).status,"onUpdate:modelValue":u[5]||(u[5]=l=>t(e).status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{te as _};
