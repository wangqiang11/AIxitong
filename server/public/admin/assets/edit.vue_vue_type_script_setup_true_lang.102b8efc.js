import{D as J,C as T,I as z,J as K,t as L,F as O}from"./element-plus.6d5d7657.js";import{_ as j}from"./picker.c6906711.js";import{A as G,B as H,C as M,g as Q}from"./ai_square.6d6cae03.js";import{P as W}from"./index.c487cb65.js";import{d as X,s as C,r as Y,b as V,_ as b,o as p,c as B,T as t,K as s,u,a as E,S as Z,a6 as $,J as _,P as D}from"./@vue.7946e41b.js";const ee={class:"edit-popup"},ue=E("div",{class:"form-tips"},"\u5982\u4E0D\u9009\u62E9\u5206\u7C7B\uFF0C\u5219\u9ED8\u8BA4\u663E\u793A\u5728\u524D\u53F0\u7684\u3010\u5168\u90E8\u3011\u4E2D",-1),ne=X({__name:"edit",emits:["success","close"],setup(oe,{expose:y,emit:w}){const f=w,F=C(),c=C(),d=Y("add"),k=V(()=>d.value=="edit"?"\u7F16\u8F91\u89C6\u9891":"\u65B0\u589E\u89C6\u9891"),o=b({id:"",prompt:"",sort:0,is_show:1,category_id:"",duration:"",avatar:"",nickname:"",video_url:"",source:1}),i=b({loading:!0,lists:[]}),x={video_url:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u7247",trigger:["blur"]}],prompts:[{required:!0,message:"\u8BF7\u8F93\u5165\u63D0\u793A\u8BCD",trigger:["blur"]}]},r=V(()=>o.source==2),h=async()=>{i.loading=!0;try{const l=await Q({type:3});i.lists=l,i.loading=!1}catch(l){i.loading=!1,console.log("\u83B7\u53D6\u7ED8\u753B\u5206\u7C7B\u5931\u8D25=>",l)}},A=async()=>{var l,e;await((l=F.value)==null?void 0:l.validate()),d.value=="edit"?await G(o):await H(o),(e=c.value)==null||e.close(),f("success")},S=()=>{f("close")},R=(l="add",e)=>{var m;d.value=l,(m=c.value)==null||m.open(),h(),e&&U(e)},U=async l=>{try{const e=await M({id:l});v(e),o.video_url=e.thumbnail||e.video_url}catch(e){console.log("\u83B7\u53D6\u8BE6\u60C5\u5931\u8D25=>",e)}},v=async l=>{for(const e in o)l[e]!=null&&l[e]!=null&&(o[e]=l[e])};return y({open:R,setFormData:v}),(l,e)=>{const m=j,n=J,g=T,q=z,P=K,I=L,N=O;return p(),B("div",ee,[t(W,{ref_key:"popupRef",ref:c,title:u(k),async:!0,width:"550px",onConfirm:A,onClose:S},{default:s(()=>[t(N,{class:"ls-form",ref_key:"formRef",ref:F,rules:x,model:u(o),"label-width":"100px"},{default:s(()=>[t(n,{label:"\u89C6\u9891",prop:"video_url"},{default:s(()=>[t(m,{modelValue:u(o).video_url,"onUpdate:modelValue":e[0]||(e[0]=a=>u(o).video_url=a),type:"video",disabled:u(r)},null,8,["modelValue","disabled"])]),_:1}),t(n,{label:(u(r),"\u573A\u666F\u63CF\u8FF0\u8BCD")},{default:s(()=>[t(g,{disabled:u(r),class:"w-[380px]",modelValue:u(o).prompt,"onUpdate:modelValue":e[1]||(e[1]=a=>u(o).prompt=a),type:"textarea",autosize:{minRows:4,maxRows:20},placeholder:u(r)?"":"\u8BF7\u8F93\u5165\u4E2D\u6587\u63D0\u793A\u8BCD"},null,8,["disabled","modelValue","placeholder"])]),_:1},8,["label"]),t(n,{label:"\u6240\u5C5E\u5206\u7C7B",prop:"category_id"},{default:s(()=>[E("div",null,[t(P,{class:"w-[380px]",modelValue:u(o).category_id,"onUpdate:modelValue":e[2]||(e[2]=a=>u(o).category_id=a),placeholder:"\u5168\u90E8"},{default:s(()=>[(p(!0),B(Z,null,$(u(i).lists,a=>(p(),_(q,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),ue])]),_:1}),u(d)!="edit"||u(o).source==1?(p(),_(n,{key:0,label:"\u7528\u6237\u5934\u50CF",prop:"avatar"},{default:s(()=>[t(m,{modelValue:u(o).avatar,"onUpdate:modelValue":e[3]||(e[3]=a=>u(o).avatar=a),disabled:u(r)},null,8,["modelValue","disabled"])]),_:1})):D("",!0),u(d)!="edit"||u(o).source==1?(p(),_(n,{key:1,label:"\u7528\u6237\u6635\u79F0"},{default:s(()=>[t(g,{disabled:u(r),class:"w-[380px]",modelValue:u(o).nickname,"onUpdate:modelValue":e[4]||(e[4]=a=>u(o).nickname=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"},null,8,["disabled","modelValue"])]),_:1})):D("",!0),t(n,{label:"\u662F\u5426\u663E\u793A",prop:"is_show"},{default:s(()=>[t(I,{modelValue:u(o).is_show,"onUpdate:modelValue":e[5]||(e[5]=a=>u(o).is_show=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ne as _};
