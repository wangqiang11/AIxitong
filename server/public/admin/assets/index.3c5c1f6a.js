import{C as X,D as Y,I as Z,J as ee,w as te,F as ae,G as oe,K as ue,o as le,L as ie,M as ne}from"./element-plus.6d5d7657.js";import{_ as re}from"./index.vue_vue_type_script_setup_true_lang.9b97e6c6.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang.5f8bf4ff.js";import{d as $,s as L,r as T,_ as me,be as pe,a3 as de,ag as _e,o as n,c as v,T as t,K as a,u as o,a7 as ce,S as U,a6 as R,J as r,Q as s,L as P,R as C,a as d,P as k,j as fe,n as S}from"./@vue.7946e41b.js";import{u as Fe}from"./usePaging.9ff9bac2.js";import{C as Ce,g as ke,f as be}from"./index.fc6caf68.js";import{o as ve,u as Ee,q as ge}from"./consumer.90d54fa3.js";import{u as he}from"./useDictOptions.aef4d901.js";import{_ as ye}from"./addUserPop.vue_vue_type_script_setup_true_lang.5a4923c1.js";import{_ as Be}from"./adjust-group.vue_vue_type_script_setup_true_lang.c6c16850.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@vueuse.927bd09a.js";import"./lodash.4744e7a5.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./vue-drag-resize.1871ee6b.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";import"./index.c487cb65.js";import"./picker.c6906711.js";import"./index.ec37127a.js";import"./index.410c53ff.js";import"./index.vue_vue_type_script_setup_true_lang.266c4e6e.js";import"./index.vue_vue_type_script_setup_true_lang.9933e104.js";import"./preview.vue_vue_type_script_setup_true_lang.6702fed0.js";import"./file.vue_vue_type_style_index_0_scoped_ba7daef9_lang.b66d1428.js";import"./vue3-video-play.e85b6285.js";import"./vuedraggable.0170ba82.js";import"./vue.c48aa7bc.js";import"./sortablejs.65032496.js";const we={class:"text-[#4073FA]"},Ae={key:0,class:"text-[#FBAE00]"},De={class:"flex items-center"},Ve={class:"flex justify-end mt-4"},xe=$({name:"consumerLists"}),Pt=$({...xe,setup(Le){const h=L(),y=L(),_=T(!1),i=me({keyword:"",channel:"",create_time_start:"",create_time_end:"",group_id:""}),E=T([]),{pager:c,getLists:f,resetPage:B,resetParams:G}=Fe({fetchFun:ge,params:i}),K=async()=>{_.value=!0,await S(),h.value.open()},j=async()=>{_.value=!0,await S(),y.value.open({id:E.value,groupIds:[],type:2})},w=async(b,u,g)=>{await be.customConfirm("\u662F\u5426\u5C06 ",` ${b==1?"\u52A0\u5165":"\u79FB\u51FA"}\u9ED1\u540D\u5355\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01`,g,"color:red"),await ve({id:u}),f()},I=b=>{E.value=b.map(u=>u.id)},{optionsData:N,refresh:Te}=he({dataList:{api:Ee}}),A=()=>{f(),_.value=!1};return pe(()=>{f()}),f(),(b,u)=>{const g=X,F=Y,q=se,D=Z,V=ee,m=te,z=ae,x=oe,l=ue,J=le,M=de("router-link"),O=ie,Q=re,H=_e("perms"),W=ne;return n(),v("div",null,[t(x,{class:"!border-none",shadow:"never"},{default:a(()=>[t(z,{ref:"formRef",class:"mb-[-16px]",model:o(i),inline:!0},{default:a(()=>[t(F,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[t(g,{class:"w-[280px]",modelValue:o(i).keyword,"onUpdate:modelValue":u[0]||(u[0]=e=>o(i).keyword=e),placeholder:"\u7528\u6237\u7F16\u53F7/\u6635\u79F0/\u624B\u673A\u53F7\u7801/\u90AE\u7BB1",clearable:"",onKeyup:ce(o(B),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(F,{label:"\u6CE8\u518C\u65F6\u95F4"},{default:a(()=>[t(q,{startTime:o(i).create_time_start,"onUpdate:startTime":u[1]||(u[1]=e=>o(i).create_time_start=e),endTime:o(i).create_time_end,"onUpdate:endTime":u[2]||(u[2]=e=>o(i).create_time_end=e)},null,8,["startTime","endTime"])]),_:1}),t(F,{label:"\u6CE8\u518C\u6765\u6E90"},{default:a(()=>[t(V,{class:"w-[280px]",modelValue:o(i).channel,"onUpdate:modelValue":u[3]||(u[3]=e=>o(i).channel=e)},{default:a(()=>[(n(!0),v(U,null,R(o(Ce),(e,p)=>(n(),r(D,{key:p,label:e,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(F,{label:"\u7528\u6237\u5206\u7EC4"},{default:a(()=>[t(V,{modelValue:o(i).group_id,"onUpdate:modelValue":u[4]||(u[4]=e=>o(i).group_id=e),class:"w-[280px]"},{default:a(()=>[(n(!0),v(U,null,R(o(N).dataList,(e,p)=>(n(),r(D,{key:p,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(F,null,{default:a(()=>[t(m,{type:"primary",onClick:o(B)},{default:a(()=>[s("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(m,{onClick:o(G)},{default:a(()=>[s("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(x,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[t(m,{type:"primary",onClick:K},{default:a(()=>[s("+ \u521B\u5EFA\u7528\u6237")]),_:1}),t(m,{onClick:j,disabled:o(E).length==0},{default:a(()=>[s("\u6279\u91CF\u8BBE\u7F6E\u5206\u7EC4")]),_:1},8,["disabled"]),P((n(),r(O,{class:"mt-2",size:"large",data:o(c).lists,onSelectionChange:I},{default:a(()=>[t(l,{type:"selection",width:"55"}),t(l,{label:"\u7528\u6237\u7F16\u53F7",prop:"sn","min-width":"120"}),t(l,{label:"\u5934\u50CF","min-width":"100"},{default:a(({row:e})=>[t(J,{src:e.avatar,size:50},null,8,["src"])]),_:1}),t(l,{label:"\u6635\u79F0",prop:"nickname","min-width":"100"}),t(l,{label:"\u624B\u673A\u53F7\u7801",prop:"mobile","min-width":"100"}),t(l,{label:"\u90AE\u7BB1",prop:"email","min-width":"100"}),t(l,{label:"\u4E0A\u7EA7\u9080\u8BF7\u4EBA",prop:"inviter_name","min-width":"140"},{default:a(({row:e})=>[s(C(e.inviter_id?e.inviter_name:"\u7CFB\u7EDF"),1)]),_:1}),t(l,{label:"\u4F59\u989D","min-width":"160"},{default:a(({row:e})=>[d("div",null,"\u7535\u529B\u503C\u6570\u91CF\uFF1A"+C(e.balance),1),d("div",null,"\u667A\u80FD\u4F53\uFF1A"+C(e.robot_num),1)]),_:1}),t(l,{label:"\u4F1A\u5458","min-width":"100"},{default:a(({row:e})=>[d("div",we,C(e.package_name),1)]),_:1}),t(l,{label:"\u5230\u671F\u65F6\u95F4",prop:"package_time","min-width":"180"},{default:a(({row:e})=>[d("div",null,C(e.package_time),1),e.package_is_overdue?(n(),v("div",Ae,"\u5DF2\u5230\u671F")):k("",!0)]),_:1}),t(l,{label:"\u7D2F\u8BA1\u63D0\u95EE",prop:"total_chat","min-width":"100"}),t(l,{label:"\u6CE8\u518C\u6765\u6E90",prop:"channel","min-width":"100"}),t(l,{label:"\u6CE8\u518C\u65F6\u95F4",prop:"create_time","min-width":"120"}),t(l,{label:"\u64CD\u4F5C","min-width":"180",fixed:"right"},{default:a(({row:e})=>[d("div",De,[P((n(),r(m,{type:"primary",link:""},{default:a(()=>[t(M,{to:{path:o(ke)("user.user/detail"),query:{id:e.id}}},{default:a(()=>[s(" \u8BE6\u60C5 ")]),_:2},1032,["to"])]),_:2},1024)),[[H,["user.user/detail"]]]),e.is_blacklist==0?(n(),r(m,{key:0,type:"primary",link:"",onClick:p=>w(1,e.id,e.nickname)},{default:a(()=>[s("\u52A0\u5165\u9ED1\u540D\u5355")]),_:2},1032,["onClick"])):k("",!0),e.is_blacklist==1?(n(),r(m,{key:1,type:"warning",link:"",onClick:p=>w(2,e.id,e.nickname)},{default:a(()=>[s("\u79FB\u51FA\u9ED1\u540D\u5355")]),_:2},1032,["onClick"])):k("",!0)])]),_:1})]),_:1},8,["data"])),[[W,o(c).loading]]),d("div",Ve,[t(Q,{modelValue:o(c),"onUpdate:modelValue":u[5]||(u[5]=e=>fe(c)?c.value=e:null),onChange:o(f)},null,8,["modelValue","onChange"])])]),_:1}),o(_)?(n(),r(ye,{key:0,ref_key:"addUserPopRef",ref:h,onClose:A},null,512)):k("",!0),o(_)?(n(),r(Be,{key:1,ref_key:"adjustGroupRef",ref:y,onClose:A},null,512)):k("",!0)])}}});export{Pt as default};
