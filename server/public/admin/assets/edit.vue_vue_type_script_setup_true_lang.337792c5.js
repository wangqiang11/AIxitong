import{Q as N,R as P,C as I,D as T,v as Q,t as S,F as z}from"./element-plus.6d5d7657.js";import{_ as G}from"./picker.c6906711.js";import{f as J,h as K,i as L}from"./wx_oa.29adae7c.js";import{P as O}from"./index.c487cb65.js";import{u as $}from"./useLockFn.06f76359.js";import{d as j,s as C,r as H,b as M,_ as W,o as i,c as X,T as o,K as l,u as t,a as s,J as _,P as c,Q as p}from"./@vue.7946e41b.js";const Y={class:"edit-popup"},Z={class:"flex-1"},ee=s("div",{class:"form-tips"},"\u65B9\u4FBF\u901A\u8FC7\u540D\u79F0\u7BA1\u7406\u5173\u6CE8\u56DE\u590D\u5185\u5BB9",-1),ue={class:"flex-1"},te=s("div",{class:"form-tips"},"\u6DFB\u52A0\u591A\u6761\u5173\u952E\u8BCD\u8BB0\u5F55\u6309\u56DE\u8F66\u6362\u884C",-1),oe={class:"flex-1"},le=s("div",{class:"form-tips"},"\u6A21\u7CCA\u5339\u914D\u65F6\uFF0C\u5173\u952E\u8BCD\u90E8\u5206\u5339\u914D\u7528\u6237\u8F93\u5165\u7684\u5185\u5BB9\u5373\u53EF",-1),ae={class:"flex-1"},ne={class:"flex-1"},se={class:"flex-1"},re={class:"flex-1"},de=s("div",{class:"form-tips"}," \u8BBE\u7F6E\u5173\u952E\u8BCD\u5339\u914D\u591A\u6761\u65F6\u56DE\u590D\u7684\u6570\u91CF\uFF0C\u6682\u65F6\u652F\u6301\u56DE\u590D\u4E00\u6761\u5185\u5BB9 ",-1),De=j({__name:"edit",emits:["success","close"],setup(me,{expose:g,emit:V}){const y=V,B=C(),f=C(),F=H("add"),b=M(()=>F.value=="edit"?"\u7F16\u8F91":"\u65B0\u589E"),e=W({id:"",name:"",reply_type:0,content_type:1,keyword:"",content:"",content_image:"",matching_type:1,status:1,sort:0,reply_num:1}),v={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0",trigger:["blur"]}],keyword:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",trigger:["blur"]}],matching_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u5339\u914D\u65B9\u5F0F",trigger:["blur"]}],content_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u56DE\u590D\u7C7B\u578B",trigger:["blur"]}],content_image:[{required:!0,message:"\u8BF7\u9009\u62E9\u56DE\u590D\u56FE\u7247"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9",trigger:["blur"]}]},{lockFn:w}=$(async()=>{var u,r;await((u=B.value)==null?void 0:u.validate());const n={...e,keyword:e.keyword.split(/[(\r\n)\r\n]+/)};F.value=="edit"?await K(n):await L(n),(r=f.value)==null||r.close(),y("success")}),k=(n="add",u=0)=>{var r;F.value=n,e.reply_type=u,(r=f.value)==null||r.open()},E=n=>{for(const u in e)n[u]!=null&&n[u]!=null&&(e[u]=n[u])},x=async n=>{const u=await J({id:n.id});E(u)},h=()=>{y("close")};return g({open:k,setFormData:E,getDetail:x}),(n,u)=>{const r=I,d=T,m=N,D=P,R=G,A=Q,U=S,q=z;return i(),X("div",Y,[o(O,{ref_key:"popupRef",ref:f,title:t(b),async:!0,width:"500px",onConfirm:t(w),onClose:h},{default:l(()=>[o(q,{ref_key:"formRef",ref:B,model:t(e),"label-width":"84px",rules:v,class:"pr-10"},{default:l(()=>[o(d,{label:"\u89C4\u5219\u540D\u79F0",prop:"name"},{default:l(()=>[s("div",Z,[o(r,{modelValue:t(e).name,"onUpdate:modelValue":u[0]||(u[0]=a=>t(e).name=a),placeholder:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0"},null,8,["modelValue"]),ee])]),_:1}),t(e).reply_type==2?(i(),_(d,{key:0,label:"\u5173\u952E\u8BCD",prop:"keyword"},{default:l(()=>[s("div",ue,[o(r,{type:"textarea",rows:5,modelValue:t(e).keyword,"onUpdate:modelValue":u[1]||(u[1]=a=>t(e).keyword=a),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},null,8,["modelValue"]),te])]),_:1})):c("",!0),t(e).reply_type==2?(i(),_(d,{key:1,label:"\u5339\u914D\u65B9\u5F0F",prop:"matching_type"},{default:l(()=>[s("div",oe,[o(D,{modelValue:t(e).matching_type,"onUpdate:modelValue":u[2]||(u[2]=a=>t(e).matching_type=a)},{default:l(()=>[o(m,{label:1},{default:l(()=>[p("\u5168\u5339\u914D")]),_:1}),o(m,{label:2},{default:l(()=>[p("\u6A21\u7CCA\u5339\u914D")]),_:1})]),_:1},8,["modelValue"]),le])]),_:1})):c("",!0),o(d,{label:"\u56DE\u590D\u7C7B\u578B",prop:"content_type",min:0},{default:l(()=>[s("div",ae,[o(D,{modelValue:t(e).content_type,"onUpdate:modelValue":u[3]||(u[3]=a=>t(e).content_type=a)},{default:l(()=>[o(m,{label:1},{default:l(()=>[p("\u6587\u672C")]),_:1}),o(m,{label:2},{default:l(()=>[p("\u56FE\u6587")]),_:1}),o(m,{label:3},{default:l(()=>[p("\u8D85\u94FE\u63A5")]),_:1})]),_:1},8,["modelValue"])])]),_:1}),o(d,{label:t(e).content_type!==3?"\u56DE\u590D\u5185\u5BB9":"\u94FE\u63A5\u5730\u5740",prop:"content"},{default:l(()=>[s("div",ne,[o(r,{modelValue:t(e).content,"onUpdate:modelValue":u[4]||(u[4]=a=>t(e).content=a),autosize:{minRows:4,maxRows:4},type:"textarea",maxlength:"200","show-word-limit":"",placeholder:`\u8BF7\u8F93\u5165${t(e).content_type!==3?"\u56DE\u590D\u5185\u5BB9":"\u94FE\u63A5\u5730\u5740"}`},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),t(e).content_type==2?(i(),_(d,{key:2,label:"\u56DE\u590D\u56FE\u7247",prop:"content_image"},{default:l(()=>[o(R,{modelValue:t(e).content_image,"onUpdate:modelValue":u[5]||(u[5]=a=>t(e).content_image=a)},null,8,["modelValue"])]),_:1})):c("",!0),o(d,{label:"\u6392\u5E8F"},{default:l(()=>[s("div",se,[o(A,{modelValue:t(e).sort,"onUpdate:modelValue":u[6]||(u[6]=a=>t(e).sort=a),min:0,max:9999},null,8,["modelValue"])])]),_:1}),t(e).reply_type==2?(i(),_(d,{key:3,label:"\u56DE\u590D\u6570\u91CF",prop:"reply_num",required:""},{default:l(()=>[s("div",re,[o(D,{modelValue:t(e).reply_num,"onUpdate:modelValue":u[7]||(u[7]=a=>t(e).reply_num=a)},{default:l(()=>[o(m,{label:1},{default:l(()=>[p("\u56DE\u590D\u5339\u914D\u9996\u8BCD\u6761")]),_:1})]),_:1},8,["modelValue"]),de])]),_:1})):c("",!0),o(d,{label:"\u542F\u7528\u72B6\u6001"},{default:l(()=>[o(U,{modelValue:t(e).status,"onUpdate:modelValue":u[8]||(u[8]=a=>t(e).status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","onConfirm"])])}}});export{De as _};
