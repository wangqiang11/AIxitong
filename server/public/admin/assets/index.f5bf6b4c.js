import{x as Z,y as ee,t as te,D as ae,F as oe,G as le,I as ue,J as ne,w as se,K as ie,L as me,M as re}from"./element-plus.6d5d7657.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang.9b97e6c6.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang.5e69f4eb.js";import{u as ce}from"./usePaging.9ff9bac2.js";import{b as _e}from"./ai_key.e47c1ec4.js";import{g as L,_ as fe,s as ye,d as be,a as ve,b as Ce}from"./edit.vue_vue_type_script_setup_true_lang.149eac96.js";import{f as D}from"./index.fc6caf68.js";import{d as ge,r as h,s as Fe,_ as he,b as we,ag as Ee,o as n,c as w,T as e,K as o,u as a,a as C,S as V,a6 as x,J as m,Q as b,j as $,L as v,P as Be}from"./@vue.7946e41b.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.c487cb65.js";import"./vue-drag-resize.1871ee6b.js";import"./@vueuse.927bd09a.js";import"./lodash.4744e7a5.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";const ke=C("div",{class:"text-xl font-medium mb-[20px]"},"\u529F\u80FD\u72B6\u6001",-1),De=C("div",{class:"form-tips"},"\u5F00\u542F\u65F6\uFF0C\u5982\u679CKey\u5DF2\u5931\u6548\u7684\u8BDD\u4F1A\u81EA\u52A8\u4E0B\u67B6Key",-1),Ve={class:"mb-[10px]"},xe={class:"flex justify-end mt-4"},gt=ge({__name:"index",setup(Ae){const U=h(!0),A=Fe(),E=h([]),s=he({type:1,channel:"",model_id:"",keyword:"",start_time:"",end_time:"",status:""}),N=we(()=>[1,2].includes(Number(s.type))),B=h(1),p=h({key_auto_down:1}),z=[{name:"AI\u5BF9\u8BDD",type:1},{name:"\u5411\u91CF\u8BAD\u7EC3",type:2},{name:"\u8BED\u97F3\u64AD\u62A5",type:3},{name:"\u8BED\u97F3\u8F93\u5165",type:4}],{pager:d,getLists:c,resetPage:M,resetParams:I}=ce({fetchFun:L,params:s}),j=u=>{s.type=u,c(),K()},K=async()=>{try{const u=await _e({type:s.type});E.value=u}catch(u){console.log("\u83B7\u53D6ai\u6A21\u578B\u5931\u8D25=>",u)}},J=u=>{ye({id:u}),D.msgSuccess("\u64CD\u4F5C\u6210\u529F")},R=(u,l)=>{var _;(_=A.value)==null||_.open(s.type,u,l)},q=async u=>{await D.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await be({id:u}),D.msgSuccess("\u64CD\u4F5C\u6210\u529F"),c()},P=async()=>{p.value=await ve()},G=async()=>{try{await Ce(p.value)}finally{P()}};return P(),c(),K(),(u,l)=>{const _=te,g=ae,S=oe,k=le,f=ue,T=ne,y=se,O=pe,Q=Z,H=ee,r=ie,W=me,X=de,F=Ee("perms"),Y=re;return n(),w("div",null,[e(k,{shadow:"never",class:"!border-none"},{default:o(()=>[e(S,{class:"ls-form",model:a(p),"label-width":"120px"},{default:o(()=>[ke,e(g,{label:"key\u6C60\u89C4\u5219",prop:"key_auto_down"},{default:o(()=>[C("div",null,[e(_,{"active-value":1,"inactive-value":0,modelValue:a(p).key_auto_down,"onUpdate:modelValue":l[0]||(l[0]=t=>a(p).key_auto_down=t),onChange:G},null,8,["modelValue"]),De])]),_:1})]),_:1},8,["model"])]),_:1}),e(k,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e(S,{ref:"formRef",class:"mb-[-16px]",model:a(s),inline:!0},{default:o(()=>[e(g,{label:"\u63A5\u53E3\u7C7B\u578B"},{default:o(()=>[e(T,{class:"w-[280px] mr-3",modelValue:a(s).channel,"onUpdate:modelValue":l[1]||(l[1]=t=>a(s).channel=t)},{default:o(()=>[a(N)?(n(!0),w(V,{key:0},x(a(E),t=>(n(),m(f,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128)):(n(!0),w(V,{key:1},x(a(E),(t,i)=>(n(),m(f,{key:i,label:t,value:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"\u72B6\u6001"},{default:o(()=>[e(T,{class:"w-[280px]",modelValue:a(s).status,"onUpdate:modelValue":l[2]||(l[2]=t=>a(s).status=t)},{default:o(()=>[e(f,{label:"\u5168\u90E8",value:""}),e(f,{label:"\u5F00\u542F",value:1}),e(f,{label:"\u5173\u95ED",value:0})]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:o(()=>[e(y,{type:"primary",onClick:a(M)},{default:o(()=>[b("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(y,{onClick:a(I)},{default:o(()=>[b("\u91CD\u7F6E")]),_:1},8,["onClick"]),e(O,{class:"ml-2.5","fetch-fun":a(L),params:a(s),"page-size":a(d).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),e(k,{shadow:"never",class:"!border-none mt-4"},{default:o(()=>[e(H,{modelValue:a(B),"onUpdate:modelValue":l[3]||(l[3]=t=>$(B)?B.value=t:null),onTabChange:j},{default:o(()=>[(n(),w(V,null,x(z,(t,i)=>e(Q,{label:`${t.name}`,name:t.type,key:i},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),C("div",Ve,[v((n(),m(y,{type:"primary",onClick:l[4]||(l[4]=t=>R("add"))},{default:o(()=>[b(" + \u65B0\u589E\u89C4\u5219 ")]),_:1})),[[F,["setting.KeyRule/add"]]])]),v((n(),m(W,{size:"large",data:a(d).lists},{default:o(()=>[e(r,{label:"\u63A5\u53E3\u7C7B\u578B",prop:"channel","min-width":"100"}),e(r,{label:"\u505C\u7528\u89C4\u5219",prop:"rule","min-width":"200"}),e(r,{label:"\u505C\u7528\u63D0\u793A",prop:"prompt","min-width":"140"}),v((n(),m(r,{label:"\u72B6\u6001","min-width":"100"},{default:o(({row:t})=>[e(_,{modelValue:t.status,"onUpdate:modelValue":i=>t.status=i,"active-value":1,"inactive-value":0,onChange:i=>J(t.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})),[[F,["setting.KeyRule/status"]]]),e(r,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180"}),e(r,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time","min-width":"180"}),e(r,{label:"\u64CD\u4F5C",fixed:"right","min-width":"180"},{default:o(({row:t})=>[v((n(),m(y,{type:"primary",link:"",onClick:i=>R("edit",t)},{default:o(()=>[b(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[F,["setting.KeyRule/edit"]]]),v((n(),m(y,{type:"danger",link:!0,onClick:i=>q(t.id)},{default:o(()=>[b(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[F,["setting.KeyRule/del"]]])]),_:1})]),_:1},8,["data"])),[[Y,a(d).loading]]),C("div",xe,[e(X,{modelValue:a(d),"onUpdate:modelValue":l[5]||(l[5]=t=>$(d)?d.value=t:null),onChange:a(c)},null,8,["modelValue","onChange"])])]),_:1}),a(U)?(n(),m(fe,{key:0,ref_key:"editRef",ref:A,onSuccess:a(c)},null,8,["onSuccess"])):Be("",!0)])}}});export{gt as default};
