import{H as me,C as de,D as pe,I as ce,J as _e,w as fe,F as ve,G as ye,K as Ce,t as ge,L as be,M as ke}from"./element-plus.6d5d7657.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang.9b97e6c6.js";import{f as N,_ as j}from"./index.fc6caf68.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang.5f8bf4ff.js";import{d as H,_ as J,s as S,r as B,ag as Ee,o,c as z,T as l,K as a,u,a7 as G,S as he,a6 as Se,J as n,Q as p,a as b,L as f,P as g,R as E,j as we,n as w}from"./@vue.7946e41b.js";import{g as Ve,u as De,v as Ae,w as $e}from"./ai_square.6d6cae03.js";import{u as xe}from"./usePaging.9ff9bac2.js";import{_ as Te}from"./edit.vue_vue_type_script_setup_true_lang.fb398c3f.js";import{_ as Re}from"./audit.vue_vue_type_script_setup_true_lang.7f09f8b9.js";import{_ as qe}from"./reply.vue_vue_type_script_setup_true_lang.ebe2c65f.js";import{_ as Ue}from"./music-item.vue_vue_type_script_setup_true_lang.e680d285.js";import{_ as Ke}from"./transfer-cate.vue_vue_type_script_setup_true_lang.725bc349.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@vueuse.927bd09a.js";import"./lodash.4744e7a5.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./vue-drag-resize.1871ee6b.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";import"./picker.c6906711.js";import"./index.c487cb65.js";import"./index.ec37127a.js";import"./index.410c53ff.js";import"./index.vue_vue_type_script_setup_true_lang.266c4e6e.js";import"./index.vue_vue_type_script_setup_true_lang.9933e104.js";import"./preview.vue_vue_type_script_setup_true_lang.6702fed0.js";import"./file.vue_vue_type_style_index_0_scoped_ba7daef9_lang.b66d1428.js";import"./vue3-video-play.e85b6285.js";import"./vuedraggable.0170ba82.js";import"./vue.c48aa7bc.js";import"./sortablejs.65032496.js";const Le={class:"mb-4"},Pe=["onClick"],Ie={class:"flex items-center"},Me={class:"ml-4"},Ne={class:"flex justify-end mt-4"},je=H({name:"musicSquareLists"}),Qt=H({...je,setup(Je){const i=J({verify_status:"",user_info:"",keyword:"",category_id:"",is_show:"",source:"",start_time:"",end_time:""}),k=J({loading:!0,lists:[]}),R=S(),q=S(),U=S(),K=S(),V=B(!1),D=B(!1),A=B(!1),$=B(!1),v=B([]),{pager:F,getLists:y,resetPage:x,resetParams:O}=xe({fetchFun:$e,params:i}),Q=async()=>{k.loading=!0;try{const s=await Ve({type:2});k.lists=s,k.loading=!1}catch(s){k.loading=!1,console.log("\u83B7\u53D6\u7ED8\u753B\u5206\u7C7B\u5931\u8D25=>",s)}},W=s=>{v.value=s},X=(s,t)=>{N.confirm(s,t,{showCancelButton:!1,type:"",customStyle:{"max-width":"550px"}})},Y=async s=>{var t;V.value=!0,await w(),(t=R.value)==null||t.open("edit",s)},Z=async s=>{try{await De({id:s})}catch(t){console.log("\u4FEE\u6539\u72B6\u6001\u5931\u8D25=>",t)}},L=async s=>{var t;D.value=!0,await w(),(t=q.value)==null||t.open(s)},ee=async s=>{var t;A.value=!0,await w(),(t=U.value)==null||t.open(s)},te=async s=>{var t;$.value=!0,await w(),(t=K.value)==null||t.open(s)},P=async s=>{await N.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await Ae({id:s}),y()};return Q(),y(),(s,t)=>{const I=de,c=pe,m=ce,h=_e,le=Be,_=fe,ue=ve,M=ye,d=Ce,ae=j,se=j,T=me,oe=ge,ie=be,ne=Fe,C=Ee("perms"),re=ke;return o(),z("div",null,[l(M,{class:"!border-none",shadow:"never"},{default:a(()=>[l(ue,{ref:"formRef",class:"mb-[-16px]",model:u(i),inline:!0},{default:a(()=>[l(c,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[l(I,{class:"w-[280px]",modelValue:u(i).user_info,"onUpdate:modelValue":t[0]||(t[0]=e=>u(i).user_info=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID/\u7528\u6237\u6635\u79F0",clearable:"",onKeyup:G(u(x),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(c,{label:"\u5173\u952E\u8BCD"},{default:a(()=>[l(I,{class:"w-[280px]",modelValue:u(i).keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>u(i).keyword=e),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",clearable:"",onKeyup:G(u(x),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(c,{label:"\u6240\u5C5E\u5206\u7C7B"},{default:a(()=>[l(h,{class:"w-[280px]",modelValue:u(i).category_id,"onUpdate:modelValue":t[2]||(t[2]=e=>u(i).category_id=e)},{default:a(()=>[l(m,{label:"\u5168\u90E8",value:""}),(o(!0),z(he,null,Se(u(k).lists,e=>(o(),n(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"\u5BA1\u6838\u72B6\u6001"},{default:a(()=>[l(h,{class:"w-[280px]",modelValue:u(i).verify_status,"onUpdate:modelValue":t[3]||(t[3]=e=>u(i).verify_status=e)},{default:a(()=>[l(m,{label:"\u5168\u90E8",value:""}),l(m,{label:"\u5F85\u5BA1\u6838",value:0}),l(m,{label:"\u5BA1\u6838\u901A\u8FC7",value:1}),l(m,{label:"\u5BA1\u6838\u4E0D\u901A\u8FC7",value:2})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"\u662F\u5426\u663E\u793A"},{default:a(()=>[l(h,{class:"w-[280px]",modelValue:u(i).is_show,"onUpdate:modelValue":t[4]||(t[4]=e=>u(i).is_show=e)},{default:a(()=>[l(m,{label:"\u5168\u90E8",value:""}),l(m,{label:"\u663E\u793A",value:1}),l(m,{label:"\u9690\u85CF",value:0})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"\u6DFB\u52A0\u6765\u6E90"},{default:a(()=>[l(h,{class:"w-[280px]",modelValue:u(i).source,"onUpdate:modelValue":t[5]||(t[5]=e=>u(i).source=e)},{default:a(()=>[l(m,{label:"\u5168\u90E8",value:""}),l(m,{label:"\u540E\u53F0\u6DFB\u52A0",value:1}),l(m,{label:"\u524D\u53F0\u7528\u6237",value:2})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:a(()=>[l(le,{startTime:u(i).start_time,"onUpdate:startTime":t[6]||(t[6]=e=>u(i).start_time=e),endTime:u(i).end_time,"onUpdate:endTime":t[7]||(t[7]=e=>u(i).end_time=e)},null,8,["startTime","endTime"])]),_:1}),l(c,null,{default:a(()=>[l(_,{type:"primary",onClick:u(x)},{default:a(()=>[p("\u67E5\u8BE2")]),_:1},8,["onClick"]),l(_,{onClick:u(O)},{default:a(()=>[p("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),l(M,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[b("div",Le,[f((o(),n(_,{type:"default",plain:!0,disabled:!u(v).length,onClick:t[8]||(t[8]=e=>L(u(v).map(r=>r.id)))},{default:a(()=>[p(" \u6279\u91CF\u5BA1\u6838 ")]),_:1},8,["disabled"])),[[C,["music.musicSquare/verifyStatus"]]]),f((o(),n(_,{type:"default",plain:!0,disabled:!u(v).length,onClick:t[9]||(t[9]=e=>te(u(v).map(r=>r.id)))},{default:a(()=>[p(" \u79FB\u52A8\u5206\u7C7B ")]),_:1},8,["disabled"])),[[C,["music.musicSquare/removeCategory"]]]),f((o(),n(_,{type:"default",plain:!0,disabled:!u(v).length,onClick:t[10]||(t[10]=e=>P(u(v).map(r=>r.id)))},{default:a(()=>[p(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[C,["music.musicSquare/del"]]])]),f((o(),n(ie,{size:"large",data:u(F).lists,onSelectionChange:W},{default:a(()=>[l(d,{type:"selection",width:"55"}),l(d,{label:"\u6B4C\u66F2\u5C01\u9762",width:"100"},{default:a(({row:e})=>[e.image_url?(o(),n(ae,{key:0,class:"flex-none",src:e.image_url,"preview-teleported":"","preview-src-list":[e.image_url],width:58,height:58,fit:"contain"},null,8,["src","preview-src-list"])):g("",!0)]),_:1}),l(d,{label:"\u6B4C\u66F2\u540D\u79F0","min-width":"180"},{default:a(({row:e})=>[l(Ue,{name:e.title,url:e.audio_url},null,8,["name","url"])]),_:1}),l(d,{label:"\u6B4C\u8BCD","min-width":"180"},{default:a(({row:e})=>[b("div",{class:"line-clamp-3 cursor-pointer",onClick:r=>X(e.lyric,"\u6B4C\u8BCD")},E(e.lyric),9,Pe)]),_:1}),l(d,{label:"\u6240\u5C5E\u5206\u7C7B",prop:"category_name","min-width":"120"}),l(d,{label:"\u6DFB\u52A0\u6765\u6E90",prop:"source_desc","min-width":"120"}),l(d,{label:"\u7528\u6237\u4FE1\u606F","min-width":"200"},{default:a(({row:e})=>[b("div",Ie,[e!=null&&e.user_info.image?(o(),n(se,{key:0,class:"flex-none",src:e==null?void 0:e.user_info.image,width:48,height:48,"preview-src-list":[e==null?void 0:e.user_info.image],"preview-teleported":!0,"hide-on-click-modal":!0,fit:"contain"},null,8,["src","preview-src-list"])):g("",!0),b("span",Me,E(e==null?void 0:e.user_info.name),1)])]),_:1}),l(d,{label:"\u5BA1\u6838\u72B6\u6001","min-width":"140"},{default:a(({row:e})=>[b("div",null,[e.verify_status==1?(o(),n(T,{key:0,class:"ml-2",type:"success"},{default:a(()=>[p(E(e.verify_status_desc),1)]),_:2},1024)):e.verify_status==0?(o(),n(T,{key:1,class:"ml-2",type:"warning"},{default:a(()=>[p(E(e.verify_status_desc),1)]),_:2},1024)):(o(),n(T,{key:2,class:"ml-2 cursor-pointer",type:"danger",onClick:r=>ee(e.verify_result)},{default:a(()=>[p(E(e.verify_status_desc),1)]),_:2},1032,["onClick"]))])]),_:1}),f((o(),n(d,{label:"\u662F\u5426\u663E\u793A","min-width":"100"},{default:a(({row:e})=>[l(oe,{onChange:r=>Z(e.id),modelValue:e.is_show,"onUpdate:modelValue":r=>e.is_show=r,"active-value":1,"inactive-value":0},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1})),[[C,["music.musicSquare/isShow"]]]),l(d,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time",sortable:"","min-width":"180","show-tooltip-when-overflow":""}),l(d,{label:"\u64CD\u4F5C","min-width":"180",fixed:"right"},{default:a(({row:e})=>[f((o(),n(_,{type:"primary",link:"",onClick:r=>Y(e.id)},{default:a(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[C,["music.musicSquare/edit"]]]),e.verify_status?g("",!0):f((o(),n(_,{key:0,type:"primary",link:"",onClick:r=>L([e.id])},{default:a(()=>[p(" \u5BA1\u6838 ")]),_:2},1032,["onClick"])),[[C,["music.musicSquare/verifyStatus"]]]),f((o(),n(_,{type:"danger",link:"",onClick:r=>P([e.id])},{default:a(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[C,["music.musicSquare/del"]]])]),_:1})]),_:1},8,["data"])),[[re,u(F).loading]]),b("div",Ne,[l(ne,{modelValue:u(F),"onUpdate:modelValue":t[11]||(t[11]=e=>we(F)?F.value=e:null),onChange:u(y)},null,8,["modelValue","onChange"])])]),_:1}),u(V)?(o(),n(Te,{key:0,ref_key:"editRef",ref:R,onSuccess:u(y),onClose:t[12]||(t[12]=e=>V.value=!1)},null,8,["onSuccess"])):g("",!0),u(D)?(o(),n(Re,{key:1,ref_key:"auditRef",ref:q,onSuccess:u(y),onClose:t[13]||(t[13]=e=>D.value=!1)},null,8,["onSuccess"])):g("",!0),u(A)?(o(),n(qe,{key:2,ref_key:"replyRef",ref:U,onSuccess:u(y),onClose:t[14]||(t[14]=e=>A.value=!1)},null,8,["onSuccess"])):g("",!0),u($)?(o(),n(Ke,{key:3,type:2,ref_key:"transferRef",ref:K,onSuccess:u(y),onClose:t[15]||(t[15]=e=>$.value=!1)},null,8,["onSuccess"])):g("",!0)])}}});export{Qt as default};
