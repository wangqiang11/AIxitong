import{H as z,C as G,D as H,I as Q,J as W,w as X,F as Y,G as Z,K as ee,L as te,M as le}from"./element-plus.6d5d7657.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang.9b97e6c6.js";import{f as S,_ as ae}from"./index.fc6caf68.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang.5f8bf4ff.js";import{d as P,_ as oe,r as I,ag as se,o as n,c as g,T as t,K as l,u,a7 as L,S as w,a6 as x,J as i,Q as d,L as D,a as p,P as _,R as m,j as ie}from"./@vue.7946e41b.js";import{u as re}from"./usePaging.9ff9bac2.js";import{d as me,g as de,a as pe}from"./music.4a93cc94.js";import{_ as ce}from"./music-item.vue_vue_type_script_setup_true_lang.e680d285.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@vueuse.927bd09a.js";import"./lodash.4744e7a5.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./vue-drag-resize.1871ee6b.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";const _e={class:"flex items-center"},fe={class:"line-clamp-2 ml-[10px]"},Ce=["onClick"],Fe=["onClick"],be={class:"flex justify-end mt-4"},ve=P({name:"musicRecord"}),mt=P({...ve,setup(ye){const o=oe({user_info:"",prompt:"",status:-1,style_id:"",channel:"",start_time:"",end_time:""}),E=I([]),M=f=>{E.value=f.map(a=>a.id)},T=async f=>{await S.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await me({id:f}),h()},k=(f,a)=>{S.confirm(f,a,{showCancelButton:!1,type:"",customStyle:{"max-width":"550px"}})},{pager:F,getLists:h,resetPage:B,resetParams:N}=re({fetchFun:pe,params:o}),v=I({style:[],status:[],channel:[]});return(async()=>{v.value=await de()})(),h(),(f,a)=>{const R=G,c=H,C=Q,V=W,O=ne,b=X,A=Y,$=Z,s=ee,U=ae,y=z,j=te,J=ue,K=se("perms"),q=le;return n(),g("div",null,[t($,{shadow:"never",class:"!border-none"},{default:l(()=>[t(A,{ref:"formRef",class:"mb-[-16px]",model:u(o),inline:!0},{default:l(()=>[t(c,{label:"\u7528\u6237\u4FE1\u606F"},{default:l(()=>[t(R,{class:"w-[280px]",modelValue:u(o).user_info,"onUpdate:modelValue":a[0]||(a[0]=e=>u(o).user_info=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID/\u7528\u6237\u6635\u79F0",clearable:"",onKeyup:L(u(B),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(c,{label:"\u5173\u952E\u8BCD"},{default:l(()=>[t(R,{class:"w-[280px]",modelValue:u(o).prompt,"onUpdate:modelValue":a[1]||(a[1]=e=>u(o).prompt=e),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",clearable:"",onKeyup:L(u(B),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(c,{label:"\u751F\u6210\u72B6\u6001"},{default:l(()=>[t(V,{class:"!w-[280px]",modelValue:u(o).status,"onUpdate:modelValue":a[2]||(a[2]=e=>u(o).status=e)},{default:l(()=>[t(C,{label:"\u5168\u90E8",value:-1}),(n(!0),g(w,null,x(u(v).status,(e,r)=>(n(),i(C,{label:e,value:r,key:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u97F3\u4E50\u98CE\u683C"},{default:l(()=>[t(V,{class:"!w-[280px]",modelValue:u(o).style_id,"onUpdate:modelValue":a[3]||(a[3]=e=>u(o).style_id=e)},{default:l(()=>[t(C,{label:"\u5168\u90E8",value:""}),(n(!0),g(w,null,x(u(v).style,(e,r)=>(n(),i(C,{label:e.name,value:e.id,key:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u97F3\u4E50\u6E20\u9053"},{default:l(()=>[t(V,{class:"!w-[280px]",modelValue:u(o).channel,"onUpdate:modelValue":a[4]||(a[4]=e=>u(o).channel=e)},{default:l(()=>[t(C,{label:"\u5168\u90E8",value:""}),(n(!0),g(w,null,x(u(v).channel,(e,r)=>(n(),i(C,{label:e,value:r,key:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u751F\u6210\u65F6\u95F4"},{default:l(()=>[t(O,{startTime:u(o).start_time,"onUpdate:startTime":a[5]||(a[5]=e=>u(o).start_time=e),endTime:u(o).end_time,"onUpdate:endTime":a[6]||(a[6]=e=>u(o).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(c,null,{default:l(()=>[t(b,{type:"primary",onClick:u(B)},{default:l(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(b,{onClick:u(N)},{default:l(()=>[d("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t($,{class:"!border-none mt-4",shadow:"never"},{default:l(()=>[D((n(),i(b,{class:"mb-4",onClick:a[7]||(a[7]=e=>T(u(E))),disabled:!u(E).length},{default:l(()=>[d(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[K,["music.musicRecord/del"]]]),D((n(),i(j,{size:"large",data:u(F).lists,"row-key":"id",onSelectionChange:M},{default:l(()=>[t(s,{type:"selection",width:"55"}),t(s,{label:"\u7528\u6237\u6635\u79F0","min-width":"180"},{default:l(({row:e})=>[p("div",_e,[e.avatar?(n(),i(U,{key:0,class:"flex-none rounded-[50%]",src:e.avatar,width:48,height:48,fit:"contain"},null,8,["src"])):_("",!0),p("div",fe,m(e.nickname),1)])]),_:1}),t(s,{label:"\u7528\u6237\u8F93\u5165","min-width":"180"},{default:l(({row:e})=>[p("div",{class:"line-clamp-3 cursor-pointer",onClick:r=>k(e.prompt,"\u7528\u6237\u8F93\u5165")},m(e.prompt),9,Ce)]),_:1}),t(s,{label:"\u6B4C\u66F2\u5C01\u9762",width:"100"},{default:l(({row:e})=>[e.image_url?(n(),i(U,{key:0,class:"flex-none",src:e.image_url,"preview-teleported":"","preview-src-list":[e.image_url],width:58,height:58,fit:"contain"},null,8,["src","preview-src-list"])):_("",!0)]),_:1}),t(s,{label:"\u6B4C\u66F2\u540D\u79F0","min-width":"180"},{default:l(({row:e})=>[t(ce,{name:e.title,url:e.audio_url},null,8,["name","url"])]),_:1}),t(s,{label:"\u751F\u6210\u7ED3\u679C","min-width":"120"},{default:l(({row:e})=>[e.status==0?(n(),i(y,{key:0,type:"info"},{default:l(()=>[d(m(e.status_desc),1)]),_:2},1024)):_("",!0),e.status==1?(n(),i(y,{key:1,type:"warning"},{default:l(()=>[d(m(e.status_desc),1)]),_:2},1024)):_("",!0),e.status==2?(n(),i(y,{key:2,type:"success"},{default:l(()=>[d(m(e.status_desc),1)]),_:2},1024)):_("",!0),e.status==3?(n(),i(y,{key:3,type:"danger"},{default:l(()=>[d(m(e.status_desc),1)]),_:2},1024)):_("",!0),e.status==3&&e.fail_reason?(n(),i(b,{key:4,type:"danger",link:!0,onClick:r=>k(`\u9519\u8BEF\u4FE1\u606F\uFF1A${e.fail_reason}`,"\u9519\u8BEF\u539F\u56E0")},{default:l(()=>[d(" \u67E5\u770B\u539F\u56E0 ")]),_:2},1032,["onClick"])):_("",!0)]),_:1}),t(s,{label:"\u6E20\u9053","min-width":"120"},{default:l(({row:e})=>[p("div",null,m(e.channel||"-"),1)]),_:1}),t(s,{label:"\u7248\u672C","min-width":"100"},{default:l(({row:e})=>[p("div",null,m(e.mv||"-"),1)]),_:1}),t(s,{label:"\u6B4C\u8BCD","min-width":"180"},{default:l(({row:e})=>[p("div",{class:"line-clamp-3 cursor-pointer",onClick:r=>k(e.lyric,"\u6B4C\u8BCD")},m(e.lyric),9,Fe)]),_:1}),t(s,{label:"\u98CE\u683C","min-width":"100"},{default:l(({row:e})=>[p("div",null,m(e.style_desc||"-"),1)]),_:1}),t(s,{label:"\u6D88\u8017\u7535\u529B\u503C","min-width":"120",prop:"tokens"}),t(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(s,{label:"\u8BF7\u6C42ip",prop:"ip","min-width":"140"}),t(s,{label:"\u64CD\u4F5C",width:"100",fixed:"right"},{default:l(({row:e})=>[D((n(),i(b,{type:"danger",link:"",onClick:r=>T([e.id])},{default:l(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[K,["music.musicRecord/del"]]])]),_:1})]),_:1},8,["data"])),[[q,u(F).loading]]),p("div",be,[t(J,{modelValue:u(F),"onUpdate:modelValue":a[8]||(a[8]=e=>ie(F)?F.value=e:null),onChange:u(h)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{mt as default};
