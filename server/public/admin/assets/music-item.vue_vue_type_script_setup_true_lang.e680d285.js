import{b as C}from"./index.fc6caf68.js";import{s as V,r as y,C as k,d as w,o as _,c as P,a as A,R as B,M as g,u as p,T as N,P as S}from"./@vue.7946e41b.js";const v=new Set,z=t=>{const{onstart:o,onstop:n,onerror:s}=t||{},e=V(null),u=y(!1),l=y(!1),m=async(a,x=!0)=>{var d;let c;if(typeof a=="string"?c=()=>a:c=a,i(),e.value||h(),x&&((d=e.value)==null?void 0:d.src)){e.value.play();return}u.value=!0;try{const f=await Promise.resolve(c());e.value.src=f,e.value.play()}catch(f){console.error(f),s==null||s()}finally{u.value=!1}},r=()=>{var a;(a=e.value)==null||a.pause(),l.value=!1},i=()=>{v.forEach(a=>{a.pause(),a.currentTime=0,a.audioPlaying.value=!1})},h=()=>{e.value=new Audio,e.value.audioPlaying=l,v.add(e.value),e.value.onplay=()=>{o==null||o(),l.value=!0},e.value.onended=()=>{n==null||n(),l.value=!1},e.value.onerror=()=>{s==null||s(),l.value=!1}};return k(()=>{var a;(a=e.value)!=null&&a.src&&i(),e.value&&(v.delete(e.value),e.value=null)}),{play:m,audioLoading:u,audioPlaying:l,pause:r,pauseAll:i}},E={class:"line-clamp-1"},U=w({__name:"music-item",props:{name:{},url:{}},setup(t){const o=t,{pause:n,play:s,audioPlaying:e}=z(),u=()=>{!o.url||(e.value?n():s(o.url))};return(l,m)=>{const r=C;return _(),P("div",{class:g(["flex items-center cursor-pointer hover:text-primary",{"text-primary":p(e)}]),onClick:u},[A("div",E,B(l.name),1),l.url?(_(),P("span",{key:0,class:g(["flex ml-[10px]",{"!opacity-100":p(e)}])},[N(r,{name:`el-icon-${p(e)?"VideoPause":"VideoPlay"}`,size:18},null,8,["name"])],2)):S("",!0)],2)}}});export{U as _};
