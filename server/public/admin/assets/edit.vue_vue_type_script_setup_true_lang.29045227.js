import{D as L,C as S,I as h,J as R,t as U,F as J}from"./element-plus.6d5d7657.js";import{_ as N}from"./picker.c6906711.js";import{g as O,e as I,a as q}from"./draw_lora.ca5ebd35.js";import{P}from"./index.c487cb65.js";import{u as T}from"./useDictOptions.aef4d901.js";import{d as K,s as F,r as j,b as z,_ as G,o as p,c as E,T as a,K as n,u as l,a as c,S as H,a6 as M,J as Q}from"./@vue.7946e41b.js";const W={class:"edit-popup"},X={class:"w-[380px]"},Y=c("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u6392\u8D8A\u524D\u9762",-1),ne=K({__name:"edit",emits:["success","close"],setup(Z,{expose:B,emit:V}){const _=V,f=F(),i=F(),d=j("add"),A=z(()=>d.value=="edit"?"\u7F16\u8F91\u5FAE\u8C03\u6A21\u578B":"\u65B0\u589E\u5FAE\u8C03\u6A21\u578B"),o=G({id:"",title:"",model_name:"",cover:"",sort:0,status:1}),D={cover:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u6A21\u578B\u5C01\u9762",trigger:["blur","change"]}],model_name:[{required:!0,message:"\u8BF7\u9009\u62E9\u6A21\u578B\u6587\u4EF6",trigger:["blur","change"]}]},{optionsData:v}=T({loraList:{api:O,transformData(t){return t}}}),b=async()=>{var e,r;await((e=f.value)==null?void 0:e.validate());const t=JSON.parse(JSON.stringify(o));if(!t.title){const s=v.loraList.find(m=>m.name==t.model_name);s&&(t.title=s.alias)}d.value=="edit"?await I(t):await q(t),(r=i.value)==null||r.close(),_("success")},g=()=>{_("close")};return B({open:(t="add")=>{var e;d.value=t,(e=i.value)==null||e.open()},setFormData:async t=>{for(const e in o)t[e]!=null&&t[e]!=null&&(o[e]=t[e])}}),(t,e)=>{const r=N,s=L,m=S,C=h,w=R,k=U,y=J;return p(),E("div",W,[a(P,{ref_key:"popupRef",ref:i,title:l(A),async:!0,width:"550px",onConfirm:b,onClose:g},{default:n(()=>[a(y,{class:"ls-form",ref_key:"formRef",ref:f,rules:D,model:l(o),"label-width":"90px"},{default:n(()=>[a(s,{label:"\u6A21\u578B\u5C01\u9762",prop:"cover"},{default:n(()=>[a(r,{modelValue:l(o).cover,"onUpdate:modelValue":e[0]||(e[0]=u=>l(o).cover=u),limit:1},null,8,["modelValue"])]),_:1}),a(s,{label:"\u6A21\u578B\u540D\u79F0",prop:"title"},{default:n(()=>[a(m,{class:"ls-input",modelValue:l(o).title,"onUpdate:modelValue":e[1]||(e[1]=u=>l(o).title=u),placeholder:"\u4E0D\u586B\u5199\u5219\u4F7F\u7528\u9ED8\u8BA4\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),a(s,{label:"\u6A21\u578B\u6587\u4EF6",prop:"model_name"},{default:n(()=>[c("div",X,[a(w,{modelValue:l(o).model_name,"onUpdate:modelValue":e[2]||(e[2]=u=>l(o).model_name=u),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B\u6587\u4EF6",class:"w-full"},{default:n(()=>[(p(!0),E(H,null,M(l(v).loraList,(u,x)=>(p(),Q(C,{key:x,label:u.name,value:u.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),a(s,{label:"\u6392\u5E8F",prop:"sort"},{default:n(()=>[c("div",null,[a(m,{class:"ls-input",modelValue:l(o).sort,"onUpdate:modelValue":e[3]||(e[3]=u=>l(o).sort=u)},null,8,["modelValue"]),Y])]),_:1}),a(s,{label:"\u72B6\u6001",prop:"status"},{default:n(()=>[a(k,{modelValue:l(o).status,"onUpdate:modelValue":e[4]||(e[4]=u=>l(o).status=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ne as _};
