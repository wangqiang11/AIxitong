import{P as A}from"./index.c487cb65.js";import{D as S,I as h,J as I,C as M,t as N,F as q}from"./element-plus.6d5d7657.js";import{_ as J}from"./picker.c6906711.js";import{b as O,f as T,h as $}from"./music.45ecdbb0.js";import{d as j,s as y,r as i,o as d,J as g,K as s,T as a,u as l,a as r,R as K,c as z,S as G,a6 as H,n as Q}from"./@vue.7946e41b.js";const W={class:"flex items-center"},X=r("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D\u9762",-1),ue=j({__name:"addPop",emits:["success","close"],setup(Y,{expose:E,emit:V}){const C=V,F=y(),m=i(!1),c=y(),e=i({id:"",cover:"",status:1,sort:"0",url:"",category_id:0}),p=i([]),f=i(),b=async()=>{f.value=await $()},w={music:[{required:!0}],cover:[{required:!0}]},k=async u=>{await Q(),p.value=u,console.log(u)},B=async()=>{try{m.value=!0,e.value.id?await O({...e.value}):await T({...e.value}),C("success")}catch{m.value=!1}};return E({open:async u=>{c.value.open(),u&&(Object.keys(e.value).map(o=>{e.value[o]=u[o]}),e.value.id=u.id),await b()}}),(u,o)=>{const _=J,n=S,v=h,x=I,D=M,L=N,R=q,P=A;return d(),g(P,{ref_key:"popRef",ref:c,title:l(e).id?"\u7F16\u8F91\u97F3\u4E50":"\u65B0\u589E\u97F3\u4E50",width:"600px",async:"",onConfirm:B,onClose:o[5]||(o[5]=t=>u.$emit("close")),"confirm-loading":l(m)},{default:s(()=>[a(R,{"label-width":"90px",ref_key:"formRef",ref:F,model:l(e),rules:w},{default:s(()=>[a(n,{label:"\u97F3\u4E50\u5C01\u9762",prop:"cover"},{default:s(()=>[a(_,{limit:1,modelValue:l(e).cover,"onUpdate:modelValue":o[0]||(o[0]=t=>l(e).cover=t)},null,8,["modelValue"])]),_:1}),a(n,{label:"\u97F3\u4E50",prop:"music"},{default:s(()=>{var t;return[r("div",W,[a(_,{modelValue:l(e).url,"onUpdate:modelValue":o[1]||(o[1]=U=>l(e).url=U),onChange:k,type:"audio",limit:1,"with-name":"",data:{use_type:2}},null,8,["modelValue"]),r("div",null,K((t=l(p)[0])==null?void 0:t.name),1)])]}),_:1}),a(n,{label:"\u6240\u5C5E\u5206\u7C7B"},{default:s(()=>[a(x,{modelValue:l(e).category_id,"onUpdate:modelValue":o[2]||(o[2]=t=>l(e).category_id=t)},{default:s(()=>[a(v,{label:"\u65E0\u5206\u7C7B",value:0}),(d(!0),z(G,null,H(l(f),t=>(d(),g(v,{label:t.name,key:t.id,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"\u6392\u5E8F"},{default:s(()=>[r("div",null,[a(D,{modelValue:l(e).sort,"onUpdate:modelValue":o[3]||(o[3]=t=>l(e).sort=t),class:"w-[320px]"},null,8,["modelValue"]),X])]),_:1}),a(n,{label:"\u72B6\u6001"},{default:s(()=>[a(L,{modelValue:l(e).status,"onUpdate:modelValue":o[4]||(o[4]=t=>l(e).status=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading"])}}});export{ue as _};
