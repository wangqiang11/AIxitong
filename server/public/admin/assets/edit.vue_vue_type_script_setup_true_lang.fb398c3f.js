import{D as M,C as T,I as J,J as z,t as K,F as L}from"./element-plus.6d5d7657.js";import{_ as O}from"./picker.c6906711.js";import{r as Q,s as j,t as G,g as H}from"./ai_square.6d6cae03.js";import{P as W}from"./index.c487cb65.js";import{d as X,s as y,r as Y,b,_ as E,o as p,c as v,T as o,K as s,u,Q as Z,R as $,a as B,S as ee,a6 as ue,J as f,P as w}from"./@vue.7946e41b.js";const le={class:"edit-popup"},ae=B("div",{class:"form-tips"},"\u5982\u4E0D\u9009\u62E9\u5206\u7C7B\uFF0C\u5219\u9ED8\u8BA4\u663E\u793A\u5728\u524D\u53F0\u7684\u3010\u5168\u90E8\u3011\u4E2D",-1),ie=X({__name:"edit",emits:["success","close"],setup(oe,{expose:C,emit:D}){const F=D,g=y(),c=y(),n=Y("add"),k=b(()=>n.value=="edit"?"\u7F16\u8F91\u97F3\u4E50":"\u65B0\u589E\u97F3\u4E50"),l=E({id:"",title:"",lyric:"",audio_url:"",sort:0,is_show:1,category_id:"",avatar:"",nickname:"",image_url:"",duration:"",source:1}),i=E({loading:!0,lists:[]}),x={image_url:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u7247",trigger:["blur"]}]},m=b(()=>l.source==2),S=async()=>{i.loading=!0;try{const t=await H({type:2});i.lists=t,i.loading=!1}catch(t){i.loading=!1,console.log("\u83B7\u53D6\u7ED8\u753B\u5206\u7C7B\u5931\u8D25=>",t)}},U=async()=>{var t,e;await((t=g.value)==null?void 0:t.validate()),n.value=="edit"?await Q(l):await j(l),(e=c.value)==null||e.close(),F("success")},R=()=>{F("close")},h=(t="add",e)=>{var d;n.value=t,(d=c.value)==null||d.open(),S(),e&&q(e)},q=async t=>{try{const e=await G({id:t});V(e)}catch(e){console.log("\u83B7\u53D6\u8BE6\u60C5\u5931\u8D25=>",e)}},V=async t=>{for(const e in l)t[e]!=null&&t[e]!=null&&(l[e]=t[e])};return C({open:h,setFormData:V}),(t,e)=>{const d=O,r=M,_=T,A=J,P=z,N=K,I=L;return p(),v("div",le,[o(W,{ref_key:"popupRef",ref:c,title:u(k),async:!0,width:"550px",onConfirm:U,onClose:R},{default:s(()=>[o(I,{class:"ls-form",ref_key:"formRef",ref:g,rules:x,model:u(l),"label-width":"100px"},{default:s(()=>[o(r,{label:"\u5C01\u9762",prop:"image_url"},{default:s(()=>[o(d,{modelValue:u(l).image_url,"onUpdate:modelValue":e[0]||(e[0]=a=>u(l).image_url=a),disabled:u(m)},null,8,["modelValue","disabled"])]),_:1}),o(r,{label:"\u6B4C\u66F2\u540D\u79F0"},{default:s(()=>[o(_,{class:"w-[380px]",modelValue:u(l).title,"onUpdate:modelValue":e[1]||(e[1]=a=>u(l).title=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",disabled:u(m)},null,8,["modelValue","disabled"])]),_:1}),o(r,{label:"\u6B4C\u8BCD",prop:"lyric"},{default:s(()=>[o(_,{disabled:u(m),class:"w-[380px]",modelValue:u(l).lyric,"onUpdate:modelValue":e[2]||(e[2]=a=>u(l).lyric=a),type:"textarea",autosize:{minRows:4,maxRows:20},placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u63D0\u793A\u8BCD"},null,8,["disabled","modelValue"])]),_:1}),o(r,{label:"\u97F3\u9891",prop:"audio_url"},{default:s(()=>[o(d,{modelValue:u(l).audio_url,"onUpdate:modelValue":e[3]||(e[3]=a=>u(l).audio_url=a),type:"audio",disabled:u(m)},null,8,["modelValue","disabled"])]),_:1}),o(r,{label:"\u97F3\u9891\u65F6\u957F"},{default:s(()=>[Z($(u(l).duration),1)]),_:1}),o(r,{label:"\u6240\u5C5E\u5206\u7C7B",prop:"category_id"},{default:s(()=>[B("div",null,[o(P,{class:"w-[380px]",modelValue:u(l).category_id,"onUpdate:modelValue":e[4]||(e[4]=a=>u(l).category_id=a),placeholder:"\u5168\u90E8"},{default:s(()=>[(p(!0),v(ee,null,ue(u(i).lists,a=>(p(),f(A,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),ae])]),_:1}),u(n)!="edit"||u(l).source==1?(p(),f(r,{key:0,label:"\u7528\u6237\u5934\u50CF",prop:"avatar"},{default:s(()=>[o(d,{modelValue:u(l).avatar,"onUpdate:modelValue":e[5]||(e[5]=a=>u(l).avatar=a)},null,8,["modelValue"])]),_:1})):w("",!0),u(n)!="edit"||u(l).source==1?(p(),f(r,{key:1,label:"\u7528\u6237\u6635\u79F0"},{default:s(()=>[o(_,{disabled:u(m),class:"w-[380px]",modelValue:u(l).nickname,"onUpdate:modelValue":e[6]||(e[6]=a=>u(l).nickname=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"},null,8,["disabled","modelValue"])]),_:1})):w("",!0),o(r,{label:"\u662F\u5426\u663E\u793A",prop:"is_show"},{default:s(()=>[o(N,{modelValue:u(l).is_show,"onUpdate:modelValue":e[7]||(e[7]=a=>u(l).is_show=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ie as _};
