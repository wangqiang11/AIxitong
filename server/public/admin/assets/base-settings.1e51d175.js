import{H as q,C as z,D as H,t as I,K as J,w as A,L}from"./element-plus.6d5d7657.js";import{b as Q}from"./index.fc6caf68.js";import{h as j}from"./@vueuse.927bd09a.js";import{S as G}from"./sortablejs.65032496.js";import{_ as O}from"./package-pop.vue_vue_type_script_setup_true_lang.ad71dbba.js";import{d as W,r as E,s as X,i as Y,n as g,o as f,c as Z,a as r,T as e,K as l,u as s,Q as c,R as ee,J as h,P as te}from"./@vue.7946e41b.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.4744e7a5.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./vue-drag-resize.1871ee6b.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";import"./index.c487cb65.js";const oe={class:"border-b border-solid border-b-br-light"},ue=r("div",{class:"font-medium text-xl mb-4"},"\u57FA\u7840\u4FE1\u606F",-1),le=r("div",{class:"form-tips"}," \u4FEE\u6539\u7B49\u7EA7\u540D\u79F0\uFF0C\u76F8\u5173\u8054\u7684\u7528\u6237\u4E5F\u4F1A\u8DDF\u7740\u8C03\u6574\uFF0C\u5C06\u4F1A\u663E\u793A\u6700\u65B0\u8BBE\u7F6E\u7B49\u7EA7\u540D\u79F0 ",-1),ae={class:"w-80"},ie={class:"w-80"},ne={class:"w-80"},se=r("div",{class:"font-medium text-xl my-4"},"\u4F1A\u5458\u5957\u9910",-1),re={class:"move-icon cursor-move"},We=W({__name:"base-settings",props:{modelValue:{}},emits:["update:modelValue"],setup(D,{emit:w}){const R=D,T=w,{modelValue:u}=j(R,T),V=E(),v=X(),F=E(!1),k=E(-1),C={1:"\u5929",2:"\u4E2A\u6708"},U=async()=>{var a;F.value=!0,await g(),(a=v.value)==null||a.open("add")},S=async(a,t)=>{var n;F.value=!0,k.value=t,await g(),(n=v.value)==null||n.open("edit",a)},x=a=>{u.value.price_list.splice(a,1)},P=({type:a,row:t})=>{if(console.log(a,t),a==="add")u.value.price_list.push(t);else{const n=k.value;u.value.price_list[n]=t}},N=(a,t)=>{console.log(a,t),u.value.price_list.forEach(n=>{n.is_recommend=0}),u.value.price_list[t].is_recommend=1},$=()=>{var t;const a=(t=V.value)==null?void 0:t.$el.querySelector(".el-table__body tbody");G.create(a,{animation:150,handle:".move-icon",onEnd:({newIndex:n,oldIndex:p})=>{var i;console.log(n,p);const m=(i=u.value)==null?void 0:i.price_list,b=m.splice(p,1)[0];m.splice(n,0,b),console.log(m),u.value.price_list=m,console.log(u.value.price_list)}})};return Y(async()=>{await g(),$()}),(a,t)=>{const n=z,p=H,m=I,b=Q,i=J,B=q,y=A,M=L,K=A;return f(),Z("div",null,[r("div",oe,[ue,e(p,{label:"\u7B49\u7EA7\u540D\u79F0",prop:"name"},{default:l(()=>[r("div",null,[e(n,{class:"w-80",modelValue:s(u).name,"onUpdate:modelValue":t[0]||(t[0]=o=>s(u).name=o),placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7\u540D\u79F0",clearable:!0},null,8,["modelValue"]),le])]),_:1}),e(p,{label:"\u7B49\u7EA7\u63CF\u8FF0",prop:"describe"},{default:l(()=>[r("div",ae,[e(n,{modelValue:s(u).describe,"onUpdate:modelValue":t[1]||(t[1]=o=>s(u).describe=o),placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7\u63CF\u8FF0",clearable:!0},null,8,["modelValue"])])]),_:1}),e(p,{label:"\u6392\u5E8F",prop:"sort"},{default:l(()=>[r("div",ie,[e(n,{modelValue:s(u).sort,"onUpdate:modelValue":t[2]||(t[2]=o=>s(u).sort=o),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",clearable:!0},null,8,["modelValue"])])]),_:1}),e(p,{label:"\u662F\u5426\u4E0A\u67B6",prop:"status"},{default:l(()=>[r("div",ne,[e(m,{modelValue:s(u).status,"onUpdate:modelValue":t[3]||(t[3]=o=>s(u).status=o),"inactive-value":0,"active-value":1},null,8,["modelValue"])])]),_:1})]),r("div",null,[se,e(M,{ref_key:"memberTableRef",ref:V,"row-key":"duration",data:s(u).price_list},{default:l(()=>[e(i,{width:"50"},{default:l(()=>[r("div",re,[e(b,{name:"el-icon-Rank"})])]),_:1}),e(i,{label:"\u4F1A\u5458\u65F6\u957F",prop:"duration","min-width":"100"},{default:l(({row:o})=>[c(ee(C[o.duration_type]?o.duration+C[o.duration_type]:"\u6C38\u4E45"),1)]),_:1}),e(i,{label:"\u9500\u552E\u4EF7\u683C",prop:"sell_price","min-width":"100"}),e(i,{label:"\u8D2D\u4E70\u4EBA\u6570",prop:"buy_num","min-width":"100"}),e(i,{label:"\u4F1A\u5458\u6807\u7B7E",prop:"tags","min-width":"100"}),e(i,{label:"\u989D\u5916\u8D60\u9001","min-width":"100"},{default:l(({row:o})=>[o.is_give?(f(),h(B,{key:0,type:"success"},{default:l(()=>[c("\u5F00\u542F")]),_:1})):(f(),h(B,{key:1,type:"danger"},{default:l(()=>[c("\u5173\u95ED")]),_:1}))]),_:1}),e(i,{label:"\u8D60\u9001\u7535\u529B\u503C",prop:"give_balance","min-width":"100"}),e(i,{label:"\u8D60\u9001\u667A\u80FD\u4F53",prop:"give_robot","min-width":"100"}),e(i,{label:"\u662F\u5426\u63A8\u8350","min-width":"100"},{default:l(({row:o,$index:d})=>[e(m,{modelValue:o.is_recommend,"onUpdate:modelValue":_=>o.is_recommend=_,"active-value":1,"inactive-value":0,onChange:_=>N(_,d)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{label:"\u662F\u5426\u4E0A\u67B6","min-width":"100"},{default:l(({row:o})=>[e(m,{modelValue:o.status,"onUpdate:modelValue":d=>o.status=d,"active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"\u64CD\u4F5C","min-width":"120",fixed:"right"},{default:l(({row:o,$index:d})=>[e(y,{type:"primary",link:"",onClick:_=>S(o,d)},{default:l(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(y,{type:"danger",link:"",onClick:_=>x(d)},{default:l(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(K,{type:"primary",class:"mt-4",size:"large",onClick:U},{default:l(()=>[c("\u6DFB\u52A0")]),_:1})]),s(F)?(f(),h(O,{key:0,ref_key:"packagePopRef",ref:v,onSuccess:P,onClose:t[4]||(t[4]=o=>F.value=!1)},null,512)):te("",!0)])}}});export{We as default};
