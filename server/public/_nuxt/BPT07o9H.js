import{_ as B}from"./BUR_EBmg.js";import{E as I}from"./CgvUZmt4.js";import{E as S}from"./B8A6LEAg.js";import{a as V,b as N,_ as $,E as j}from"./C3C96yZa.js";import{E as z}from"./C9K-Xzau.js";/* empty css        *//* empty css        */import{u as A}from"./CfIJWwds.js";import{g as F,d as L}from"./R2n930gq.js";import{useAiPPTStore as q}from"./Dx0GjzY5.js";import{l as D,b as k,j as P,m as U,c as X,M as f,N as _,Z as l,a0 as d,O as t,_ as M,aq as O,X as Z,u as o,a5 as x,y as G,a4 as H,a7 as J}from"./D5LW44Rr.js";import{_ as K}from"./DlAUqK2U.js";import"./v3hwjf8i.js";import"./BYIy1x1Y.js";import"./B3O-Pehw.js";import"./CvgUe-Qn.js";import"./DbnJrD-r.js";const Q={class:"h-full p-4 flex ppt-history"},W={class:"h-full flex flex-col rounded-[15px] bg-body w-[350px] mr-4"},Y={class:"px-[15px] py-[15px]"},ee={class:"flex items-center cursor-pointer"},te={class:"flex-1 min-h-0"},oe={class:"px-4 pt-1"},se=["onClick"],le={class:"absolute right-[10px] top-[10px] w-[24px] h-[24px] text-center leading-[24px] text-[#333] bg-[rgba(255,255,255,0.6)] text-xs font-bold rounded-[50%]"},ne={key:0,class:"flex-1 h-full flex flex-col rounded-[15px] ppt-preview bg-body"},ie={class:"p-4 flex items-center"},ae={class:"font-bold"},re={class:"ml-auto flex items-center"},ce={class:"mx-2"},pe={class:"mx-2"},de={class:"flex-1 min-h-0"},me={class:"p-4 max-w-[1200px] mx-auto min-h-full flex justify-center items-center"},ue={class:"flex items-center justify-center pb-4"},fe=D({__name:"detail",setup(_e){const b=V(),T=N(),v=q(),n=k({preview:[]}),m=P(),g=P([]),r=k(0),c=U({get(){return r.value+1},set(s){r.value=s-1}});X(r,s=>{if(!g.value.length)return;const e=g.value[s],a=e.getBoundingClientRect(),p=m.value.wrapRef.getBoundingClientRect();a.top<p.top&&m.value.setScrollTop(e.offsetTop-4),a.bottom>p.bottom&&m.value.setScrollTop(e.offsetTop-p.height+a.height+4)});const{lockFn:C}=A(async()=>{const{file_url:s}=await L({id:b.query.id}),e=document.createElement("a");e.href=s,e.download=`${n.value.title}.pptx`,e.click()}),w=s=>{c.value+=s};return(async()=>{const[s]=await F({id:b.query.id});s&&s.id&&(n.value=s)})(),(s,e)=>{const a=B,p=I,y=S,h=j,E=z,R=$;return f(),_("div",null,[l(R,{name:"default"},{default:d(()=>[t("div",Q,[t("div",W,[t("div",Y,[t("div",ee,[t("div",{class:"flex bg-body p-[5px] text-bold rounded-[50%] text-primary shadow-light",onClick:e[0]||(e[0]=i=>s.$router.back())},[l(a,{name:"el-icon-Back",size:18})]),e[4]||(e[4]=t("div",{class:"text-xl flex-1 min-w-0 ml-[10px]"}," PPT ",-1))])]),t("div",te,[l(y,{ref_key:"scrollBarRef",ref:m},{default:d(()=>[t("div",oe,[(f(!0),_(M,null,O(o(n).preview,(i,u)=>(f(),_("div",{ref_for:!0,ref_key:"itemsRef",ref:g,key:u,class:Z(["mb-4 flex relative cursor-pointer outline-4 outline outline-[transparent] rounded-[10px] overflow-hidden",{"!outline-primary":o(r)===u}]),onClick:ve=>r.value=u},[l(p,{class:"w-full",src:i},null,8,["src"]),t("div",le,x(u+1),1)],10,se))),128))])]),_:1},512)])]),o(n).preview.length?(f(),_("div",ne,[t("div",ie,[t("span",ae,x(o(n).title),1),t("div",re,[l(h,{onClick:e[1]||(e[1]=i=>w(-1)),link:"",disabled:o(c)===1},{default:d(()=>[l(a,{name:"el-icon-ArrowLeftBold",size:16})]),_:1},8,["disabled"]),t("span",ce,[l(E,{modelValue:o(c),"onUpdate:modelValue":e[2]||(e[2]=i=>G(c)?c.value=i:null),controls:!1,min:1,max:o(n).preview.length,class:"!w-[32px]"},null,8,["modelValue","max"])]),e[5]||(e[5]=t("span",{class:"mx-2"}," /",-1)),t("span",pe,x(o(n).preview.length),1),l(h,{onClick:e[3]||(e[3]=i=>w(1)),link:"",disabled:o(c)===o(n).preview.length},{default:d(()=>[l(a,{name:"el-icon-ArrowRightBold",size:16})]),_:1},8,["disabled"])])]),t("div",de,[l(y,null,{default:d(()=>{var i;return[t("div",me,[l(p,{src:(i=o(n).preview)==null?void 0:i[o(r)]},null,8,["src"])])]}),_:1})]),t("div",ue,[l(h,{size:"large",type:"primary",onClick:o(C)},{default:d(()=>[H(" 导出为PPTX "+x(o(n).pay_status?"":o(v).config.isVipFree?"(会员免费)":o(v).config.price>0?"-"+o(v).config.price+o(T).getTokenUnit:""),1)]),_:1},8,["onClick"])])])):J("",!0)])]),_:1})])}}}),je=K(fe,[["__scopeId","data-v-f34bbcf4"]]);export{je as default};
