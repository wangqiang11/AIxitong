import{E as O,a as A}from"./DYsLegfR.js";import{_ as S}from"./BUR_EBmg.js";import{E as Z}from"./CgvUZmt4.js";import{E as G}from"./B8A6LEAg.js";import{E as H}from"./DXLUFY5i.js";import{l as J,j as Q,b as W,f as b}from"./C3C96yZa.js";/* empty css        *//* empty css        */import{l as X,b as C,r as E,j as Y,F as ee,M as n,N as l,O as t,Z as i,a0 as N,u as p,a3 as te,a7 as d,_ as D,n as v,aa as oe,aq as se,a9 as w,a5 as h}from"./D5LW44Rr.js";import{_ as ae}from"./z_8IKkkb.js";import{_ as ie}from"./CFSnv9zg.js";import{r as $,c as ne}from"./Dl64kDm5.js";import{u as re}from"./DcKIKp8q.js";import{_ as le}from"./DlAUqK2U.js";import"./DqyG3WEP.js";import"./oImEcKgE.js";import"./v3hwjf8i.js";import"./BYIy1x1Y.js";import"./B3O-Pehw.js";import"./EBDLdqoz.js";import"./DU1sy8XN.js";import"./DCTLXrZ8.js";import"./Cczi60Tx.js";import"./Dyhoc4_b.js";import"./D0z3eKdY.js";import"./BvqcBhuh.js";import"./BanEqy-I.js";import"./A_tEgBSR.js";import"./DtUW6dPj.js";import"./BT_wnIjX.js";import"./qIf4bXs6.js";/* empty css        *//* empty css        *//* empty css        */import"./CquxfLG0.js";import"./DZCnEkJy.js";import"./B-LKCL5c.js";/* empty css        */import"./BGdOelZc.js";import"./h98bbEWb.js";import"./DY83oLYV.js";import"./l_nRXyiX.js";import"./Bl82a0u_.js";import"./DP2rzg_V.js";/* empty css        *//* empty css        */const pe={class:"h-full flex flex-col"},ce={class:"px-[20px] py-[16px] mt-[-8px]"},me={class:"flex-1 min-h-0"},de={key:0,class:"flex flex-wrap px-[20px]","infinite-scroll-distance":"50"},fe=["onClick"],ue={class:"flex relative"},_e=["onClick"],xe={class:"ml-1 text-sm"},ge={key:0,class:"kb-btns absolute bottom-0 left-0 w-full flex bg-[rgba(0,0,0,0.4)] py-[6px] text-white"},be=["onClick"],ve=["onClick"],we={class:"px-[15px] py-[12px]"},he={class:"text-[18px] truncate"},ke={class:"flex items-center mt-[10px]"},ye={class:"text-info flex-1 min-w-0 truncate"},Se={key:1},Ce=X({__name:"kb",setup(Ee){const L=J(),r=Q(),I=re(),z=W(),c=C({type:"0"});E({show:!1,num:0,kbId:0,isOwner:!1});const m=C(!1),f=Y(),e=E({pageNo:1,count:0,pageSize:15,lists:[]}),R=async()=>{e.pageNo=1,await v(),await u()},u=async()=>{const o=await $({...c.value,page_no:e.pageNo,page_size:e.pageSize});e.count=o.count,e.pageNo===1&&(e.lists=[]),e.lists.push(...o.lists)},k=async()=>{try{const o=await $({...c.value,page_no:1,page_size:e.pageNo*e.pageSize});e.count=o.count,e.lists=o.lists}catch(o){console.error(o)}},V=()=>{r.isLogin&&e.count>=e.pageNo*e.pageSize&&(e.pageNo++,u())},j=async()=>{if(r.userInfo.kb_num<=0){z.getIsShowRecharge?(await b.confirm("知识库数量已用完，请前往充值"),I.toggleShow(!0)):b.msgError("知识库数量已用完。请联系客服增加");return}if(!r.isLogin)return r.toggleShowLogin();m.value=!0,await v(),f.value.open()},B=async o=>{m.value=!0,await v(),f.value.open({id:o})},P=async(o,s)=>{await b.confirm(`确认删除 ${s} 吗？`),await ne({id:o}),k()},y=(o,s)=>{L.push(`/application/kb/detail?id=${o}&type=${s}`)};return ee(()=>{u()}),(o,s)=>{const _=A,T=O,M=S,U=Z,x=S,q=G,F=H;return n(),l(D,null,[t("div",pe,[t("div",ce,[i(T,{modelValue:p(c).type,"onUpdate:modelValue":s[0]||(s[0]=a=>p(c).type=a),class:"demo-tabs",onTabChange:R},{default:N(()=>[i(_,{label:"全部知识库",name:"0"}),i(_,{label:"我的知识库",name:"1"}),i(_,{label:"共享给我",name:"2"})]),_:1},8,["modelValue"])]),t("div",me,[i(q,null,{default:N(()=>[p(r).isLogin?oe((n(),l("div",de,[t("div",{class:"sm:w-[200px] w-full bg-body rounded-[12px] overflow-hidden cursor-pointer mr-[20px] flex-none mb-[20px] flex flex-col items-center justify-center min-h-[150px]",onClick:j},[i(M,{name:"el-icon-Plus",size:24}),s[2]||(s[2]=t("div",{class:"mt-[10px]"},"新增知识库",-1))]),(n(!0),l(D,null,se(p(e).lists,(a,K)=>(n(),l("div",{key:K,class:"kb-item sm:w-[200px] w-full bg-body rounded-[12px] overflow-hidden cursor-pointer mr-[20px] flex-none mb-[20px]",onClick:g=>y(a.id,"dataStudy")},[t("div",ue,[i(U,{src:a.image,class:"w-full h-[160px]",fit:"cover"},null,8,["src"]),t("div",{class:"bg-[rgba(0,0,0,0.4)] text-white absolute px-1 right-[10px] top-[10px] rounded flex items-center",onClick:w(g=>y(a.id,"teamData"),["stop"])},[i(x,{name:"el-icon-User"}),t("span",xe,h(a.team_people),1)],8,_e),a.is_super?(n(),l("div",ge,[t("div",{class:"flex flex-1 items-center justify-center",onClick:w(g=>B(a.id),["stop"])},[i(x,{name:"el-icon-Edit"}),s[3]||(s[3]=t("span",{class:"ml-1"}," 编辑 ",-1))],8,be),t("div",{class:"flex flex-1 items-center justify-center",onClick:w(g=>P(a.id,a.name),["stop"])},[i(x,{name:"el-icon-Delete"}),s[4]||(s[4]=t("span",{class:"ml-1"}," 删除 ",-1))],8,ve)])):d("",!0)]),t("div",we,[t("div",he,h(a.name),1),t("div",ke,[t("div",ye,h(a.intro||"这个知识库还没介绍呢～"),1)])])],8,fe))),128))])),[[F,V]]):d("",!0),p(r).isLogin?d("",!0):(n(),l("div",Se,[i(ie)]))]),_:1})])]),p(m)?(n(),te(ae,{key:0,ref_key:"popRef",ref:f,onSuccess:s[1]||(s[1]=()=>{m.value=!1,k()})},null,512)):d("",!0)],64)}}}),vt=le(Ce,[["__scopeId","data-v-6173a1b1"]]);export{vt as default};
