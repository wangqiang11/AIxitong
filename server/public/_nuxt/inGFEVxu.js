import{E as O}from"./CRAogC4s.js";import{o as k,p as T}from"./C3C96yZa.js";import{E as j}from"./B8A6LEAg.js";import"./DP2rzg_V.js";/* empty css        *//* empty css        */import{u as y,T as m}from"./DokTaXLy.js";import{_ as C}from"./BgY7KURb.js";import{c as x}from"./Bl82a0u_.js";import{l as z,r as E,m as A,c as _,w as F,k as N,M as w,N as I,O as u,Z as f,a0 as d,u as c}from"./D5LW44Rr.js";const U={class:"avatar-select h-full flex flex-col"},P={class:"flex-1 min-h-0"},V={class:"h-full"},h={class:"p-main"},J=z({__name:"captions",setup(g){const n=y(),o=E({status:0,fontSize:64,fontFamily:"Alibaba PuHuiTi",fill:"#ffffff",stroke:""}),p=A(()=>{var t;return((t=n.activeObject)==null?void 0:t.customType)===m.CAPTIONS}),b=t=>{var e,s;if(t)n.addText("此处是字幕",m.CAPTIONS,o);else{const i=(e=n.canvas)==null?void 0:e.getObjects(),r=i==null?void 0:i.find(l=>l.customType===m.CAPTIONS);(s=n.canvas)==null||s.remove(r)}};_(()=>n.activeObject,t=>{var e;if(p.value)for(const s in o)o[s]=(e=t==null?void 0:t.data)==null?void 0:e[s]},{immediate:!0});const S=["fontSize","fontFamily","fill","stroke"];_(()=>o,t=>{var s,i,r;if(!p.value)return;for(const l in o)if(S.includes(l)){let a=t[l];l==="fontSize"&&(a=n.calcFontSize(a)),(s=n.activeObject)==null||s.set(l,a)}const e=x(o);(i=n.activeObject)==null||i.set("data",e),(r=n.canvas)==null||r.renderAll()},{deep:!0});const v=()=>{var s;const t=(s=n.canvas)==null?void 0:s.getObjects();(t==null?void 0:t.find(i=>i.customType===m.CAPTIONS))?o.status=1:o.status=0};return F(()=>{var t;n.canvas&&((t=n.canvas)==null||t.on("object:removed",v))}),N(()=>{var t;(t=n.canvas)==null||t.off("object:removed",v)}),(t,e)=>{const s=O,i=k,r=T,l=j;return w(),I("div",U,[u("div",P,[u("div",V,[f(l,null,{default:d(()=>[u("div",h,[f(r,null,{default:d(()=>[f(i,{label:"字幕显示"},{default:d(()=>[f(s,{modelValue:c(o).status,"onUpdate:modelValue":e[0]||(e[0]=a=>c(o).status=a),"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"开启","inactive-text":"关闭",onChange:b},null,8,["modelValue"])]),_:1}),f(C,{font:c(o).fontFamily,"onUpdate:font":e[1]||(e[1]=a=>c(o).fontFamily=a),"font-size":c(o).fontSize,"onUpdate:fontSize":e[2]||(e[2]=a=>c(o).fontSize=a),"font-color":c(o).fill,"onUpdate:fontColor":e[3]||(e[3]=a=>c(o).fill=a),"stroke-color":c(o).stroke,"onUpdate:strokeColor":e[4]||(e[4]=a=>c(o).stroke=a)},null,8,["font","font-size","font-color","stroke-color"])]),_:1})])]),_:1})])])])}}});export{J as _};
