import{E as Z,a as H}from"./D0z3eKdY.js";import{_ as J}from"./BUR_EBmg.js";import{E as K}from"./B8A6LEAg.js";import{E as W,a as Y}from"./BT_wnIjX.js";import{h as D,b as I,bV as ee}from"./C3C96yZa.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        */import{P as te}from"./CquxfLG0.js";import{u as se}from"./BGdOelZc.js";import{l as le,j as oe,b as ae,r as ne,m as N,c as ie,M as s,N as l,a3 as S,a0 as r,_ as C,aq as w,u as o,O as n,a5 as v,y as j,a7 as y,X as V,Z as h}from"./D5LW44Rr.js";import{_ as de}from"./DlAUqK2U.js";const re={class:"flex items-center"},ce={class:"my-1"},pe={class:"leading-6"},ue={class:"line-clamp-1 flex-1"},me={key:0},fe={key:1,class:"text-[#a8abb2]"},_e={key:2},xe={key:3},ve={class:"flex-none ml-2 flex items-center"},ye={class:"model-container"},he={class:"flex items-center h-[46px] py-2"},be=["src"],ge={class:"mx-2 leading-[24px] mt-[2px] font-medium"},ke={key:1,class:"bg-[#E3FFF2] text-[#23B571] px-[5px] py-[2px] leading-[20px] rounded-[5px]"},Me=["onClick"],Ce={class:"flex items-center"},we={class:"mr-2"},Le={key:0,class:"text-tx-placeholder"},Ee={key:1,class:"text-tx-placeholder"},Ne={key:0,class:"flex items-center"},Se={key:1,class:"flex items-center"},Ve=le({__name:"index",props:{id:{type:[String,Number],default:""},sub_id:{type:[String,Number],default:""},setDefault:{type:Boolean,default:!0},type:{type:String,default:"chatModels"},disabled:{type:Boolean,default:!1}},emits:["update:id","update:sub_id","update:modelConfig","update:config"],setup(d,{emit:R}){const b=R,x=d,m=D(x,"id",b),c=D(x,"sub_id",b),A=I(),L=oe(),g=ae(-1),a=ne({modelList:[]}),U=N(()=>a.modelList.filter((e,t)=>t%2===0)),T=N(()=>a.modelList.filter((e,t)=>t%2!==0)),f=N(()=>x.type=="chatModels"?a.modelList.flatMap(e=>e.models).find(e=>e.id===c.value)||{}:x.type=="vlModels"?a.modelList.flatMap(e=>e.models).find(e=>e.id===c.value)||{}:a.modelList.find(e=>e.id===m.value)||{});ie(()=>f.value,e=>{var p,k;b("update:modelConfig",e);const t=((k=(p=a.modelList.find(M=>M.id===m.value))==null?void 0:p.configs)==null?void 0:k[0])||{};b("update:configs",t)});const{suspense:q}=se(["modelLists"],{queryFn:ee,cacheTime:1e3}),z=async()=>{try{const{data:e}=await q();a.modelList=e[x.type],x.setDefault&&O()}catch(e){console.log("获取聊天模型数据错误=>",e)}},O=()=>{const e=a.modelList.findIndex(p=>p.is_default)||0,t=a.modelList[e].models[0];t&&(m.value=a.modelList[e].id,c.value=t.id,g.value=e)},B=(e,t)=>e===0?t*2:t*2+1,P=(e,t)=>a.modelList[B(e,t)].models.some(p=>p.id===c.value),G=(e,t)=>{m.value=e,c.value=t,L.value.close()};return z(),(e,t)=>{const p=Z,k=H,M=J,$=K,Q=W,X=Y;return s(),l("div",re,[d.type==="vectorModels"||d.type==="rankingModels"?(s(),S(k,{key:0,class:"flex-1",modelValue:o(m),"onUpdate:modelValue":t[0]||(t[0]=i=>j(m)?m.value=i:null),filterable:"",disabled:d.disabled},{default:r(()=>[(s(!0),l(C,null,w(o(a).modelList,i=>(s(),S(p,{class:"!h-fit",value:i.id,key:i.name,label:i.alias},{default:r(()=>[n("div",ce,[n("div",pe,v(i.alias),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","disabled"])):y("",!0),d.type==="chatModels"||d.type==="vlModels"?(s(),l("div",{key:1,class:V(["select-input flex items-center justify-between flex-1 cursor-pointer rounded-[8px] w-[266px] h-[32px] px-[15px]",[o(c)?"":"text-tx-placeholder",d.disabled?"text-tx-placeholder cursor-no-drop bg-[--el-disabled-bg-color]":""]]),onClick:t[1]||(t[1]=i=>o(L).open())},[n("div",ue,[o(f).alias?(s(),l("span",me,v(o(f).alias),1)):(s(),l("span",fe,"请选择")),o(f).alias&&o(f).price=="0"?(s(),l("span",_e," (免费) ")):o(f).alias?(s(),l("span",xe," ("+v(`消耗${o(f).price}${o(A).getTokenUnit}/1000字符`)+") ",1)):y("",!0)]),n("div",ve,[h(M,{name:"el-icon-ArrowDown"})])],2)):y("",!0),d.type==="chatModels"||d.type==="vlModels"?(s(),S(te,{key:2,ref_key:"popupRef",ref:L,width:"780px",title:"模型选择",customClass:"!rounded-[15px]"},{footer:r(()=>t[3]||(t[3]=[n("div",null,null,-1)])),default:r(()=>[h($,{height:"50vh","max-height":"70vh"},{default:r(()=>[n("div",ye,[h(X,{"active-name":o(g),"onUpdate:activeName":t[2]||(t[2]=i=>j(g)?g.value=i:null),class:"flex flex-wrap justify-between",accordion:""},{default:r(()=>[(s(!0),l(C,null,w([o(U),o(T)],(i,E)=>(s(),l("div",{key:E},[(s(!0),l(C,null,w(i,(_,F)=>(s(),l("div",{key:_.id,class:"w-[350px] mt-[15px]"},[h(Q,{class:V(["bg-[#f8f8f8] dark:bg-[#0d0e10] border border-solid border-[transparent]",{"el-collapse-item--active":P(E,F)}]),name:B(E,F)},{title:r(()=>[n("div",null,[n("div",he,[_.logo?(s(),l("img",{key:0,src:_.logo,class:"w-[30px] h-[30px]",alt:"模型logo"},null,8,be)):y("",!0),n("span",ge,v(_.name),1),_.is_free?(s(),l("span",ke," 会员免费 ")):y("",!0)])])]),default:r(()=>[h($,{height:"100%","max-height":"250px"},{default:r(()=>[(s(!0),l(C,null,w(_.models,u=>(s(),l("div",{key:u.id,class:V(["flex justify-between mb-[14px] px-[15px] cursor-pointer hover:text-primary",{"text-primary":o(c)===u.id}]),onClick:Ae=>G(_.id,u.id)},[n("div",Ce,[n("span",we,v(u.alias||"请选择"),1),u.alias&&u.price=="0"?(s(),l("span",Le," (免费) ")):(s(),l("span",Ee," ("+v(`消耗${u.price}${o(A).getTokenUnit}/1000字符`)+") ",1))]),o(c)===u.id?(s(),l("div",Ne,[h(M,{name:"el-icon-CircleCheck",size:"20"})])):(s(),l("div",Se,t[4]||(t[4]=[n("div",{class:"w-[18px] h-[18px] rounded-full border border-solid border-[#cacbd3]"},null,-1)])))],10,Me))),128))]),_:2},1024)]),_:2},1032,["class","name"])]))),128))]))),128))]),_:1},8,["active-name"])])]),_:1})]),_:1},512)):y("",!0)])}}}),Qe=de(Ve,[["__scopeId","data-v-3bc3f075"]]);export{Qe as _};
