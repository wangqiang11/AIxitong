import{P as A,_ as T,a as W,p as I,b as K}from"./BJdn-ONn.js";import{j as $,b as q,l as M,d2 as O,d3 as X,d4 as f,E as j,f as y,D as H}from"./C3C96yZa.js";import{u as Z}from"./CfIJWwds.js";import{g as G,r as J}from"./5SHXd8at.js";import{l as Q,b as m,m as b,F as Y,M as o,N as n,O as e,a5 as r,u as a,_ as k,aq as w,Z as p,y as ee,a0 as te,a4 as C,X as F,a7 as E}from"./D5LW44Rr.js";import{_ as se}from"./DlAUqK2U.js";import"./CgvUZmt4.js";import"./v3hwjf8i.js";import"./BYIy1x1Y.js";import"./B3O-Pehw.js";import"./BUR_EBmg.js";/* empty css        */import"./BRXH5o_9.js";const ae={class:"bg-white"},oe={class:"text-tx-primary sm:py-[40px] sm:px-[60px] p-[20px]"},ne={class:"py-4 px-5 rounded-[16px] bg-[#FFF5ED] mb-5"},re={class:"flex mt-4"},ie={class:"flex-1"},le={class:"flex-1"},ce={class:"recharge-lists flex flex-wrap"},de=["onClick"],pe={key:0,class:"absolute top-[-1px] left-[-1px] bg-[#FF7021] px-[12px] py-[2px] text-white rounded-tl-[15px] rounded-br-[15px]"},ue={class:"text-xl font-medium mb-[10px] line-clamp-1"},_e={class:"border-t border-solid border-br-light pt-[10px]"},me={class:"text-tx-secondary mr-auto"},xe={class:"relative"},ge={key:0},ve={key:1},fe={key:2,class:"absolute right-0 top-0 translate-y-[-100%] translate-x-[100%] bg-[#FF7021] px-[8px] py-[1px] rounded-r-full rounded-tl-full whitespace-nowrap text-white text-xs"},ye={class:"mt-[30px]"},he={class:"mt-[20px] flex"},be={class:"ml-[20px]"},ke=Q({__name:"recharge",setup(we){const N=$(),x=q(),U=M(),u=m([]),g=m({balance:"",robot_num:"",video_num:""}),z=b(()=>[{key:"chat_balance",giveKey:"give_chat_balance",label:`${x.getTokenUnit}数量`,unit:x.getTokenUnit},{key:"robot_number",giveKey:"give_robot_number",label:"智能体个数",unit:"个"}]),_=m(0),D=async()=>{const i=await G();u.value=i.lists,g.value=i.extend;const t=u.value.findIndex(d=>d.is_recommend);_.value=t===-1?0:t},S=H(),l=m(A.WECHAT),v=b(()=>u.value[_.value]||{}),{lockFn:V,isLock:B}=Z(async()=>{v.value.id||y.msgError("请选择充值套餐"),l.value||y.msgError("请选择支付方式");const i=await J({package_id:v.value.id,pay_way:l.value}),t=await I({...i,pay_way:l.value,redirect:`${S.app.baseURL}user/record`,code:f.getAuthData().code});await K.run({payWay:l.value,orderId:i.order_id,from:i.from,config:t.config}),await y.alertSuccess("支付成功"),N.getUser(),U.push({path:"/user/record",query:{id:i.order_id}})});return D(),Y(async()=>{O()==X.WEIXIN_OA&&f.getAuthData().code==""&&await f.getUrl()}),(i,t)=>{const d=T,L=W,P=j;return o(),n("div",ae,[e("div",oe,[e("div",ne,[t[1]||(t[1]=e("div",{class:"font-medium"},"我的账户",-1)),e("div",re,[e("div",ie," 剩余"+r(a(x).getTokenUnit)+"："+r(a(g).balance),1),e("div",le," 智能体数量："+r(a(g).robot_num),1)])]),e("div",ce,[(o(!0),n(k,null,w(a(u),(s,h)=>(o(),n("div",{key:s.id,class:F(["recharge-item relative",{active:h===a(_)}]),onClick:c=>_.value=h},[s.tags!=""?(o(),n("div",pe,r(s.tags),1)):E("",!0),e("div",null,[e("div",null,[e("div",ue,r(s.name),1),p(d,{content:s.sell_price,"main-size":"28px","minor-size":"16px"},null,8,["content"]),e("div",{class:F([{"opacity-0":s.line_price==="0.00"},"mb-[20px]"])},[p(d,{prefix:"原价",content:s.line_price,"main-size":"14px","line-through":"",color:"#999"},null,8,["content"])],2)]),e("div",_e,[(o(!0),n(k,null,w(a(z),(c,R)=>(o(),n("div",{class:"text-sm flex py-[8px]",key:R},[e("span",me,r(c.label),1),e("div",xe,[s[c.key]>0?(o(),n("span",ge,r(Number(s[c.key]))+r(c.unit),1)):(o(),n("span",ve,"-")),s.is_give&&Number(s[c.giveKey])?(o(),n("div",fe," 赠"+r(s[c.giveKey]),1)):E("",!0)])]))),128))])])],10,de))),128))]),e("div",ye,[t[2]||(t[2]=e("div",{class:"text-lg mb-[5px]"},"支付方式",-1)),p(L,{modelValue:a(l),"onUpdate:modelValue":t[0]||(t[0]=s=>ee(l)?l.value=s:null),from:"recharge"},null,8,["modelValue"])]),e("div",he,[p(P,{type:"primary",size:"large",loading:a(B),onClick:a(V),style:{background:`linear-gradient(
                            90deg,
                            #ffcb58 0%,
                            #f7630e 100%
                        )`,border:"none",padding:"0 54px"}},{default:te(()=>t[3]||(t[3]=[C(" 立即购买 ")])),_:1},8,["loading","onClick"]),e("div",be,[t[4]||(t[4]=C(" 实付金额： ")),p(d,{content:a(v).sell_price,"main-size":"24px","minor-size":"14px",color:"#FF7021"},null,8,["content"])])])])])}}}),Ae=se(ke,[["__scopeId","data-v-d8fdce6d"]]);export{Ae as default};
