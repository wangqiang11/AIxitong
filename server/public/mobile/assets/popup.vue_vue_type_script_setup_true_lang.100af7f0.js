import{_ as e}from"./u-button.97a3d07f.js";import{d as l,s as a,C as t,x as u,r as s,a as o,o as d,c as r,w as m,b as n,f as i,t as p,e as c,k as f,F as x,g as _,m as h,j as y,l as V,P as k,D as v}from"./index-d6d2a33a.js";import{_ as b}from"./u-popup.21776ef7.js";import{a as C}from"./index.3dd6f2ef.js";import{_ as g}from"./u-icon.992584aa.js";import{_ as j}from"./u-input.e3cf3beb.js";const w=l({__name:"item",props:{modelValue:null,name:null,itemId:null},emits:["update:modelValue","edit","delete"],setup(e,{emit:l}){const V=e,k=a(""),v=a(!1),b=t({get:()=>V.modelValue,set(e){l("update:modelValue",e)}}),C=t((()=>b.value===V.itemId)),w=()=>{v.value=!1,l("edit",k.value)};return u((()=>V.modelValue),(()=>{v.value=!1})),u((()=>V.name),(e=>{k.value=e}),{immediate:!0}),(a,t)=>{const u=s(o("u-icon"),g),V=s(o("u-input"),j),D=y;return d(),r(D,{class:h(["px-[20rpx] h-[80rpx] flex items-center rounded-[8rpx] mb-[20rpx] cursor-pointer",{" bg-page":c(C)}]),onClick:t[4]||(t[4]=l=>b.value=e.itemId)},{default:m((()=>[n(u,{name:"chat"}),n(D,{class:"ml-[20rpx] flex-1 min-w-0"},{default:m((()=>[v.value?(d(),r(V,{key:0,height:"50","custom-style":{fontSize:"26rpx"},modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),border:""},null,8,["modelValue"])):(d(),r(D,{key:1,class:"line-clamp-1"},{default:m((()=>[i(p(e.name),1)])),_:1}))])),_:1}),c(C)?(d(),f(x,{key:0},[v.value?(d(),f(x,{key:0},[n(D,{class:"cursor-pointer mx-[12rpx] flex h-full",onClick:w},{default:m((()=>[n(u,{name:"checkbox-mark"})])),_:1}),n(D,{class:"cursor-pointer flex h-full",onClick:t[1]||(t[1]=e=>v.value=!1)},{default:m((()=>[n(u,{name:"close"})])),_:1})],64)):(d(),f(x,{key:1},[n(D,{class:"cursor-pointer mr-[12rpx] flex h-full",onClick:t[2]||(t[2]=e=>v.value=!0)},{default:m((()=>[n(u,{name:"edit-pen"})])),_:1}),n(D,{class:"cursor-pointer flex h-full",onClick:t[3]||(t[3]=e=>l("delete"))},{default:m((()=>[n(u,{name:"trash"})])),_:1})],64))],64)):_("v-if",!0)])),_:1},8,["class"])}}}),D=l({__name:"popup",props:{lists:{type:Array,default:()=>[]},show:{type:Boolean},modelValue:{type:[Number,String],required:!0}},emits:["update:modelValue","add","edit","delete","clear"],setup(l,{emit:a}){const t=l,{show:u,modelValue:p}=C(t,a);return(t,_)=>{const h=s(o("u-button"),e),C=y,g=v,j=s(o("u-popup"),b);return d(),r(j,{modelValue:c(u),"onUpdate:modelValue":_[3]||(_[3]=e=>k(u)?u.value=e:null),mode:"left",width:"480rpx","safe-area-inset-bottom":""},{default:m((()=>[n(C,{class:"flex flex-col h-full relative z-[9999]"},{default:m((()=>[n(C,{class:"px-[20rpx] py-[20rpx]"},{default:m((()=>[n(h,{type:"primary","custom-style":{width:"100%"},onClick:_[0]||(_[0]=e=>a("add"))},{default:m((()=>[i(" + 新建会话 ")])),_:1})])),_:1}),n(C,{class:"flex-1 min-h-0"},{default:m((()=>[n(g,{"scroll-y":"",class:"h-full"},{default:m((()=>[n(C,{class:"px-[20rpx]"},{default:m((()=>[(d(!0),f(x,null,V(l.lists,(e=>(d(),r(C,{key:e.id},{default:m((()=>[n(w,{modelValue:c(p),"onUpdate:modelValue":_[1]||(_[1]=e=>k(p)?p.value=e:null),"item-id":e.id,name:e.name,onEdit:l=>a("edit",{id:e.id,name:l}),onDelete:l=>a("delete",e.id)},null,8,["modelValue","item-id","name","onEdit","onDelete"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),n(C,{class:"px-[20rpx] py-[20rpx]"},{default:m((()=>[n(h,{"custom-style":{width:"100%"},onClick:_[2]||(_[2]=e=>a("clear"))},{default:m((()=>[i(" 删除所有会话 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}});export{D as _};
