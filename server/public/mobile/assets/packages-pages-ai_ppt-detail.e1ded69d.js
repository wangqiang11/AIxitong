import{_ as e}from"./u-image.9574760c.js";import{d as a,u as l,s,o as t,c as o,w as r,b as i,k as u,l as n,F as d,e as p,f as c,t as f,g as m,ae as x,r as _,a as g,j as b,D as w,a$ as h}from"./index-d6d2a33a.js";import{_ as y}from"./u-icon.992584aa.js";import{_ as v}from"./u-button.97a3d07f.js";import{F as j}from"./floating-menu.85d77f2f.js";import{_ as k}from"./u-popup.21776ef7.js";import{u as P,d as C,e as F}from"./aiPPT.8ab1aaff.js";import{u as T}from"./useCopy.4954d67d.js";import{u as V}from"./useLockFn.3b1f86f9.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./isString.6d1f126a.js";const I=q(a({__name:"detail",setup(a){const q=x(),{copy:I}=T(),L=l(),U=P();U.getPPTConfig();const X=s(!1),$=s({preview:[]}),z=async()=>{const{file_url:e}=await C({id:q.query.id});await I(e),X.value=!1},{lockFn:D,isLock:E}=V((async()=>{if(h())X.value=!0;else{const{file_url:e}=await C({id:q.query.id}),a=document.createElement("a");a.href=e,a.download=`${$.value.title}.pptx`,a.click()}}));return(async()=>{const[e]=await F({id:q.query.id});e&&e.id&&($.value=e)})(),(a,l)=>{const s=_(g("u-image"),e),x=b,h=w,P=_(g("u-icon"),y),C=_(g("u-button"),v),F=_(g("floating-menu"),j),T=_(g("u-popup"),k);return t(),o(x,{class:"ppt-detail flex flex-col min-h-0 h-full"},{default:r((()=>[i(x,{class:"flex flex-col min-h-0 h-full"},{default:r((()=>[i(h,{class:"h-full p-3 box-border","scroll-y":!0},{default:r((()=>[i(x,{class:"pt-1 bg-white rounded-xl"},{default:r((()=>[(t(!0),u(d,null,n($.value.preview,((e,a)=>(t(),o(x,{key:a,class:"mb-4 flex relative cursor-pointer outline-4 outline outline-[transparent] rounded-[10px] overflow-hidden"},{default:r((()=>[i(x,{class:"flex-1"},{default:r((()=>[i(s,{width:"100%",height:"400rpx",src:e},null,8,["src"])])),_:2},1024),i(x,{class:"absolute right-[10px] top-[10px] w-[24px] h-[24px] text-center leading-[24px] text-[#333] bg-[rgba(255,255,255,0.6)] text-xs font-bold rounded-[50%]"},{default:r((()=>[c(f(a+1),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),i(x,{class:"footer flex items-center"},{default:r((()=>[i(x,{class:"w-full"},{default:r((()=>[i(C,{type:"primary",class:"w-full",loading:p(E),onClick:p(D)},{default:r((()=>[c(" 导出为PPTX "+f($.value.pay_status?"":p(U).config.isVipFree?"(会员免费)":p(U).config.price>0?"-"+p(U).config.price+p(L).getTokenUnit:"")+" ",1),i(P,{name:"download",size:"30"})])),_:1},8,["loading","onClick"])])),_:1})])),_:1}),m("    悬浮菜单    "),i(F),i(T,{modelValue:X.value,"onUpdate:modelValue":l[0]||(l[0]=e=>X.value=e),mode:"center","border-radius":"15",closeable:""},{default:r((()=>[i(x,{class:"w-[650rpx] p-[40rpx]"},{default:r((()=>[i(x,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:r((()=>[c(" 下载PPTX ")])),_:1}),i(x,{class:"mb-[40rpx]"},{default:r((()=>[c(" 当前环境不支持下载，请复制链接到浏览器打开下载 ")])),_:1}),i(C,{type:"primary",shape:"circle",onClick:z},{default:r((()=>[c(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-d7ea278f"]]);export{I as default};
