var e,l;import{_ as a}from"./page-meta.d751427a.js";import{o as t,c as u,w as s,b as r,n as o,bZ as n,j as i,J as c,cD as d,s as p,ay as A,a_ as m,d as f,A as g,C as x,x as v,cs as y,k as h,F as b,l as k,f as C,t as V,e as S,m as N,g as T,ae as w,z as q,a$ as R,r as j,a as I,i as E,q as H,h as U,D as Z,S as z}from"./index-d6d2a33a.js";import{m as J,a as P}from"./mixin.91a2f735.js";import{_ as X}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as F}from"./u-icon.992584aa.js";import{F as D}from"./floating-menu.85d77f2f.js";import{_ as Y}from"./u-button.97a3d07f.js";import{_ as B}from"./u-popup.21776ef7.js";import{b as K}from"./music.d5e913c6.js";import{e as M,f as L}from"./square.95eaea5a.js";import{a as O}from"./download.954a43dc.js";import{u as _}from"./useCopy.4954d67d.js";const W=X({name:"uv-slider",mixins:[J,P,{props:{value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},activeColor:{type:String,default:"#2979ff"},backgroundColor:{type:String,default:"#c0c4cc"},blockSize:{type:[Number,String],default:18},blockColor:{type:String,default:"#ffffff"},disabled:{type:Boolean,default:!1},showValue:{type:Boolean,default:!1},...null==(l=null==(e=uni.$uv)?void 0:e.props)?void 0:l.slider}}],computed:{sliderValue(){return this.value||this.modelValue}},methods:{changingHandler(e){const{value:l}=e.detail;this.$emit("input",l),this.$emit("update:modelValue",l),this.$emit("changing",l)},changeHandler(e){const{value:l}=e.detail;this.$emit("input",l),this.$emit("update:modelValue",l),this.$emit("change",l)}}},[["render",function(e,l,a,c,d,p){const A=n,m=i;return t(),u(m,{class:"uv-slider",style:o([e.$uv.addStyle(e.customStyle)])},{default:s((()=>[r(A,{min:e.min,max:e.max,step:e.step,value:p.sliderValue,activeColor:e.activeColor,backgroundColor:e.backgroundColor,blockSize:e.$uv.getPx(e.blockSize),blockColor:e.blockColor,showValue:e.showValue,disabled:e.disabled,onChanging:p.changingHandler,onChange:p.changeHandler},null,8,["min","max","step","value","activeColor","backgroundColor","blockSize","blockColor","showValue","disabled","onChanging","onChange"])])),_:1},8,["style"])}]]),G=()=>{const e=c(d()),l=p(!1),a=p(0),t=p(0),u=p(0);e.value.obeyMuteSwitch=!1;const s=()=>{n(),l.value=!0},r=()=>{l.value=!1,clearTimeout(u.value)},o=()=>{l.value=!1,clearTimeout(u.value)},n=()=>{a.value=e.value.duration,t.value=e.value.currentTime},i=()=>{var l;null==(l=e.value)||l.pause()};return A((()=>{e.value.onPlay(s),e.value.onEnded(r),e.value.onError(o),e.value.onStop(r),e.value.onPause(r),e.value.onTimeUpdate(n),e.value.onSeeking(n)})),m((()=>{var a,t,c,d,p,A,m,f,g,x,v,y,h,b;l.value&&i(),e.value&&(null==(t=(a=e.value).onPlay)||t.call(a,s),null==(d=(c=e.value).onEnded)||d.call(c,r),null==(A=(p=e.value).onError)||A.call(p,o),null==(f=(m=e.value).onStop)||f.call(m,r),null==(x=(g=e.value).onPause)||x.call(g,r),null==(y=(v=e.value).onTimeUpdate)||y.call(v,n),null==(b=(h=e.value).onSeeking)||b.call(h,n),clearTimeout(u.value))})),{pause:i,play:async()=>{e.value.onCanplay((()=>{console.log(e.value.paused),e.value.play()})),e.value.play()},duration:a,currentTime:t,isPlaying:l,setUrl:l=>{e.value.src=l},seek:l=>{var a;null==(a=e.value)||a.seek(l)}}},Q=X(f({__name:"music_player",setup(e){const{copy:l}=_(),o=w(),n=q(),c=g(),d=p([]),m=["default","lyric"],f=p(0),J=new Map,P=p(-1),X=p(!1),Q=p(""),{play:$,duration:ee,currentTime:le,seek:ae,isPlaying:te,pause:ue,setUrl:se}=G(),re=()=>{te.value?ue():$()},oe=e=>{let l=P.value+e;l<=0&&(l=0),l>=d.value.length-1&&(l=d.value.length-1),P.value=l},ne=async()=>{await l(Q.value),X.value=!1},ie=e=>{ae(e)},ce=e=>{let l=parseInt(String(e/60)),a=Math.round(e%60)+"";return 0==l?l="00":l<10&&(l="0"+l),1==a.length&&(a="0"+a),l+":"+a},de=e=>{f.value=e.detail.current},pe=x((()=>d.value[P.value]||{}));return v(pe,(e=>{e.audio_url&&(se(e.audio_url),$())})),A((async()=>{if(!c.isLogin&&"square"!=o.query.mode)return void n.navigateTo("/pages/login/login");await(async()=>{if(J.clear(),"square"==o.query.mode){const e=await M({id:o.query.id});e.square_id=o.query.id;const l=await L();-1===l.findIndex((e=>e.id==o.query.id))?(l.unshift(e),d.value=l):d.value=l,d.value.forEach(((e,l)=>{J.set(1*e.square_id,l),console.log("没有找到音乐",J)}))}else{const e=await K({page_type:0,status:2});d.value=e.lists,d.value.forEach(((e,l)=>{J.set(e.id,l)}))}})();const e=J.get(1*o.query.id);-1!==e&&(P.value=e)})),y((()=>{ue(),d.value=[]})),(e,l)=>{const o=j(I("page-meta"),a),p=i,A=E,g=U,x=Z,v=z,y=H,w=j(I("uv-slider"),W),q=j(I("u-icon"),F),J=j(I("floating-menu"),D),K=j(I("u-button"),Y),M=j(I("u-popup"),B);return t(),h(b,null,[r(o,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),d.value.length?(t(),u(p,{key:0,class:"h-full flex flex-col bg-white"},{default:s((()=>[r(p,{class:"dot flex py-[20rpx] justify-center"},{default:s((()=>[(t(),h(b,null,k(m,((e,l)=>r(p,{class:N(["w-[15rpx] h-[15rpx] rounded-[50%] bg-[#D8D8D8] mx-[8rpx]",{"!bg-[#767676]":f.value===l}]),key:e},null,8,["class"]))),64))])),_:1}),r(p,{class:"flex-1 min-h-0"},{default:s((()=>[r(y,{class:"h-full",current:f.value,onChange:de},{default:s((()=>[(t(),h(b,null,k(m,(e=>r(v,{key:e},{default:s((()=>["default"===e?(t(),u(p,{key:0,class:"h-full flex flex-col text-center"},{default:s((()=>[r(p,{class:"flex items-center flex-col"},{default:s((()=>[r(A,{src:S(pe).image_url,class:"w-[550rpx] h-[450rpx] rounded-[50rpx]",mode:"aspectFill"},null,8,["src"]),r(p,{class:"mt-[40rpx] px-[20rpx]"},{default:s((()=>[r(p,{class:"text-[50rpx]"},{default:s((()=>[C(V(S(pe).title),1)])),_:1}),S(pe).style_desc?(t(),u(p,{key:0,class:"text-muted py-[20rpx]"},{default:s((()=>[C(" 风格："+V(S(pe).style_desc),1)])),_:1})):T("v-if",!0)])),_:1})])),_:1}),r(p,{class:"flex-1 min-h-0"},{default:s((()=>[r(x,{class:"h-full","scroll-y":""},{default:s((()=>[r(p,{class:"p-[20rpx] text-center"},{default:s((()=>[r(g,{class:"text-lg text-content leading-loose"},{default:s((()=>[C(V(S(pe).lyric),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):"lyric"===e?(t(),u(x,{key:1,class:"h-full","scroll-y":""},{default:s((()=>[r(p,{class:"p-[20rpx] text-center"},{default:s((()=>[r(p,null,{default:s((()=>[r(p,{class:"text-[50rpx]"},{default:s((()=>[C(V(S(pe).title),1)])),_:1}),S(pe).style_desc?(t(),u(p,{key:0,class:"text-muted py-[20rpx]"},{default:s((()=>[C(" 风格："+V(S(pe).style_desc),1)])),_:1})):T("v-if",!0)])),_:1}),r(g,{class:"text-lg text-content leading-loose"},{default:s((()=>[C(V(S(pe).lyric),1)])),_:1})])),_:1})])),_:1})):T("v-if",!0)])),_:2},1024))),64))])),_:1},8,["current"])])),_:1}),r(p,{class:"pb-[40rpx] px-[20rpx]"},{default:s((()=>[r(p,{class:"flex items-center"},{default:s((()=>[r(p,{class:"w-[100rpx] text-content text-right"},{default:s((()=>[C(V(ce(S(le))),1)])),_:1}),r(p,{class:"flex-1"},{default:s((()=>[r(w,{disabled:!S(ee),"model-value":S(le),"block-size":12,"block-color":e.$theme.primaryColor,max:S(ee)||100,activeColor:e.$theme.primaryColor,onInput:ie},null,8,["disabled","model-value","block-color","max","activeColor"])])),_:1}),r(p,{class:"w-[100rpx] text-content"},{default:s((()=>[C(V(S(ee)?ce(S(ee)):S(pe).duration),1)])),_:1})])),_:1}),r(p,{class:"flex items-center"},{default:s((()=>[r(p,{class:"w-[150rpx] flex justify-center items-center",onClick:l[0]||(l[0]=e=>{return l=S(pe),c.isLogin||n.navigateTo("/pages/login/login"),R()?X.value=!0:O(l.audio_url,l.title),void(Q.value=l.audio_url);var l})},{default:s((()=>[r(q,{name:"download",size:48,color:"#999999"})])),_:1}),r(p,{class:"flex-1 flex items-center justify-center"},{default:s((()=>[r(p,{onClick:l[1]||(l[1]=e=>oe(-1)),class:"p-[20rpx]"},{default:s((()=>[r(A,{src:"data:image/png;base64,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",class:N(["w-[34rpx] h-[34rpx]",{"opacity-70":0===P.value}])},null,8,["class"])])),_:1}),r(p,{class:"w-[128rpx] h-[128rpx] text-white flex justify-center items-center rounded-[50%] mx-[60rpx] play-brn",onClick:re},{default:s((()=>[S(te)?(t(),u(q,{key:0,name:"pause",size:40})):(t(),u(q,{key:1,name:"play-right-fill",size:40}))])),_:1}),r(p,{onClick:l[2]||(l[2]=e=>oe(1)),class:"p-[20rpx]"},{default:s((()=>[r(A,{class:N([{"opacity-70":P.value===d.value.length-1},"w-[34rpx] h-[34rpx]"]),src:"data:image/png;base64,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"},null,8,["class"])])),_:1})])),_:1}),r(p,{class:"w-[150rpx] flex justify-end px-[25rpx]"},{default:s((()=>[r(p,{class:"w-[50rpx] h-[50rpx] border-2 border-solid border-muted rounded-[50%] text-muted font-bold flex items-center justify-center",onClick:l[3]||(l[3]=e=>f.value=1)},{default:s((()=>[C(" 词 ")])),_:1})])),_:1})])),_:1})])),_:1}),T("    悬浮菜单    "),r(J),r(M,{modelValue:X.value,"onUpdate:modelValue":l[4]||(l[4]=e=>X.value=e),mode:"center","border-radius":"15",closeable:""},{default:s((()=>[r(p,{class:"w-[650rpx] p-[40rpx]"},{default:s((()=>[r(p,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:s((()=>[C(" 下载音乐 ")])),_:1}),r(p,{class:"mb-[40rpx]"},{default:s((()=>[C(" 当前环境不支持下载，请复制链接到浏览器打开下载 ")])),_:1}),r(K,{type:"primary",shape:"circle",onClick:ne},{default:s((()=>[C(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})):T("v-if",!0)],64)}}}),[["__scopeId","data-v-6c446cb8"]]);export{Q as default};
