import{d as e,C as a,u as s,s as t,K as l,x as o,o as i,c as d,w as n,O as u,e as c,b as r,f as A,t as p,m as f,g as m,k as x,l as g,F as y,W as h,j as v,i as I,r as w,a as k,D as B,B as C,h as Q}from"./index-d6d2a33a.js";import{_ as b}from"./u-image.9574760c.js";import{_ as D}from"./u-icon.992584aa.js";import{_ as S,a as E}from"./u-collapse.5c69f838.js";import{_ as V}from"./u-popup.21776ef7.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";const j=P(e({options:{virtualHost:!0,styleIsolation:"shared"},externalClasses:["class"],__name:"model-picker",props:{id:{type:String,default:""},sub_id:{type:String,default:""},setDefault:{type:Boolean,default:!0},type:{type:String,default:"chatModels"},disabled:{type:Boolean,default:!1},hasHiddenUnit:{type:Boolean,default:!1}},emits:["update:id","update:sub_id","update:modelConfig"],setup(e,{emit:P}){const j=e,_=a({get:()=>j.id,set(e){P("update:id",e)}}),U=a({get:()=>j.sub_id,set(e){P("update:sub_id",e)}}),G=s(),K=t(-1),L=l({modelList:[],show:!1}),H=a((()=>L.modelList.flatMap((e=>e.models)).find((e=>e.id===U.value))||{})),T=a((()=>{var e,a;const s=(null==(a=null==(e=H.value)?void 0:e.alias)?void 0:a.length)>10;return!!j.hasHiddenUnit&&s})),F=e=>{K.value=e},R=()=>{const e=L.modelList.findIndex((e=>e.is_default))||0,a=L.modelList[e].models[0];a&&(_.value=L.modelList[e].id,U.value=a.id,K.value=e)};o((()=>H.value),(e=>{P("update:modelConfig",e)}));const Y=e=>L.modelList[e].models.some((e=>e.id===U.value));return(async()=>{try{const e=await h();L.modelList=e[j.type],j.setDefault&&R()}catch(e){console.log("获取聊天模型数据错误=>",e)}})(),(e,a)=>{const s=v,t=I,l=Q,o=w(k("u-image"),b),h=w(k("u-icon"),D),P=w(k("u-collapse-item"),S),j=w(k("u-collapse"),E),K=B,R=w(k("u-popup"),V);return i(),d(s,{class:"flex items-center"},{default:n((()=>[L.modelList.length?(i(),d(s,{key:0,class:"flex-1",onClick:a[0]||(a[0]=e=>L.show=!0)},{default:n((()=>[u(e.$slots,"default",{item:c(H)},(()=>[c(H).name?(i(),d(s,{key:0,class:"flex items-center p-[20rpx] text-sm"},{default:n((()=>[r(s,{class:f(["leading-6 text-[#101010]",{"line-clamp-1 max-w-[300rpx]":c(T)}])},{default:n((()=>[A(p(c(H).alias)+"/ ",1)])),_:1},8,["class"]),c(H).alias&&"0"==c(H).price?(i(),d(s,{key:0,class:"text-muted font-normal"},{default:n((()=>[A(" (免费) ")])),_:1})):c(H).alias?(i(),d(s,{key:1,class:f(["text-muted leading-5 font-normal",{"line-clamp-1 w-[90rpx]":c(T)}])},{default:n((()=>[A(" ("+p(`消耗${c(H).price}${c(G).getTokenUnit}/1000字符`)+") ",1)])),_:1},8,["class"])):m("v-if",!0),m('                <u-icon name="arrow-down" size="24rpx"></u-icon>'),r(t,{class:"w-[24rpx] h-[24rpx] ml-2",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABGCAYAAAAzbZETAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAKUSURBVHic7ZzdceIwFIWPhAugBErIvmbiGaeDbANBlJAKFirYEjDbQNJBHsjsa9LBtkABlu8+JDAQ82MJSx6PzvcGY4/ufIcr/CcDkchNZfKpXcYabyioGIPcGrnRdf0OAEqhXK9GsxjjDgEdeoAv+a/bzyJgJ+wRtAP25I8bA7MTAAQMoDAyqT6nnYb83eAMIcwUVBiZ2BO//H04HQXogK18ASati9Dyc11mL13XMgQ67QAf+QAWqcoHOuwAX/lvf0bzrmoYIp0EQPn+XB1AYWRs6/qd8v3Irtm5MDKupH4F5Xvj3QE7+YIbh90o/xveR0GVyLOLfKVQUn4TrwDyqV1CpGi7Pc94T+M8BeVTuxSBaT0A5Z/FKQBX+VDqA0o9uRaVEq0DuHu0cwC/wpWSJq0CcP7lk9ZcDIDyw3IygM/jfFlC5CFmQalxNADPkyziQSMAyo/LwYlYYWRC+XHZXYzbu4046a+c9FCA9/V80gHKU/5GKWxCFZUSmbW2EKVWLjvVWr/8LdVHqKIIIYQQQgghhBBCCCGEENIpKp/af30XkSxKFpkIb0P2xOJtlZXBX1VAjrJbqMIA4nOwSogBxKWxROuqRXqkPUrLbF1m5ffv2QEROCUfYACh2ZyTD3AKCsmm1vr+0vNT7IAwtJIPABm0vo9R0WAR+Q0Rl6fFW8sHIr20b6h4LM9ykg8wgJPEkA8wgKPEkg/wT7jB3aOdx5IPsAMO8FiMfpV8gAHs6EM+wAAA9CcfYAC9ygcSD6Bv+UDCAeSmepBaPTvs0rl8IOEAALfj/VrrHyEWJiZ9HrBejWZKoby0ndIyC7UqNOkO2HKuEy5dz78WBvDFsRBCywcYwAH7IcSQT46QT+0yN5WJNd5/UwFz/9eUF8AAAAAASUVORK5CYII="})])),_:1})):m("v-if",!0)]),!0)])),_:3})):m("v-if",!0),r(R,{modelValue:L.show,"onUpdate:modelValue":a[1]||(a[1]=e=>L.show=e),mode:"bottom","safe-area-inset-bottom":!0,closeable:"","border-radius":"16"},{default:n((()=>[r(s,{class:"p-[20rpx] text-lg font-bold"},{default:n((()=>[A(" 选择模型 ")])),_:1}),r(K,{class:"pb-[10rpx] h-[70vh]","scroll-y":""},{default:n((()=>[r(s,{class:"px-[20rpx] pb-6 model-container"},{default:n((()=>[r(j,{"event-type":"close",arrow:!0,accordion:!0,ref:"collapseRef",onChange:F},{default:n((()=>[(i(!0),x(y,null,g(L.modelList,((e,a)=>(i(),d(P,{index:a,key:a,class:f({"collapse-item--active":Y(a)}),open:Y(a)},{title:n((()=>[C("div",null,[r(s,{class:"flex items-center py-2"},{default:n((()=>[e.logo?(i(),d(t,{key:0,src:e.logo,class:"w-[60rpx] h-[60rpx]"},null,8,["src"])):m("v-if",!0),r(l,{class:"mx-2 leading-[24px] font-medium"},{default:n((()=>[A(p(e.name),1)])),_:2},1024),e.is_free?(i(),d(l,{key:1,class:"bg-[#E3FFF2] text-[#23B571] text-xs px-[10rpx] py-[4rpx] leading-[40rpx] rounded-[6rpx]"},{default:n((()=>[A(" 会员免费 ")])),_:1})):m("v-if",!0)])),_:2},1024),e.remarks?(i(),d(s,{key:0,class:"flex items-center text-xs text-muted font-normal mt-2 leading-[40rpx]"},{default:n((()=>[A(p(e.remarks),1)])),_:2},1024)):m("v-if",!0)])])),default:n((()=>[r(s,{class:"flex-1 h-full"},{default:n((()=>[(i(!0),x(y,null,g(e.models,(a=>(i(),d(s,{class:"mb-[20rpx] flex items-center justify-between",key:a.id,onClick:s=>{return t=e.id,l=a.id,_.value=t,U.value=l,void(L.show=!1);var t,l}},{default:n((()=>[r(s,{class:"flex-1 min-w-0 flex items-center"},{default:n((()=>[r(s,{class:"leading-6 text-main mr-2"},{default:n((()=>[A(p(a.alias),1)])),_:2},1024),a.alias&&"0"==a.price?(i(),d(s,{key:0,class:"text-tx-placeholder"},{default:n((()=>[A(" (免费) ")])),_:1})):(i(),d(s,{key:1,class:"text-tx-secondary text-xs leading-5 font-normal"},{default:n((()=>[A(p(`消耗${a.price}${c(G).getTokenUnit}/1000字符`),1)])),_:2},1024))])),_:2},1024),c(U)!==a.id?(i(),d(s,{key:0,class:"text-muted ml-1 mr-[2px]"},{default:n((()=>[r(o,{src:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgBAMAAAAQtmoLAAAAIVBMVEVHcEzo6Oji4uLi4uLh4eHh4eHh4eHh4eHh4eHi4uLk5OSJl7toAAAAC3RSTlMADDJnhqjL6P9LHpVQZJEAAAMySURBVHgBtVXPTxNBFJ5tQWxPDRiltxoT5KgJaL01IZFyE0ya6qlIKXtEjGTxJLTdnfaE0WCPPYl/pvve7Mz+mp15e/AdCvPmezvv+96bN0xj6zu9My+4PN17yijWfMuVDX9Y4c4uT9n7hhlf7afxnE9vTfgNL4vnPHhZjH+kwZsiajE+GI0Si4Ks6jL/4ZsWrCs/pV5TPfPfYneSkLIZfeNKS0DsnaS+5rwS3o4mIRd3jrL+O3T7y4KEcnjGtnDjIqcQuj8VcgtaGW8bvF/08nU1R1QLEkWrYEnSRyzAdajHM/Y4dwQyGBfhRVIpFs8hwNCWmPG3eO14OuGyKfvxcjVPSqd6J5XijQkvZFeQCoS/MAesAG3ZZg+gg814xtxETnDcsS3gPgTNExq1bAG1WKcVc9Gk9VWpnoT/DewBMaxLyUhUeyYpWDWKdPJl5JwSsIhIQBXeUQIkcDv8u6QEgLDngrNPwTPmCdYeqQpgfVQHOu+aFgCshUgkzoytYcFW7a0tDaAd9pAqkkhmAKoGNDxzUNcFsTHAwuaYQxmIqqKuM/FDNPy4S2w9sPAuT6DQ36kByNcTHUWyv9B2/H8GhEUOGG0CCFuLAs5LBPBSpPGEMrIiB7dEwCaoVKbSKGvf+pbEhpUu063YS/hDtDCbMdw44ljCC3QDzDkRD1f0OpodJINZOYhmB8ngqepEYSSD8X2LiRErB3O+gdSJunbFRGqTJ1k05zfVc2qxajTnV6ms16I5X5PPqc3aMhWX2BwK16aRAApjldtne8C9GhcQSqhEXz1VjkfpP9BGUoXX8ZiSkbzLUIkpQSPV1XVuf0mhtYOGXLXttesmMhI5mUsBSibuGeo0sx2QbIdtCwtgkCouiGwqHhQtSJUKaPPDIvwfnqKsSAUFvKueRhQ8YtLQ4euQUE4TPIJf6QJe8xwDMGgozj/m8Vu4cZHz1zBRfpT136F72iiQgvOTZdJZ2RdebY26Ys8/UF9zfoljNQnh11yxy/09ZNjclQ69eooGijIaxQu/8DpuxKCEBYYm00X4xr6vuVn8V8vIqu+n0/nArPasF+OHtNdvfad35gWXpwc6+D/7/hGFSfzWXAAAAABJRU5ErkJggg=="),width:"32rpx",height:"32rpx"},null,8,["src"])])),_:1})):(i(),d(s,{key:1,class:"text-primary mt-[3px]"},{default:n((()=>[r(h,{name:"checkmark-circle-fill",size:"40rpx"})])),_:1}))])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["index","class","open"])))),128))])),_:1},512)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:3})}}}),[["__scopeId","data-v-cc1ed158"]]);export{j as _};
