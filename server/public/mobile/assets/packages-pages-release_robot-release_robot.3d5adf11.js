import{_ as e}from"./page-meta.d751427a.js";import{d as t,J as l,s as a,x as s,o,c as n,w as r,b as u,f as i,t as d,g as p,e as c,P as f,j as m,r as _,a as x,D as h,K as y,k as b,F as v,l as w,U as g,O as k,aB as C,B as V,C as T,av as $,b1 as F,au as j,b6 as P,b5 as U,p as z,m as I,i as R,b7 as A,a6 as O,aQ as E,ae as S}from"./index-d6d2a33a.js";import{_ as L}from"./u-icon.992584aa.js";import{_ as q}from"./u-button.97a3d07f.js";import{_ as B}from"./u-navbar.d70905ec.js";import{_ as M}from"./z-paging.6c8c2edf.js";import{_ as D}from"./u-action-sheet.29883fbc.js";import{u as N,w as H,x as K,y as Y,z as Q,A as J}from"./robot.627d8f7e.js";import{_ as W}from"./u-input.e3cf3beb.js";import{_ as X}from"./u-form-item.36bcbf1f.js";import{_ as G,a as Z}from"./u-radio-group.5e4decfb.js";import{_ as ee}from"./u-form.f207500c.js";import{_ as te}from"./u-popup.21776ef7.js";import{l as le}from"./lodash.2de268df.js";import{a as ae,u as se}from"./index.3dd6f2ef.js";import{u as oe}from"./useCopy.4954d67d.js";import{F as ne}from"./floating-menu.85d77f2f.js";import{_ as re}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as ue}from"./ua-markdown.e9ea1a15.js";import{_ as ie,a as de,b as pe,c as ce}from"./l-painter.cecf0579.js";import{_ as fe}from"./u-line-progress.6067a85b.js";import{u as me}from"./useLockFn.3b1f86f9.js";import{d as _e}from"./download.954a43dc.js";import"./emitter.1571a5d9.js";import"./_commonjsHelpers.157f59fb.js";import"./index.22b2ad12.js";import"./katex.37f36714.js";import"./mp-html.318bb55d.js";const xe=t({__name:"create-share",props:{mode:null,data:null,show:{type:Boolean},type:null},emits:["update:show","confirm"],setup(e,{emit:t}){const y=e,b=l(),{show:v}=ae(y,t),w=a({name:"",password:"",chat_type:1}),g={name:[{required:!0,message:"请输入链接名称"}]},k=()=>{b.value.validate((e=>{e&&(t("confirm",{value:le.cloneDeep(w.value),type:y.mode}),v.value=!1)}))};return s(v,(e=>{var t,l,a;e&&(setTimeout((()=>{b.value.setRules(g)})),"add"==y.mode?w.value={name:"",password:"",chat_type:1}:w.value={id:null==(t=y.data)?void 0:t.id,name:null==(l=y.data)?void 0:l.name,password:null==(a=y.data)?void 0:a.secret})})),(t,l)=>{const a=m,s=_(x("u-input"),W),y=_(x("u-form-item"),X),g=_(x("u-radio"),G),C=_(x("u-radio-group"),Z),V=_(x("u-form"),ee),T=h,$=_(x("u-button"),q),F=_(x("u-popup"),te);return o(),n(F,{modelValue:c(v),"onUpdate:modelValue":l[4]||(l[4]=e=>f(v)?v.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:r((()=>[u(a,{class:"h-[60vh] flex flex-col"},{default:r((()=>[u(a,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:r((()=>[i(d("add"==e.mode?"创建":"编辑")+"链接 ",1)])),_:1}),u(a,{class:"flex-1 min-h-0"},{default:r((()=>[u(T,{class:"h-full","scroll-y":""},{default:r((()=>[u(a,{class:"p-[20rpx]"},{default:r((()=>[u(V,{model:w.value,ref_key:"uFormRef",ref:b,"label-position":"top","border-bottom":!1},{default:r((()=>[u(y,{label:"链接名称",prop:"name",required:""},{default:r((()=>[u(a,{class:"flex-1"},{default:r((()=>[u(s,{modelValue:w.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value.name=e),placeholder:"请输入链接名称",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),u(y,{label:"访问密码",prop:"password"},{default:r((()=>[u(a,{class:"flex-1"},{default:r((()=>[u(s,{modelValue:w.value.password,"onUpdate:modelValue":l[1]||(l[1]=e=>w.value.password=e),placeholder:"请输入访问密码",border:!0,type:"password"},null,8,["modelValue"])])),_:1})])),_:1}),1===e.type&&"add"==e.mode?(o(),n(y,{key:0,label:"对话模式",prop:"chat_type"},{default:r((()=>[u(a,null,{default:r((()=>[u(C,{modelValue:w.value.chat_type,"onUpdate:modelValue":l[2]||(l[2]=e=>w.value.chat_type=e)},{default:r((()=>[u(g,{name:1},{default:r((()=>[i(" 文本对话 ")])),_:1}),u(g,{name:2},{default:r((()=>[i(" 形象对话 ")])),_:1})])),_:1},8,["modelValue"]),u(a,{class:"text-muted"},{default:r((()=>[i(" 若关闭或没有配置形象选择后，默认展示文本 ")])),_:1})])),_:1})])),_:1})):p("v-if",!0)])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),u(a,{class:"flex p-[20rpx]"},{default:r((()=>[u(a,{class:"flex-1 mr-[20rpx]"},{default:r((()=>[u($,{onClick:l[3]||(l[3]=e=>v.value=!1)},{default:r((()=>[i(" 取消 ")])),_:1})])),_:1}),u(a,{class:"flex-1"},{default:r((()=>[u($,{type:"primary",onClick:k},{default:r((()=>[i(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),he=t({__name:"usage-settings",props:{show:{type:Boolean},data:null},emits:["update:show","confirm"],setup(e,{emit:t}){const a=e,d=l(),{show:p}=ae(a,t),b=y({limit_exceed:"",limit_today_chat:0,limit_total_chat:1}),v={limit_exceed:[{required:!0,message:"请输入超出将默认回复"}],limit_today_chat:[{required:!0,message:"请输入限制每个用户总对话数"}],limit_total_chat:[{required:!0,message:"请输入限制每个用户每天总对话数"}]},w=()=>{d.value.validate((e=>{e&&(t("confirm",le.cloneDeep(b)),p.value=!1)}))};return s(p,(e=>{e&&setTimeout((()=>{d.value.setRules(v)}))})),s((()=>a.data),(e=>{Object.assign(b,e)})),(e,t)=>{const l=m,a=_(x("u-input"),W),s=_(x("u-form-item"),X),y=_(x("u-form"),ee),v=h,g=_(x("u-button"),q),k=_(x("u-popup"),te);return o(),n(k,{modelValue:c(p),"onUpdate:modelValue":t[4]||(t[4]=e=>f(p)?p.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:r((()=>[u(l,{class:"h-[80vh] flex flex-col"},{default:r((()=>[u(l,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:r((()=>[i(" 用量设置 ")])),_:1}),u(l,{class:"flex-1 min-h-0"},{default:r((()=>[u(v,{class:"h-full","scroll-y":""},{default:r((()=>[u(l,{class:"p-[20rpx]"},{default:r((()=>[u(y,{model:b,ref_key:"uFormRef",ref:d,"label-position":"top","border-bottom":!1},{default:r((()=>[u(s,{label:"限制每个用户总对话数",prop:"limit_today_chat",required:""},{default:r((()=>[u(l,{class:"flex-1"},{default:r((()=>[u(a,{modelValue:b.limit_today_chat,"onUpdate:modelValue":t[0]||(t[0]=e=>b.limit_today_chat=e),placeholder:"请输入限制数量",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),u(s,{label:"限制每个用户每天总对话数",prop:"limit_total_chat",required:""},{default:r((()=>[u(l,{class:"flex-1"},{default:r((()=>[u(a,{modelValue:b.limit_total_chat,"onUpdate:modelValue":t[1]||(t[1]=e=>b.limit_total_chat=e),placeholder:"请输入限制数量",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),u(s,{label:"超出将默认回复",prop:"limit_exceed",required:""},{default:r((()=>[u(l,{class:"flex-1"},{default:r((()=>[u(a,{modelValue:b.limit_exceed,"onUpdate:modelValue":t[2]||(t[2]=e=>b.limit_exceed=e),placeholder:"请输入超出将默认回复内容",border:!0,type:"textarea",height:200},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),u(l,{class:"flex p-[20rpx]"},{default:r((()=>[u(l,{class:"flex-1 mr-[20rpx]"},{default:r((()=>[u(g,{onClick:t[3]||(t[3]=e=>p.value=!1)},{default:r((()=>[i(" 取消 ")])),_:1})])),_:1}),u(l,{class:"flex-1"},{default:r((()=>[u(g,{type:"primary",onClick:w},{default:r((()=>[i(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ye=re(t({options:{multipleSlots:!0},__name:"release-web",props:{title:null,type:null,robotId:null,showMoreAction:{type:Boolean,default:!1}},setup(e,{expose:t}){const s=e,c=a(!1),f=y({lists:[{text:"编辑",type:"edit"},{text:"用量设置",type:"setting"},{text:"删除",color:"#FA5151",type:"delete"}],show:!1,item:{},type:"add"}),h=e=>{f.type=e,c.value=!0},V=e=>{switch(f.lists[e].type){case"setting":U(f.item);break;case"edit":h("edit");break;case"delete":j(f.item.id)}},T=a([]),$=l(),F=async(e,t)=>{var l,a;try{const{lists:a}=await N({page_no:e,page_size:t,type:s.type,robot_id:s.robotId});null==(l=$.value)||l.complete(a)}catch(o){null==(a=$.value)||a.complete(!1)}},j=async e=>{var t;const{cancel:l}=await g({title:"温馨提示",content:"确定要删除？"});l||(await H({id:e,type:s.type}),null==(t=$.value)||t.refresh())},P=y({show:!1,data:{}}),U=e=>{P.show=!0,P.data=e},z=async e=>{var t;await K({...e,type:s.type,robot_id:s.robotId}),null==(t=$.value)||t.refresh()},{copy:I}=oe(),R=async({value:e,type:t})=>{var l;await("add"==t?Y({...e,type:s.type,robot_id:s.robotId}):Q({...e})),null==(l=$.value)||l.reload()};return t({refresh:()=>{var e;null==(e=$.value)||e.refresh()}}),(t,l)=>{const a=_(x("u-navbar"),B),s=_(x("u-button"),q),y=m,g=_(x("u-icon"),L),j=_(x("z-paging"),M),U=_(x("u-action-sheet"),D);return o(),b(v,null,[u(y,{class:"h-full flex flex-col"},{default:r((()=>[u(a,{"back-text":e.title},null,8,["back-text"]),u(y,{class:"flex-1 min-h-0 pt-[20rpx]"},{default:r((()=>[u(y,{class:"h-full bg-white flex flex-col"},{default:r((()=>[u(y,{class:"flex py-[20rpx] px-[30rpx]"},{default:r((()=>[u(y,null,{default:r((()=>[u(s,{type:"primary",size:"medium",onClick:l[0]||(l[0]=e=>h("add"))},{default:r((()=>[i(" 创建链接 ")])),_:1})])),_:1})])),_:1}),u(y,{class:"flex-1 min-h-0"},{default:r((()=>[u(j,{ref_key:"pagingRef",ref:$,modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=e=>T.value=e),"auto-clean-list-when-reload":!1,onQuery:F,fixed:!1},{default:r((()=>[u(y,{class:"px-[30rpx] pt-[10rpx]"},{default:r((()=>[(o(!0),b(v,null,w(T.value,(l=>(o(),n(y,{class:"data-item mb-[30rpx]",key:l.id},{default:r((()=>[u(y,{class:"p-[20rpx]"},{default:r((()=>[u(y,{class:"flex mb-[20rpx] items-baseline"},{default:r((()=>[u(y,{class:"flex-none text-muted"},{default:r((()=>[i("   APIKEY： ")])),_:1}),u(y,null,{default:r((()=>[i(d(l.apikey),1)])),_:2},1024)])),_:2},1024),u(y,{class:"flex mb-[20rpx] items-baseline"},{default:r((()=>[u(y,{class:"flex-none text-muted"},{default:r((()=>[i(" 分享名称： ")])),_:1}),u(y,null,{default:r((()=>[i(d(l.name),1)])),_:2},1024)])),_:2},1024),u(y,{class:"flex mb-[20rpx] items-baseline"},{default:r((()=>[u(y,{class:"flex-none text-muted"},{default:r((()=>[i(" 访问密码： ")])),_:1}),u(y,null,{default:r((()=>[i(d(l.secret||"-"),1)])),_:2},1024)])),_:2},1024),1===e.type?(o(),n(y,{key:0,class:"flex mb-[20rpx] items-baseline"},{default:r((()=>[u(y,{class:"flex-none text-muted"},{default:r((()=>[i(" 对话模式： ")])),_:1}),u(y,null,{default:r((()=>[i(d(1==l.chat_type?"文本":"形象"),1)])),_:2},1024)])),_:2},1024)):p("v-if",!0),u(y,{class:"flex items-baseline"},{default:r((()=>[u(y,{class:"flex-none text-muted"},{default:r((()=>[i(" 使用时间： ")])),_:1}),u(y,null,{default:r((()=>[i(d(l.use_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(y,{class:"border-t border-0 border-solid border-light p-[25rpx] flex justify-between"},{default:r((()=>[k(t.$slots,"actions",{item:l},void 0,!0),1==e.type?(o(),n(y,{key:0,class:"flex items-center",onClick:e=>(e=>{let t=C.baseUrl;t=`${location.origin}/`;const l=`${t}chat/${e.apikey} #${e.name} ${e.secret?`密码: ${e.secret}`:""}`;I(l)})(l)},{default:r((()=>[u(g,{name:"file-text",size:32}),u(y,{class:"ml-[10rpx]"},{default:r((()=>[i(" 复制链接 ")])),_:1})])),_:2},1032,["onClick"])):p("v-if",!0),u(y,{class:"flex items-center",onClick:e=>(e=>{f.item=e,f.show=!0})(l)},{default:r((()=>[u(g,{name:"more-dot-fill",size:32}),u(y,{class:"ml-[10rpx]"},{default:r((()=>[i(" 更多 ")])),_:1})])),_:2},1032,["onClick"]),p(' <template v-else>\n                                        <view\n                                            class="flex items-center"\n                                            @click="showUsageSettings(item)"\n                                        >\n                                            <u-icon name="setting" :size="32" />\n                                            <view class="ml-[10rpx]">\n                                                用量设置\n                                            </view>\n                                        </view>\n                                        <view\n                                            class="flex items-center"\n                                            @click="shareDelete(item.id)"\n                                        >\n                                            <u-icon name="trash" :size="32" />\n                                            <view class="ml-[10rpx]">\n                                                删除\n                                            </view>\n                                        </view>\n                                    </template> ')])),_:2},1024)])),_:2},1024)))),128))])),_:3})])),_:3},8,["modelValue"])])),_:3})])),_:3})])),_:3})])),_:3}),u(xe,{show:c.value,"onUpdate:show":l[2]||(l[2]=e=>c.value=e),data:f.item,mode:f.type,onConfirm:R,type:e.type},null,8,["show","data","mode","type"]),u(he,{show:P.show,"onUpdate:show":l[3]||(l[3]=e=>P.show=e),data:P.data,onConfirm:z},null,8,["show","data"]),u(U,{list:f.lists,modelValue:f.show,"onUpdate:modelValue":l[4]||(l[4]=e=>f.show=e),onClick:V},null,8,["list","modelValue"]),p("    悬浮菜单    "),u(ne)],64)}}}),[["__scopeId","data-v-1be1ccc0"]]),be=t({__name:"create-api",props:{show:{type:Boolean}},emits:["update:show","confirm"],setup(e,{emit:t}){const a=e,d=l(),{show:p}=ae(a,t),b=y({name:""}),v={name:[{required:!0,message:"请输入接口名称"}]},w=()=>{d.value.validate((e=>{e&&(t("confirm",le.cloneDeep(b)),p.value=!1)}))};return s(p,(e=>{e&&setTimeout((()=>{d.value.setRules(v)}))})),(e,t)=>{const l=m,a=_(x("u-input"),W),s=_(x("u-form-item"),X),y=_(x("u-form"),ee),v=h,g=_(x("u-button"),q),k=_(x("u-popup"),te);return o(),n(k,{modelValue:c(p),"onUpdate:modelValue":t[2]||(t[2]=e=>f(p)?p.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:r((()=>[u(l,{class:"h-[60vh] flex flex-col"},{default:r((()=>[u(l,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:r((()=>[i(" 创建API ")])),_:1}),u(l,{class:"flex-1 min-h-0"},{default:r((()=>[u(v,{class:"h-full","scroll-y":""},{default:r((()=>[u(l,{class:"p-[20rpx]"},{default:r((()=>[u(y,{model:b,ref_key:"uFormRef",ref:d,"label-position":"top","border-bottom":!1},{default:r((()=>[u(s,{label:"接口名称",prop:"name",required:""},{default:r((()=>[u(l,{class:"flex-1"},{default:r((()=>[u(a,{modelValue:b.name,"onUpdate:modelValue":t[0]||(t[0]=e=>b.name=e),placeholder:"请输入接口名称",border:!0},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),u(l,{class:"flex p-[20rpx]"},{default:r((()=>[u(l,{class:"flex-1 mr-[20rpx]"},{default:r((()=>[u(g,{onClick:t[1]||(t[1]=e=>p.value=!1)},{default:r((()=>[i(" 取消 ")])),_:1})])),_:1}),u(l,{class:"flex-1"},{default:r((()=>[u(g,{type:"primary",onClick:w},{default:r((()=>[i(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ve=re(t({__name:"release-api",props:{title:null,type:null,robotId:null},setup(e){const t=e,{copy:s}=oe(),f=a(!1),h=a([]),T=l(),$=async(e,l)=>{var a,s;try{const{lists:s}=await N({page_no:e,page_size:l,type:t.type,robot_id:t.robotId});null==(a=T.value)||a.complete(s)}catch(o){null==(s=T.value)||s.complete(!1)}},F=a(`${C.baseUrl}api/v1/chat/completions`);F.value=`${location.origin}/api/v1/chat/completions`;const j=y({show:!1,data:{}}),P=async e=>{var l;await K({...e,type:t.type,robot_id:t.robotId}),null==(l=T.value)||l.refresh()},U=async e=>{var l;await Y({...e,type:t.type,robot_id:t.robotId}),null==(l=T.value)||l.reload()};return(l,a)=>{const y=_(x("u-navbar"),B),C=_(x("u-button"),q),z=m,I=_(x("u-icon"),L),R=_(x("z-paging"),M);return o(),b(v,null,[u(z,{class:"h-full flex flex-col"},{default:r((()=>[u(y,{"back-text":e.title},null,8,["back-text"]),u(z,{class:"flex-1 min-h-0 pt-[20rpx]"},{default:r((()=>[u(z,{class:"h-full bg-white flex flex-col"},{default:r((()=>[u(z,{class:"flex px-[20rpx] items-center flex-wrap mb-[20rpx]"},{default:r((()=>[u(z,{class:"mt-[20rpx] mr-[20rpx]"},{default:r((()=>[u(C,{type:"primary",size:"medium",onClick:a[0]||(a[0]=e=>f.value=!0)},{default:r((()=>[i(" 创建API ")])),_:1})])),_:1}),k(l.$slots,"btn",{},void 0,!0),u(z,{class:"mt-[20rpx] mr-[20rpx]"},{default:r((()=>[V("span",null,"API根地址："+d(F.value),1),V("span",{onClick:a[1]||(a[1]=e=>c(s)(F.value)),class:"text-primary"}," 复制 ")])),_:1})])),_:3}),u(z,{class:"flex-1 min-h-0"},{default:r((()=>[u(R,{ref_key:"pagingRef",ref:T,modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e),"auto-clean-list-when-reload":!1,onQuery:$,fixed:!1},{default:r((()=>[u(z,{class:"px-[30rpx] pt-[10rpx]"},{default:r((()=>[(o(!0),b(v,null,w(h.value,(e=>(o(),n(z,{class:"data-item mb-[30rpx]",key:e.id},{default:r((()=>[u(z,{class:"p-[20rpx]"},{default:r((()=>[u(z,{class:"flex mb-[20rpx] items-baseline"},{default:r((()=>[u(z,{class:"flex-none text-muted"},{default:r((()=>[i("   APIKEY： ")])),_:1}),u(z,null,{default:r((()=>[i(d(e.apikey),1)])),_:2},1024)])),_:2},1024),u(z,{class:"flex mb-[20rpx] items-baseline"},{default:r((()=>[u(z,{class:"flex-none text-muted"},{default:r((()=>[i("       名 称： ")])),_:1}),u(z,null,{default:r((()=>[i(d(e.name),1)])),_:2},1024)])),_:2},1024),u(z,{class:"flex items-baseline"},{default:r((()=>[u(z,{class:"flex-none text-muted"},{default:r((()=>[i(" 使用时间： ")])),_:1}),u(z,null,{default:r((()=>[i(d(e.use_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(z,{class:"border-t border-0 border-solid border-light p-[25rpx] flex justify-between"},{default:r((()=>[k(l.$slots,"actions",{item:e},void 0,!0),u(z,{class:"flex items-center",onClick:t=>(e=>{j.show=!0,j.data=e})(e)},{default:r((()=>[u(I,{name:"setting",size:32}),u(z,{class:"ml-[10rpx]"},{default:r((()=>[i(" 用量设置 ")])),_:1})])),_:2},1032,["onClick"]),u(z,{class:"flex items-center",onClick:l=>(async e=>{var l;const{cancel:a}=await g({title:"温馨提示",content:"确定要删除？"});a||(await H({id:e,type:t.type}),null==(l=T.value)||l.refresh())})(e.id)},{default:r((()=>[u(I,{name:"trash",size:32}),u(z,{class:"ml-[10rpx]"},{default:r((()=>[i(" 删除 ")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:3})])),_:3},8,["modelValue"])])),_:3})])),_:3})])),_:3}),p("    悬浮菜单    "),u(ne)])),_:3}),u(be,{show:f.value,"onUpdate:show":a[3]||(a[3]=e=>f.value=e),onConfirm:U},null,8,["show"]),u(he,{show:j.show,"onUpdate:show":a[4]||(a[4]=e=>j.show=e),data:j.data,onConfirm:P},null,8,["show","data"])],64)}}}),[["__scopeId","data-v-ddcfd88d"]]),we=t({__name:"js-embedding",props:{apikey:null,show:{type:Boolean}},emits:["confirm","update:show"],setup(e,{emit:t}){const l=e,{show:a}=ae(l,t),s=T((()=>{let e=C.baseUrl;e=`${location.origin}/`;return`${e}chat/${l.apikey}`})),d=T((()=>`\`\`\`html\n<iframe \n    src="${s.value}" \n    class="chat-iframe"\n    frameborder="0"\n>\n</iframe>\n<style scoped>\n    /* iframe框默认占满全屏，可根据需求自行调整样式  */\n    .chat-iframe {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border: none;\n        margin: 0;\n        padding: 0;\n        overflow: hidden;\n        z-index: 9999;\n    }\n</style>\n\`\`\``)),p=T((()=>{let e=C.baseUrl;return e=`${location.origin}/`,`\`\`\`html\n<script>\n    window.chat_iframe_src = '${s.value}'\n    window.chat_iframe_width = '375px' //聊天窗口宽\n    window.chat_iframe_height = '667px'  //聊天窗口高\n    window.chat_icon_bg = '#3C5EFD' //聊天悬浮按钮背景\n    window.chat_icon_color = '#fff' //聊天悬浮按钮颜色\n    var js = document.createElement('script')\n    js.type = 'text/javascript'\n    js.async = true\n    js.src = '${e}js-iframe.js'\n    var header = document.getElementsByTagName('head')[0]\n    header.appendChild(js)\n<\/script>\n\`\`\`\n`}));return(e,t)=>{const l=m,s=_(x("ua-markdown"),ue),y=_(x("u-form-item"),X),b=_(x("u-form"),ee),v=h,w=_(x("u-popup"),te);return o(),n(w,{modelValue:c(a),"onUpdate:modelValue":t[0]||(t[0]=e=>f(a)?a.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:r((()=>[u(l,{class:"h-[80vh] flex flex-col"},{default:r((()=>[u(l,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:r((()=>[i(" 查看代码 ")])),_:1}),u(l,{class:"flex-1 min-h-0"},{default:r((()=>[u(v,{class:"h-full","scroll-y":""},{default:r((()=>[u(l,{class:"p-[20rpx]"},{default:r((()=>[u(b,{ref:"uFormRef","label-position":"top","border-bottom":!1},{default:r((()=>[u(y,{label:"要在您网站的任何位置添加聊天智能体，请将此 iframe 添加到您的 html 代码中"},{default:r((()=>[u(l,{class:"flex-1 min-w-0"},{default:r((()=>[u(s,{content:c(d)},null,8,["content"])])),_:1})])),_:1}),u(y,{label:"要在您网站的右下角添加聊天气泡，请复制添加到您的 html中"},{default:r((()=>[u(l,{class:"flex-1 min-w-0"},{default:r((()=>[u(s,{content:c(p)},null,8,["content"])])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ge=t({__name:"oa-config",props:{apikey:null,show:{type:Boolean}},emits:["confirm","update:show"],setup(e,{emit:t}){const l=e,{show:a}=ae(l,t),s=T((()=>{let e=C.baseUrl;e=`${location.origin}/`;return`${e}chat/${l.apikey}`})),{copy:p}=oe(),h=e=>{$({urls:[e]})};return(e,t)=>{const l=m,y=_(x("u-popup"),te);return o(),n(y,{modelValue:c(a),"onUpdate:modelValue":t[4]||(t[4]=e=>f(a)?a.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom","z-index":"999"},{default:r((()=>[u(l,{class:"p-[20rpx]"},{default:r((()=>[u(l,{class:"text-xl font-medium"},{default:r((()=>[i("添加菜单")])),_:1}),u(l,{class:"mt-[30rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i("1.进入微信"),V("span",{class:"text-success"},"公众号后台")])),_:1}),u(l,{class:"text-[#999] mt-[10rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i("请确保您的公众号已过微信认证")])),_:1}),u(l,null,{default:r((()=>[u(l,null,{default:r((()=>[i("路径：内容与互动 > 自定义菜单 > 添加菜单")])),_:1}),u(l,{class:"text-primary mt-[10rpx]",onClick:t[0]||(t[0]=e=>h(c("/mobile/assets/wxoa_config_menu-45906034.png")))},{default:r((()=>[i(" 查看填写示例 ")])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"mt-[30rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i("2.创建菜单")])),_:1}),u(l,{class:"text-[#999] mt-2"},{default:r((()=>[u(l,null,{default:r((()=>[i("填写菜单名称，将以下链接或二维码，配置到菜单里")])),_:1})])),_:1}),u(l,{class:"mt-[10rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i(d(c(s)),1)])),_:1}),u(l,{class:"text-primary mt-[10rpx]",onClick:t[1]||(t[1]=e=>c(p)(c(s)))},{default:r((()=>[i(" 复制链接 ")])),_:1})])),_:1})])),_:1}),u(l,{class:"text-xl font-medium mt-[30rpx]"},{default:r((()=>[i(" 自动回复 ")])),_:1}),u(l,{class:"mt-[30rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i("1.进入微信"),V("span",{class:"text-success"},"公众号后台")])),_:1}),u(l,{class:"text-[#999] mt-[10rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[u(l,null,{default:r((()=>[i("路径：内容与互动 > 自动回复 > 收到消息回复")])),_:1}),u(l,{class:"text-primary mt-[10rpx]",onClick:t[2]||(t[2]=e=>h(c("/mobile/assets/wxoa_config_autoreply-4c7b032d.png")))},{default:r((()=>[i(" 查看填写示例 ")])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"mt-[25rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i("2.创建自动回复")])),_:1}),u(l,{class:"text-[#999] mt-[10rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i(" 选择自动回复类型，将以下链接或二维码，配置到回复里 ")])),_:1})])),_:1}),u(l,{class:"mt-[10rpx]"},{default:r((()=>[u(l,null,{default:r((()=>[i(d(c(s)),1)])),_:1}),u(l,{class:"text-primary mt-[10rpx]",onClick:t[3]||(t[3]=e=>c(p)(c(s)))},{default:r((()=>[i(" 复制链接 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ke=t({__name:"call-description",props:{content:{type:String,default:""},title:{type:String,default:""}},setup(e){const t=a(!1);return(l,a)=>{const s=m,n=_(x("ua-markdown"),ue),p=h,c=_(x("u-popup"),te);return o(),b(v,null,[u(s,{onClick:a[0]||(a[0]=e=>t.value=!0)},{default:r((()=>[k(l.$slots,"default")])),_:3}),u(c,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:r((()=>[u(s,{class:"h-[80vh] flex flex-col"},{default:r((()=>[u(s,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:r((()=>[i(d(e.title),1)])),_:1}),u(s,{class:"flex-1 min-h-0"},{default:r((()=>[u(p,{class:"h-full","scroll-y":""},{default:r((()=>[u(s,{class:"p-[20rpx]"},{default:r((()=>[u(n,{content:e.content},null,8,["content"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),Ce="chooseFile:fail";function Ve(e,t){return e.tempFiles.forEach((e=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t)})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function Te(e={type:"file"}){return"image"===e.type?function(e){const{count:t,sizeType:l=["original","compressed"],sourceType:a,extension:s}=e;return new Promise(((e,o)=>{j({count:t,sizeType:l,sourceType:a,extension:s,success(t){e(Ve(t,"image"))},fail(e){o({errMsg:e.errMsg.replace("chooseImage:fail",Ce)})}})}))}(e):"video"===e.type?function(e){const{camera:t,compressed:l,maxDuration:a,sourceType:s,extension:o}=e;return new Promise(((e,n)=>{P({camera:t,compressed:l,maxDuration:a,sourceType:s,extension:o,success(t){const{tempFilePath:l,duration:a,size:s,height:o,width:n}=t;e(Ve({errMsg:"chooseVideo:ok",tempFilePaths:[l],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:l,size:s,type:t.tempFile&&t.tempFile.type||"",width:n,height:o,duration:a,fileType:"video"}]},"video"))},fail(e){n({errMsg:e.errMsg.replace("chooseVideo:fail",Ce)})}})}))}(e):function(e){const{count:t,extension:l}=e;return new Promise(((e,a)=>{let s=U;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(s=wx.chooseMessageFile),"function"!=typeof s)return a({errMsg:Ce+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});s({type:"all",count:t,extension:l,success(t){e(Ve(t))},fail(e){a({errMsg:e.errMsg.replace("chooseFile:fail",Ce)})}})}))}(e)}const $e=e=>{const t=e.lastIndexOf("."),l=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,l)}},Fe=e=>{const t=$e(e.name).ext.toLowerCase();return{name:e.name,uuid:e.uuid,extname:t||"",fileType:e.fileType,path:e.path,url:e.path,size:e.size,progress:0,status:"ready",errMsg:""}},je=re(t({__name:"file-upload",props:{modelValue:{type:[Array,Object],default:()=>[]},limit:{type:Number,default:10},disabled:{type:Boolean,default:!1},fileType:{type:String,default:"all"},returnType:{type:String,default:"array"},fileExtname:{type:Array,default:()=>[]},data:{type:Object,default:()=>({})},header:{type:Object,default:()=>({})},sizeType:{type:Array,default:()=>["original","compressed"]},sourceType:{type:Array,default:()=>["album","camera"]},showProgress:{type:Boolean,default:!0},maxCount:{type:Number,default:2},showFilesLists:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{expose:t,emit:l}){const f=e,h=a([]),y=T((()=>"object"===f.returnType?1:f.limit?f.limit:1)),g=async()=>{if(f.disabled)return;if(h.value.length>=Number(y.value)&&"array"===f.returnType&&y.value>1)return void F({title:`您最多选择 ${y.value} 个文件`,icon:"none"});const e=await Te({type:f.fileType,compressed:!1,sizeType:f.sizeType,sourceType:f.sourceType,extension:f.fileExtname.length?f.fileExtname:void 0,count:y.value-h.value.length});C(e)},C=async e=>{1===Number(y.value)&&(h.value=[]);const{files:t}=((e,t=[])=>{const l=[],a=[];return t.length?(e.tempFiles.forEach((e=>{const s=$e(e.name).ext.toLowerCase();-1!==t.indexOf(s)&&(a.push(e),l.push(e.path))})),a.length!==e.tempFiles.length&&F({title:`当前选择了${e.tempFiles.length}个文件 ，${e.tempFiles.length-a.length} 个文件格式不正确`,icon:"none",duration:5e3}),{filePaths:l,files:a}):{filePaths:e.tempFilePaths,files:e.tempFiles}})(e,f.fileExtname),l=[];for(let a=0;a<t.length&&!(y.value-h.value.length<=0);a++){const e=Fe(t[a]);h.value.push(e),l.push(e)}await $(l),V()},V=()=>{let e={};if("object"===f.returnType){const[t]=h.value;"success"===t.status&&(e={url:t.url,name:t.name})}else{e=h.value.filter((e=>"success"===e.status)).map((e=>({url:e.url,name:e.name})))}l("update:modelValue",e)},$=e=>{const t=e.length;let l=0,a=0;return new Promise((s=>{const o=async()=>{const n=l++,r=e[n],u=h.value.findIndex((e=>e.path===r.path));try{const{uri:e}=await A(f.fileType,{filePath:r.url,formData:f.data,header:f.header},(e=>{h.value[u].progress=e}));h.value[u].status="success",h.value[u].url=e}catch(i){h.value[u].errMsg=i,h.value[u].status="error"}a++,a!==t?l<t&&o():s()};for(let e=0;e<Math.min(t,f.maxCount);e++)o()}))},j=T((()=>{switch(f.fileType){case"image":return"上传图片";case"video":return"上传视频";default:return"上传文件"}})),P=e=>{if(!e.url)return;h.value.some((t=>t.url==e.url))||(e.name||(e.name=(e=>{const t=e.lastIndexOf("."),l=e.lastIndexOf("/");return-1===t?e:e.substring(l+1)})(e.url)),e.status="success",h.value.push({...e}))};s((()=>f.modelValue),(e=>{Array.isArray(e)?e.forEach((e=>{P(e)})):(e.url||(h.value=[]),P(e))}),{immediate:!0});return t({clear:()=>{h.value=[]}}),(t,l)=>{const a=_(x("u-icon"),L),s=m,f=R,C=_(x("u-line-progress"),fe);return o(),n(s,{class:I(["file-upload",{"file-upload--line":1===c(y)}])},{default:r((()=>[u(s,{class:"file-picker"},{default:r((()=>[u(s,{onClick:g},{default:r((()=>[k(t.$slots,"default",{},(()=>[u(s,{class:"file-button"},{default:r((()=>["file"===e.fileType?(o(),n(a,{key:0,name:"arrow-upward",size:32})):(o(),n(a,{key:1,name:"camera",size:32})),u(s,{class:"ml-[10rpx]"},{default:r((()=>[i(d(c(j)),1)])),_:1})])),_:1})]),!0)])),_:3})])),_:3}),e.showFilesLists?(o(),n(s,{key:0,class:"file-list"},{default:r((()=>[(o(!0),b(v,null,w(h.value,(l=>(o(),n(s,{class:"file-item relative",key:l.url},{default:r((()=>[u(s,{class:"text-primary mr-[10rpx] flex"},{default:r((()=>["file"==e.fileType?(o(),n(a,{key:0,size:32,name:"file-text"})):p("v-if",!0),"image"==e.fileType?(o(),n(f,{key:1,src:l.path||l.url,class:"w-[32rpx] h-[32rpx]"},null,8,["src"])):p("v-if",!0),"video"==e.fileType?(o(),n(f,{key:2,src:l.path||l.url,class:"w-[32rpx] h-[32rpx]"},null,8,["src"])):p("v-if",!0)])),_:2},1024),u(s,{class:"flex-1 min-w-0 mr-[20rpx]"},{default:r((()=>[u(s,{class:"line-clamp-1"},{default:r((()=>[i(d(l.name),1)])),_:2},1024)])),_:2},1024),e.disabled?p("v-if",!0):(o(),n(s,{key:0,onClick:z((e=>(e=>{const t=h.value.findIndex((t=>t.url===e));t>-1&&(h.value.splice(t,1),V())})(l.url)),["stop"]),class:"relative flex items-center z-10"},{default:r((()=>[u(a,{name:"close",size:28})])),_:2},1032,["onClick"])),e.showProgress&&l.progress>=0&&l.progress&&"success"!==l.status?(o(),n(s,{key:1,class:"absolute bottom-[0px] w-full left-0 flex"},{default:r((()=>[u(C,{class:"w-full h-auto",height:"6","show-percent":!1,"active-color":t.$theme.primaryColor,percent:l.progress},null,8,["active-color","percent"])])),_:2},1024)):p("v-if",!0),"error"===l.status?(o(),n(s,{key:2,class:"absolute inset-0 bg-[rgba(0,0,0,0.4)] flex items-center justify-center text-white"},{default:r((()=>[u(s,{onClick:e=>(async e=>{e.status="ready",e.progress=0,await $([{...e}])})(l)},{default:r((()=>[i(" 点击重试 ")])),_:2},1032,["onClick"])])),_:2},1024)):p("v-if",!0)])),_:2},1024)))),128))])),_:1})):p("v-if",!0)])),_:3},8,["class"])}}}),[["__scopeId","data-v-7556abda"]]),Pe=re(t({__name:"poster",props:{show:{type:Boolean},url:null,apikey:null,shareId:null},emits:["update:show","update"],setup(e,{emit:t}){const l=e,d=se(l,"show",t),p=T((()=>`${window.location.origin}/resource/image/other/ai_share_bg.png`)),h=a(p.value),y=a("快来扫码"),b=a("和我的智能体对话吧"),v=e=>{e.url&&(h.value=e.url)},w=T((()=>{let e=C.baseUrl;return e=`${location.origin}/`,`${e}chat/${l.apikey}`})),{lockFn:g,isLock:k}=me((async()=>{try{await J({id:l.shareId,url:h.value}),t("update");const e=await F();_e(e,"海报")}catch(e){return Promise.reject()}})),V=()=>{h.value=p.value},$=a(),F=()=>new Promise(((e,t)=>{var l;try{null==(l=$.value)||l.canvasToTempFilePathSync({fileType:"png",pathType:"url",quality:1,success:t=>{console.log(t),e(t.tempFilePath)},fail:e=>{t(e),O(),uni.$u.toast("调用海报错误",e)}})}catch(a){console.log(a),t(a),O(),uni.$u.toast("调用海报错误")}}));return s((()=>l.url),(e=>{h.value=e||p.value})),(e,t)=>{const l=m,a=_(x("l-painter-qrcode"),ie),s=_(x("l-painter-view"),de),p=_(x("l-painter-text"),pe),C=_(x("l-painter"),ce),T=_(x("file-upload"),je),F=_(x("u-input"),W),j=_(x("u-button"),q),P=_(x("u-popup"),te);return o(),n(P,{modelValue:c(d),"onUpdate:modelValue":t[2]||(t[2]=e=>f(d)?d.value=e:null),mode:"center",closeable:"","border-radius":"14"},{default:r((()=>[u(l,{class:"px-[40rpx]"},{default:r((()=>[u(l,{class:"py-[30rpx]"},{default:r((()=>[i(" 生成海报")])),_:1}),u(l,{style:{height:"700rpx"}},{default:r((()=>[u(l,{style:{transform:"scale(0.8) translateY(-14%)"}},{default:r((()=>[u(C,{ref_key:"painterRef",ref:$,isCanvasToTempFilePath:!1,"after-delay":100,css:"width: 570rpx;    \n                        height: 888rpx; \n                        "},{default:r((()=>[u(s,{css:`width: 570rpx;     \n                            display: flex;\n                            box-sizing: border-box;\n                            border-radius: 14rpx;\n                            height: 888rpx; \n                            background-image: url(${h.value});\n                            justify-content:center;\n                            align-items:center;\n                            `},{default:r((()=>[u(s,null,{default:r((()=>[u(s,{css:"\n                                        text-align: center;\n                                    "},{default:r((()=>[u(a,{css:"\n                                        width:280rpx;\n                                        height:280rpx;\n                                        box-sizing: border-box;\n                                        padding: 20rpx;\n                                        background-color: #FFFFFF;\n                                        border-radius:20rpx\n                                    ",text:c(w)},null,8,["text"])])),_:1}),u(s,{css:"\n                                        text-align: center;\n                                        margin-top: 30rpx\n                                    "},{default:r((()=>[u(p,{text:y.value,css:"\n                                            color: #FFFFFF;\n                                            text-align: center;\n                                            font-size: 32rpx;\n                                            font-weight: bold;\n                                        "},null,8,["text"])])),_:1}),u(s,null,{default:r((()=>[u(p,{text:b.value,css:"\n                                            color: #FFFFFF;\n                                            text-align: center;\n                                            font-size: 32rpx;\n                                            font-weight: bold;\n                                        "},null,8,["text"])])),_:1})])),_:1})])),_:1},8,["css"])])),_:1},512)])),_:1})])),_:1}),u(l,{class:"flex py-3 items-center"},{default:r((()=>[u(T,{returnType:"object",maxCount:1,fileType:"image",showFilesLists:!1,"onUpdate:modelValue":v},{default:r((()=>[u(l,{class:"text-primary"},{default:r((()=>[i("自定义背景图")])),_:1})])),_:1}),u(l,{class:"flex-1 ml-[20rpx]"},{default:r((()=>[u(l,{class:"text-primary",onClick:V},{default:r((()=>[i(" 使用默认图 ")])),_:1})])),_:1}),u(l,{class:"text-muted text-xs"},{default:r((()=>[i("尺寸：430*670")])),_:1})])),_:1}),u(l,{class:""},{default:r((()=>[u(l,{class:"flex items-center"},{default:r((()=>[u(l,{class:"text-tx-regular flex-none mr-2"},{default:r((()=>[i("标题")])),_:1}),u(l,{class:"flex-1"},{default:r((()=>[u(F,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:"请输入背景图地址",border:""},null,8,["modelValue"])])),_:1})])),_:1}),u(l,{class:"flex items-center"},{default:r((()=>[u(l,{class:"text-tx-regular flex-none mr-2"},{default:r((()=>[i("描述")])),_:1}),u(l,{class:"flex-1 py-3"},{default:r((()=>[u(F,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),placeholder:"请输入背景图地址",border:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(l,{class:"pb-[30rpx]"},{default:r((()=>[u(j,{type:"primary",class:"w-full",loading:c(k),onClick:c(g)},{default:r((()=>[i(" 保存 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-d76ddc2b"]]),Ue=re(t({__name:"release_robot",setup(t){const a=S(),s=l(),d=T((()=>a.query.key)),f=T((()=>a.query.id)),h=y({show:!1,apikey:""}),w=y({show:!1,apikey:""}),g=y({show:!1,url:"",apikey:"",shareId:""});return(t,l)=>{const a=_(x("page-meta"),e),y=_(x("u-icon"),L),k=m,C=_(x("u-button"),q);return o(),b(v,null,[u(a,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),u(k,{class:"h-full"},{default:r((()=>["web"===c(d)?(o(),n(ye,{key:0,ref_key:"releaseWebRef",ref:s,title:"发布为网页/朋友圈海报",type:1,"robot-id":c(f),"show-more-action":!0},{actions:r((({item:e})=>[u(k,{class:"flex items-center",onClick:t=>{return l=e,g.show=!0,g.url=l.share_bg,g.apikey=l.apikey,void(g.shareId=l.id);var l}},{default:r((()=>[u(y,{name:"photo",size:32}),u(k,{class:"ml-[10rpx]"},{default:r((()=>[i(" 生成海报 ")])),_:1})])),_:2},1032,["onClick"])])),_:1},8,["robot-id"])):p("v-if",!0),"js"===c(d)?(o(),n(ye,{key:1,title:"发布为JS",type:2,"robot-id":c(f)},{actions:r((({item:e})=>[u(k,{class:"flex items-center",onClick:t=>(e=>{h.show=!0,h.apikey=e.apikey})(e)},{default:r((()=>[u(y,{name:"eye",size:32}),u(k,{class:"ml-[10rpx]"},{default:r((()=>[i(" 查看代码 ")])),_:1})])),_:2},1032,["onClick"])])),_:1},8,["robot-id"])):p("v-if",!0),"oa"===c(d)?(o(),n(ye,{key:2,title:"发布为公众号",type:3,"robot-id":c(f)},{actions:r((({item:e})=>[u(k,{class:"flex items-center",onClick:t=>(e=>{w.show=!0,w.apikey=e.apikey})(e)},{default:r((()=>[u(y,{name:"chat",size:32}),u(k,{class:"ml-[10rpx]"},{default:r((()=>[i(" 公众号配置 ")])),_:1})])),_:2},1032,["onClick"])])),_:1},8,["robot-id"])):p("v-if",!0),"api"===c(d)?(o(),n(ve,{key:3,title:"发布为API",type:4,"robot-id":c(f)},{btn:r((()=>[u(k,{class:"mr-[20rpx] mt-[20rpx]"},{default:r((()=>[u(ke,{title:"API调用说明",content:"\n【接口地址】\n请求方式: POST\n接口地址: /api/v1/chat/completions\n调用示例: http(s)://yourdomain.com/api/v1/chat/completions\n\n【Body参数】\n``` json\n{\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"你要提问的问题\"\n        }\n    ]\n}\n```\n\n【Header参数】\nAuthorization: 此参数是发布渠道的 apikey (必须的)\n\n【PHP代码示例】\n``` php\npublic function chat()\n{\n    // 设置SSE响应\n    header('Access-Control-Allow-Origin: *');\n    header('Connection: keep-alive');\n    header('Content-Type: text/event-stream');\n    header('Cache-Control: no-cache');\n    header('X-Accel-Buffering: no');\n    \n    // 处理响应回调\n    $response = true;\n    $callback = function ($ch, $data) use (&$response, &$total) {\n        if (str_starts_with($data, 'data:')) {\n            echo $data;\n        }\n\n        if(!connection_aborted()){\n            return strlen($data);\n        } else {\n            return 1;\n        }\n    };\n\n    // 请求的参数\n    $data = [\n        'messages'  => [\n            ['role'=>'user', 'content'=>'你好吗?']\n        ]\n    ];\n\n    // 请求头参数\n    $headers  = [\n        'Accept: application/json',\n        'Content-Type: application/json',\n        'Authorization: web-8b582192d72b20931b9142155d1476cc7Fnmp' // 此参数是 apikey (必须的)\n    ];\n\n    // 发起接口请求\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, 'http(s)://【你自己的域名】/api/v1/chat/completions');\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);\n    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n    curl_setopt($ch, CURLOPT_POST, 1);\n    curl_setopt($ch, CURLOPT_TIMEOUT, 100);\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));\n    curl_setopt($ch, CURLOPT_WRITEFUNCTION, $callback);\n    curl_exec($ch);\n    curl_close($ch);\n\n    if(true !== $response){\n        throw new Exception($response);\n    }\n\n    exit();\n}\n```\n"},{default:r((()=>[u(C,{size:"medium"},{default:r((()=>[i(" 调用说明 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["robot-id"])):p("v-if",!0),"qwx"===c(d)?(o(),n(ve,{key:4,title:"发布为企业微信",type:5,"robot-id":c(f)},{btn:r((()=>[u(k,{class:"mr-[20rpx] mt-[20rpx]"},{default:r((()=>[u(ke,{title:"微信调用说明",content:'\n【接口地址】\n请求方式: POST\n接口地址: /api/v1/chat/completions\n调用示例: http(s)://yourdomain.com/api/v1/chat/completions\n\n【参数说明】\nopen_ai_api_key:  apiKey密钥\nopen_ai_api_base: 请求的域名\n\n```\n{\n  "channel_type": "wx", // 渠道类型: wx=个人微信的意思\n  "open_ai_api_key": "wx-f228079c92d0ab83548067bba13967d1xR1cu",          // 修改此处密钥\n  "open_ai_api_base": "http(s)://yourdomain.com/api/v1", // 修改此处域名\n    "model": "gpt-3.5-turbo",\n    "text_to_image": "dall-e-2",\n    "voice_to_text": "openai",\n    "text_to_voice": "openai",\n    "proxy": "",\n    "hot_reload": false,\n    "single_chat_prefix": [\n        "bot",\n        "@bot"\n    ],\n    "single_chat_reply_prefix": "[bot] ",\n    "group_chat_prefix": [\n        "@bot"\n    ]\n    ......\n}\n```\n\n【更详细的接入文档】\n请参考官方产品对接微信文档。\n'},{default:r((()=>[u(C,{size:"medium"},{default:r((()=>[i(" 调用说明 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["robot-id"])):p("v-if",!0),"yd"===c(d)?(o(),n(ve,{key:5,title:"影刀RPA",type:7,"robot-id":c(f)},{btn:r((()=>[u(k,{class:"mr-[20rpx] mt-[20rpx]"},{default:r((()=>[u(ke,{title:"影刀RPA调用说明",content:"\n【基础说明】\n通过影刀RPA在微信或企业微信中模拟人类操作鼠标键盘进行智能体聊天\n\n【影刀RPA】\n应用地址: https://api.winrobot360.com/redirect/robot/share?inviteKey=39426041fae2e52c\n\n【影刀RPA应用参数说明】\n接口url: http(s)://yourdomain.com/api/v1/chat/completions（调用示例）\n接口key: api密钥\n微信昵称：群聊中充当AI客服的微信名称\n\n【注意事项】\n1，只能打开微信或者企业微信中的一个（最小化也算打开）\n2，微信（或企业微信）窗口不能有遮挡，否则有可能发送不成功\n3，微信昵称前增加@，便于影刀RPA监听群聊回复，例如'@AI客服'\n4，企业微信需设置会话显示模式为消息气泡左对齐（设置-通用-会话显示模式-消息气泡左对齐）\n\n【更详细的接入文档】\n请参考官方产品对接影刀RPA文档。\n"},{default:r((()=>[u(C,{size:"medium"},{default:r((()=>[i(" 调用说明 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["robot-id"])):p("v-if",!0),u(we,{show:h.show,"onUpdate:show":l[0]||(l[0]=e=>h.show=e),apikey:h.apikey},null,8,["show","apikey"]),u(ge,{show:w.show,"onUpdate:show":l[1]||(l[1]=e=>w.show=e),apikey:w.apikey},null,8,["show","apikey"]),u(Pe,E(g,{show:g.show,"onUpdate:show":l[2]||(l[2]=e=>g.show=e),onUpdate:l[3]||(l[3]=e=>c(s).refresh())}),null,16,["show"])])),_:1})],64)}}}),[["__scopeId","data-v-dd5b2a39"]]);export{Ue as default};
