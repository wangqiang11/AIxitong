import{_ as e}from"./page-meta.d751427a.js";import{d as t,u as a,J as s,s as l,o as i,k as o,b as r,w as n,p as c,f as p,e as u,F as m,l as d,z as _,cL as f,r as g,a as y,h as x,j as v,c as b,g as k,n as h,t as w,m as F,cM as j,cN as z}from"./index-d6d2a33a.js";import{_ as C}from"./u-navbar.d70905ec.js";import{_ as T}from"./u-image.9574760c.js";import{_ as A}from"./u-badge.f9b9ebb9.js";import{_ as E}from"./z-paging.6c8c2edf.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.992584aa.js";const q=V(t({__name:"notification",setup(t){const V=_(),q=a(),U=s(),$=l([]),B={4:{name:"绘画",bg:"#EAF3FF",color:"#4A92FF",link:"/packages/pages/draw_list/draw_list"},5:{name:"音乐",bg:"#FFF1E4",color:"#FF8F1F",link:"/packages/pages/music_list/music_list"},6:{name:"视频",bg:"#FFF0F0",color:"#FA5151",link:"/packages/pages/video_list/video_list"},7:{name:"智能体",bg:"#E7FFF7",color:"#00B578",link:"/pages/kb/kb"}},I=async()=>{var e;await z(),null==(e=U.value)||e.reload()},J=async(e,t)=>{try{const{lists:a}=await f({page_no:e,page_size:t});U.value.complete(a)}catch(a){U.value.complete(!1),console.log("请求消息通知列表失败",a)}};return(t,a)=>{const s=g(y("page-meta"),e),l=x,_=g(y("u-navbar"),C),f=g(y("u-image"),T),z=v,L=g(y("u-badge"),A),M=g(y("z-paging"),E);return i(),o(m,null,[r(s,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),r(z,{class:"notification flex flex-col min-h-0"},{default:n((()=>[r(_,{"is-fixed":!1,"back-text":`消息通知(${$.value.length})`},{right:n((()=>[r(l,{class:"text-xs mr-4 text-primary",onClick:c(I,["stop"])},{default:n((()=>[p(" 全部已读 ")])),_:1},8,["onClick"])])),_:1},8,["back-text"]),r(z,{class:"notification__main flex-1 h-full"},{default:n((()=>[r(M,{ref_key:"paging",ref:U,modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value=e),onQuery:J,fixed:!1,height:"100%","empty-view-text":"暂无消息通知～","empty-view-img":u("/mobile/assets/notice-08bb9c51.png"),"empty-view-style":{"margin-top":"100px"},"empty-view-center":!1,"auto-clean-list-when-reload":!1,"show-loading-more-no-more-view":!1,"auto-scroll-to-top-when-reload":!1,"empty-view-img-style":{width:"360rpx",height:"360rpx"}},{default:n((()=>[(i(!0),o(m,null,d($.value,(e=>(i(),b(z,{class:"p-[20rpx] flex",key:e.id,onClick:c((t=>(async e=>{var t;3===e.notice_type?V.navigateTo({path:"/packages/pages/robot_info/robot_info",query:{id:e.robot_id,type:"dialogue",dialogue:"record"}}):4===e.notice_type?V.navigateTo({path:B[e.notice_type].link,query:{model:e.model}}):V.navigateTo(B[e.notice_type].link),e.read||(await j({id:e.id}),null==(t=U.value)||t.reload())})(e)),["stop"])},{default:n((()=>[r(z,{class:"flex-none w-[74rpx] h-[74rpx] relative"},{default:n((()=>[k("          notice_type： 3-机器人，4-绘画，5-音乐，6-视频        "),3===e.notice_type?(i(),b(f,{key:0,width:84,height:84,src:e.avatar,"border-radius":"50%"},null,8,["src"])):(i(),b(z,{key:1,class:"flex justify-center items-center w-[84rpx] h-[84rpx] text-sm rounded-full",style:h({background:B[e.notice_type].bg,color:B[e.notice_type].color})},{default:n((()=>[p(w(B[e.notice_type].name),1)])),_:2},1032,["style"])),e.read?k("v-if",!0):(i(),b(L,{key:2,"is-dot":!0,type:"error",offset:[-8,-8]}))])),_:2},1024),r(z,{class:"flex-1 border-bottom pb-[20rpx] ml-[24rpx]"},{default:n((()=>[r(z,{class:"flex justify-between items-center"},{default:n((()=>[e.nickname?(i(),b(z,{key:0,class:"line-clamp-1 w-[300rpx] text-main text-base"},{default:n((()=>[p(w(e.nickname),1)])),_:2},1024)):k("v-if",!0),r(l,{class:"text-muted text-sm"},{default:n((()=>[p(w(e.create_time),1)])),_:2},1024)])),_:2},1024),r(z,{class:"mt-[20rpx] text-main text-base"},{default:n((()=>[k("          notice_type： 3-机器人，4-绘画，5-音乐，6-视频        "),3===e.notice_type?(i(),o(m,{key:0},[r(l,{class:"text-muted"},{default:n((()=>[p("在")])),_:1}),p(" "+w(e.robot)+" ",1),r(l,{class:"text-muted"},{default:n((()=>[p("反馈：")])),_:1}),p(" "+w(e.content),1)],64)):(i(),o(m,{key:1},[r(l,{class:"text-muted"},{default:n((()=>[p("分享")])),_:1}),p(" "+w(e.records_name)+" ",1),r(l,{class:"text-muted"},{default:n((()=>[p("至广场")])),_:1}),r(l,{class:F([1===e.verify_status?"text-success":"text-error"])},{default:n((()=>[p(w(1===e.verify_status?"审核成功":"审核失败"),1)])),_:2},1032,["class"]),2==e.verify_status?(i(),b(l,{key:0},{default:n((()=>[p("，原因： "+w(e.verify_result),1)])),_:2},1024)):k("v-if",!0),1==e.verify_status&&e.balance>0?(i(),b(l,{key:1},{default:n((()=>[p(" ， 获得 "+w(e.balance)+" "+w(u(q).getTokenUnit),1)])),_:2},1024)):k("v-if",!0)],64))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue","empty-view-img"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-b455dbce"]]);export{q as default};
