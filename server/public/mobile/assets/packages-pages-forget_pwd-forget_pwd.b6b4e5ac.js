import{_ as e}from"./page-meta.d751427a.js";import{d as a,s as l,J as o,K as s,C as t,$ as r,o as u,k as d,b as m,w as i,f as n,aH as c,aI as p,e as f,m as b,t as _,g as x,F as w,a3 as v,a2 as g,a1 as h,z as j,cn as y,r as V,a as $,j as B,h as C}from"./index-d6d2a33a.js";import{_ as P}from"./u-input.e3cf3beb.js";import{_ as k}from"./u-form-item.36bcbf1f.js";import{_ as D}from"./u-verification-code.38feb014.js";import{_ as S}from"./u-form.f207500c.js";import{_ as U}from"./u-button.97a3d07f.js";import{F}from"./floating-menu.85d77f2f.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.992584aa.js";import"./emitter.1571a5d9.js";const R=I(a({__name:"forget_pwd",setup(a){l(0);const I=o(),R=l(""),A=s({email:"",mobile:"",password:"",scene:"2",code:"",password_confirm:""}),N=t((()=>uni.$u.test.mobile(A.mobile))),O=t((()=>uni.$u.test.email(A.email))),W=t((()=>"1"==A.scene)),q=t((()=>"2"==A.scene)),z=e=>{R.value=e},G=async()=>{var e,a;if(null==(e=I.value)?void 0:e.canGetCode)try{W.value?await J():await H(),uni.$u.toast("发送成功"),null==(a=I.value)||a.start()}catch(l){console.log("发送验证码失败=>",l)}},H=async()=>(console.log(O.value),A.email?O.value?void(await v({scene:g.FIND_PASSWORD,email:A.email})):(uni.$u.toast("请输入正确的邮箱地址"),Promise.reject()):(uni.$u.toast("请输入邮箱"),Promise.reject())),J=async()=>A.mobile?O.value?(uni.$u.toast("请输入正确的手机号"),Promise.reject()):void(await h({scene:g.FIND_PASSWORD,mobile:A.mobile})):(uni.$u.toast("请输入手机号"),Promise.reject()),K=j(),L=async()=>!A.mobile&&W.value?uni.$u.toast("请输入手机号码"):!A.email&&q.value?uni.$u.toast("请输入邮箱"):A.password?A.password_confirm?A.password!=A.password_confirm?uni.$u.toast("两次输入的密码不一致"):(await y(A),void setTimeout((()=>{K.navigateBack()}),1500)):uni.$u.toast("请输入确认密码"):uni.$u.toast("请输入密码");return r((({type:e})=>{A.scene=e})),(a,l)=>{const o=V($("page-meta"),e),s=B,t=V($("u-input"),P),r=V($("u-form-item"),k),v=V($("u-verification-code"),D),g=C,h=V($("u-form"),S),j=V($("u-button"),U);return u(),d(w,null,[m(o,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),m(s,{class:"register bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:i((()=>[m(s,{class:"w-full"},{default:i((()=>[m(s,{class:"pb-[40rpx]"},{default:i((()=>[m(s,{class:"text-2xl font-medium"},{default:i((()=>[n("忘记登录密码")])),_:1})])),_:1}),m(h,{borderBottom:"","label-width":150},{default:i((()=>[c(m(r,{label:"手机号",borderBottom:""},{default:i((()=>[m(t,{class:"flex-1",modelValue:A.mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>A.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1},512),[[p,f(W)]]),c(m(r,{label:"邮箱",borderBottom:""},{default:i((()=>[m(t,{class:"flex-1",modelValue:A.email,"onUpdate:modelValue":l[1]||(l[1]=e=>A.email=e),border:!1,placeholder:"请输入邮箱账号"},null,8,["modelValue"])])),_:1},512),[[p,f(q)]]),m(r,{label:"验证码",borderBottom:""},{default:i((()=>[m(t,{class:"flex-1",modelValue:A.code,"onUpdate:modelValue":l[2]||(l[2]=e=>A.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),m(s,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:G},{default:i((()=>[m(v,{ref_key:"uCodeRef",ref:I,seconds:60,onChange:z,"change-text":"x秒"},null,512),m(g,{class:b(["text-muted",{"text-primary":f(N)&&f(W)||f(O)&&f(q)}])},{default:i((()=>[n(_(R.value),1)])),_:1},8,["class"])])),_:1})])),_:1}),m(r,{label:"新密码",borderBottom:""},{default:i((()=>[m(t,{class:"flex-1",type:"password",modelValue:A.password,"onUpdate:modelValue":l[3]||(l[3]=e=>A.password=e),placeholder:"6-20位数字+字母或符号组合",border:!1},null,8,["modelValue"])])),_:1}),m(r,{label:"确认密码",borderBottom:""},{default:i((()=>[m(t,{class:"flex-1",type:"password",modelValue:A.password_confirm,"onUpdate:modelValue":l[4]||(l[4]=e=>A.password_confirm=e),placeholder:"再次输入新密码",border:!1},null,8,["modelValue"])])),_:1})])),_:1}),m(s,{class:"mt-[100rpx]"},{default:i((()=>[m(j,{type:"primary",shape:"circle",onClick:L},{default:i((()=>[n(" 确定 ")])),_:1})])),_:1})])),_:1}),x("    悬浮菜单    "),m(F)])),_:1})],64)}}}),[["__scopeId","data-v-180dd6c1"]]);export{R as default};
