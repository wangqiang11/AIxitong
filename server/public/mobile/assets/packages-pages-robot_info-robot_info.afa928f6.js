import{_ as e}from"./page-meta.d751427a.js";import{aR as l,aS as t,aT as a,aU as s,aV as o,d as u,s as r,o as i,c as d,w as n,b as c,e as p,f as m,t as f,g as _,r as x,a as b,j as y,u as h,p as g,h as w,J as v,x as k,P as V,D as A,K as C,B as I,k as U,l as j,F as S,m as W,n as B,ay as F,aH as E,aI as T,z as q,V as G,ae as z,i as R,C as H,U as Q,$ as J,aF as N}from"./index-d6d2a33a.js";import{_ as D}from"./u-navbar.d70905ec.js";import{_ as L}from"./u-tabs.f14aec5a.js";import{_ as O}from"./u-form.f207500c.js";import{_ as P}from"./u-button.97a3d07f.js";import{_ as K}from"./app-upload.vue_vue_type_script_setup_true_lang.13b099e0.js";import{_ as Z}from"./u-form-item.36bcbf1f.js";import{_ as M}from"./u-input.e3cf3beb.js";import{_ as Y}from"./app-select.66776d41.js";import{_ as X}from"./u-switch.4b65a60a.js";import{u as $,a as ee}from"./index.3dd6f2ef.js";import{g as le}from"./kb.9f6bd434.js";import{a as te,h as ae,n as se,o as oe,q as ue,s as re,t as ie}from"./robot.627d8f7e.js";import{_ as de}from"./u-icon.992584aa.js";import{_ as ne}from"./model-picker.594cca17.js";import{_ as ce}from"./app-slider.f52d5aca.js";import{_ as pe,a as me}from"./u-radio-group.5e4decfb.js";import{_ as fe}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as _e,a as xe,b as be,c as ye}from"./uni-table.15cf415a.js";import{l as he}from"./lodash.2de268df.js";import{_ as ge}from"./u-popup.21776ef7.js";import{_ as we}from"./u-avatar.b94cdf10.js";import{g as ve}from"./digital.91569775.js";import{_ as ke}from"./u-image.9574760c.js";import{_ as Ve}from"./u-read-more.48be6c35.js";import{_ as Ae}from"./z-paging.6c8c2edf.js";import{_ as Ce}from"./ua-markdown.e9ea1a15.js";import{_ as Ie}from"./app-upload-file.vue_vue_type_script_setup_true_lang.1eadfa3b.js";import{T as Ue}from"./text-item.bd4ac6fd.js";import{D as je}from"./default_avatar.84088887.js";import{c as Se}from"./cloneDeep.8a0e8caf.js";import"./u-badge.f9b9ebb9.js";import"./uv-popup.0236847c.js";import"./mixin.91a2f735.js";import"./isString.6d1f126a.js";import"./emitter.1571a5d9.js";import"./u-tag.fd761889.js";import"./u-search.7e682473.js";import"./u-checkbox.0fdc3635.js";import"./u-loading.d153dd1a.js";import"./index.22b2ad12.js";import"./u-collapse.5c69f838.js";import"./uni-icons.0b553b27.js";import"./_commonjsHelpers.157f59fb.js";import"./katex.37f36714.js";import"./mp-html.318bb55d.js";import"./uni-file-picker.87d7f36a.js";import"./index.ccff8ee2.js";import"./icon_copy.36709540.js";import"./chat.d9a8f946.js";import"./howler.bdae6f69.js";import"./useCopy.4954d67d.js";function We(e){return"symbol"==typeof e||l(e)&&"[object Symbol]"==t(e)}var Be=a?a.prototype:void 0,Fe=Be?Be.toString:void 0;function Ee(e){if("string"==typeof e)return e;if(s(e))return function(e,l){for(var t=-1,a=null==e?0:e.length,s=Array(a);++t<a;)s[t]=l(e[t],t,e);return s}(e,Ee)+"";if(We(e))return Fe?Fe.call(e):"";var l=e+"";return"0"==l&&1/e==-1/0?"-0":l}var Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qe=/^\w*$/;function Ge(e,l){if("function"!=typeof e||null!=l&&"function"!=typeof l)throw new TypeError("Expected a function");var t=function(){var a=arguments,s=l?l.apply(this,a):a[0],o=t.cache;if(o.has(s))return o.get(s);var u=e.apply(this,a);return t.cache=o.set(s,u)||o,u};return t.cache=new(Ge.Cache||o),t}Ge.Cache=o;var ze,Re,He,Qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Je=/\\(\\)?/g,Ne=(ze=function(e){var l=[];return 46===e.charCodeAt(0)&&l.push(""),e.replace(Qe,(function(e,t,a,s){l.push(a?s.replace(Je,"$1"):t||e)})),l},Re=Ge(ze,(function(e){return 500===He.size&&He.clear(),e})),He=Re.cache,Re);const De=Ne;function Le(e,l){return s(e)?e:function(e,l){if(s(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!We(e))||qe.test(e)||!Te.test(e)||null!=l&&e in Object(l)}(e,l)?[e]:De(function(e){return null==e?"":Ee(e)}(e))}function Oe(e){if("string"==typeof e||We(e))return e;var l=e+"";return"0"==l&&1/e==-1/0?"-0":l}function Pe(e,l,t){var a=null==e?void 0:function(e,l){for(var t=0,a=(l=Le(l,e)).length;null!=e&&t<a;)e=e[Oe(l[t++])];return t&&t==a?e:void 0}(e,l);return void 0===a?t:a}const Ke=u({__name:"base-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const t=$(e,"modelValue",l),a=r([]),s=r([]);return(async()=>{const{lists:e=[]}=await le({page_type:0});a.value=e})(),(async()=>{s.value=await te(),s.value.unshift({id:0,name:"全部"})})(),(e,l)=>{const s=x(b("app-upload"),K),o=y,u=x(b("u-form-item"),Z),r=x(b("u-input"),M),h=x(b("app-select"),Y),g=x(b("u-switch"),X);return i(),d(o,null,{default:n((()=>[c(u,{label:"智能体图标",prop:"image",required:""},{default:n((()=>[c(o,{class:"mx-[-10rpx] flex-1 min-w-0"},{default:n((()=>[c(s,{modelValue:p(t).image,"onUpdate:modelValue":l[0]||(l[0]=e=>p(t).image=e)},null,8,["modelValue"])])),_:1})])),_:1}),c(u,{label:"智能体名称",prop:"name",required:""},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(r,{modelValue:p(t).name,"onUpdate:modelValue":l[1]||(l[1]=e=>p(t).name=e),placeholder:"给你的智能体取个响亮的名字",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(u,{label:"智能体简介",prop:"intro"},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(r,{modelValue:p(t).intro,"onUpdate:modelValue":l[2]||(l[2]=e=>p(t).intro=e),type:"textarea",height:150,placeholder:"请简单描述下给你的智能体",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(u,{label:"关联知识库",prop:"kb_ids"},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(h,{modelValue:p(t).kb_ids,"onUpdate:modelValue":l[3]||(l[3]=e=>p(t).kb_ids=e),popupTitle:"关联知识库选择",dataLists:a.value,placeholder:"请选择",value:"id",type:"checkbox"},{label:n((({item:e})=>[m(f(e.name),1)])),_:1},8,["modelValue","dataLists"])])),_:1})])),_:1}),c(u,{label:"角色设定",prop:"roles_prompt"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(r,{modelValue:p(t).roles_prompt,"onUpdate:modelValue":l[4]||(l[4]=e=>p(t).roles_prompt=e),type:"textarea",height:200,placeholder:"请输入角色设定",border:!0},null,8,["modelValue"]),c(o,{class:"text-muted"},{default:n((()=>[m(" 引导应用的聊天方向，该内容会被固定在上下文的开头。 ")])),_:1})])),_:1})])),_:1}),c(u,{label:"对话图标",prop:"icons",required:""},{default:n((()=>[c(o,{class:"mx-[-10rpx] flex-1 min-w-0"},{default:n((()=>[c(s,{modelValue:p(t).icons,"onUpdate:modelValue":l[5]||(l[5]=e=>p(t).icons=e)},null,8,["modelValue"]),c(o,{class:"text-muted mx-[10rpx]"},{default:n((()=>[m(" 不设置的话，对话图标默认拿智能体封面 ")])),_:1})])),_:1})])),_:1}),c(u,{label:"对话上下文","label-position":"left","label-width":"150",prop:"is_show_context"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(o,{class:"flex justify-end items-center"},{default:n((()=>[c(g,{modelValue:p(t).is_show_context,"onUpdate:modelValue":l[6]||(l[6]=e=>p(t).is_show_context=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),c(o,{class:"ml-[12rpx]"},{default:n((()=>[m(f(1==p(t).is_show_context?"显示":"隐藏"),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m("在前台显示对话上下文，默认显示")])),_:1}),c(u,{label:"引用内容","label-position":"left","label-width":"150",prop:"is_show_quote"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(o,{class:"flex justify-end items-center"},{default:n((()=>[c(g,{modelValue:p(t).is_show_quote,"onUpdate:modelValue":l[7]||(l[7]=e=>p(t).is_show_quote=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),c(o,{class:"ml-[12rpx]"},{default:n((()=>[m(f(1==p(t).is_show_quote?"显示":"隐藏"),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m("在前台显示引用内容，默认显示")])),_:1}),c(u,{label:"问答相似问题推荐",prop:"related_issues_num"},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(r,{modelValue:p(t).related_issues_num,"onUpdate:modelValue":l[8]||(l[8]=e=>p(t).related_issues_num=e),placeholder:"给你的智能体取个响亮的名字",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m("作用于智能体对话问题推荐，填0对话问题推荐不生效")])),_:1}),_("        <u-form-item"),_('            label="公开智能体"'),_('            label-position="left"'),_('            label-width="150"'),_('            prop="is_public"'),_("        >"),_('            <view class="flex-1">'),_('                <view class="flex justify-end items-center">'),_("                    <u-switch"),_('                        v-model="formData.is_public"'),_('                        :active-value="1"'),_('                        :inactive-value="0"'),_('                        :size="40"'),_("                    ></u-switch>"),_('                    <view class="ml-[12rpx]">'),_("                        {{ formData.is_public == 1 ? '公开' : '私有' }}"),_("                    </view>"),_("                </view>"),_("            </view>"),_("        </u-form-item>"),_('        <view class="text-muted">公开智能体后，其他用户都会看到</view>'),_("        <u-form-item"),_('            v-if="formData.is_public == 1"'),_('            label="智能体分类"'),_('            label-width="150"'),_('            prop="cate_id"'),_("            required"),_("        >"),_('            <view class="flex-1">'),_("                <app-select"),_('                    v-model="formData.cate_id"'),_('                    popupTitle="请选择智能体分类"'),_('                    :dataLists="robotCategory"'),_('                    placeholder="请选择"'),_('                    value="id"'),_('                    type="radio"'),_("                >"),_("                </app-select>"),_('                <view class="text-muted">给公开的智能体分类</view>'),_("            </view>"),_("        </u-form-item>")])),_:1})}}}),Ze=fe(u({__name:"search-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,a=h(),s=$(t,"modelValue",l);return(e,l)=>{const t=w,o=y,u=x(b("u-icon"),de),r=x(b("model-picker"),ne),h=x(b("u-form-item"),Z),v=x(b("app-slider"),ce),k=x(b("u-radio"),pe),V=x(b("u-radio-group"),me),A=x(b("u-input"),M),C=x(b("u-switch"),X);return i(),d(o,null,{default:n((()=>[c(h,{label:"AI模型",prop:"model_sub_id",required:""},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(r,{setDefault:!1,id:p(s).model_id,"onUpdate:id":l[1]||(l[1]=e=>p(s).model_id=e),sub_id:p(s).model_sub_id,"onUpdate:sub_id":l[2]||(l[2]=e=>p(s).model_sub_id=e)},{default:n((({item:e})=>[c(o,{class:"input flex"},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(o,{class:"line-clamp-1"},{default:n((()=>[e.alias?(i(),d(t,{key:0},{default:n((()=>[m(f(e.alias),1)])),_:2},1024)):(i(),d(t,{key:1,class:"text-[#888]"},{default:n((()=>[m("请选择")])),_:1})),e.alias&&"0"==e.price?(i(),d(t,{key:2,class:"text-muted"},{default:n((()=>[m(" (免费) ")])),_:1})):e.alias?(i(),d(t,{key:3,class:"text-muted"},{default:n((()=>[m(" ("+f(`消耗${e.price}${p(a).getTokenUnit}/1千字符`)+") ",1)])),_:2},1024)):_("v-if",!0)])),_:2},1024)])),_:2},1024),p(s).model_id?(i(),d(o,{key:0,class:"text-muted flex flex-none mx-[20rpx]",onClick:l[0]||(l[0]=g((e=>{p(s).model_id="",p(s).model_sub_id=""}),["stop"]))},{default:n((()=>[c(u,{name:"close-circle"})])),_:1})):_("v-if",!0),c(o,{class:"text-muted flex"},{default:n((()=>[c(u,{name:"arrow-down"})])),_:1})])),_:2},1024)])),_:1},8,["id","sub_id"])])),_:1})])),_:1}),c(h,{label:"相似度",prop:"search_similarity"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(o,null,{default:n((()=>[c(v,{min:0,max:1,step:.001,activeColor:e.$theme.primaryColor,modelValue:p(s).search_similarity,"onUpdate:modelValue":l[3]||(l[3]=e=>p(s).search_similarity=e)},null,8,["step","activeColor","modelValue"])])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m(" 输入0-1之间的数值，支持3位小数点；高相似度推荐设置0.8以上 ")])),_:1})])),_:1})])),_:1}),c(h,{label:"单次搜索数量",prop:"search_limits"},{default:n((()=>[c(o,{class:"flex-1 w-full"},{default:n((()=>[c(o,null,{default:n((()=>[c(v,{min:0,max:20,activeColor:e.$theme.primaryColor,modelValue:p(s).search_limits,"onUpdate:modelValue":l[4]||(l[4]=e=>p(s).search_limits=e)},null,8,["activeColor","modelValue"])])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m(" 默认设置为5，请输入0-20之间的整数数值 ")])),_:1})])),_:1})])),_:1}),c(h,{label:"空搜索回复","label-position":"left","label-width":"150"},{default:n((()=>[c(o,{class:"flex-1 flex justify-end"},{default:n((()=>[c(V,{modelValue:p(s).search_empty_type,"onUpdate:modelValue":l[5]||(l[5]=e=>p(s).search_empty_type=e)},{default:n((()=>[c(k,{name:1},{default:n((()=>[m(" AI回复 ")])),_:1}),c(k,{name:2},{default:n((()=>[m(" 自定义回复 ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),2===p(s).search_empty_type?(i(),d(h,{key:0},{default:n((()=>[c(o,{class:"flex-1 min-w-0"},{default:n((()=>[c(A,{modelValue:p(s).search_empty_text,"onUpdate:modelValue":l[6]||(l[6]=e=>p(s).search_empty_text=e),type:"textarea",height:200,placeholder:"请输入回复内容，当搜索匹配不上内容时，直接回复填写的内容",border:!0},null,8,["modelValue"])])),_:1})])),_:1})):_("v-if",!0),c(h,{label:"上下文",prop:"context_num"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(o,null,{default:n((()=>[c(v,{min:0,max:5,step:1,activeColor:e.$theme.primaryColor,modelValue:p(s).context_num,"onUpdate:modelValue":l[7]||(l[7]=e=>p(s).context_num=e)},null,8,["activeColor","modelValue"])])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m(" 生成文本的最大长度，取值范围为0~5之间的整数 ")])),_:1})])),_:1})])),_:1}),c(h,{label:"文件解析","label-position":"left","label-width":"200",prop:"support_file"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(o,{class:"flex justify-end items-center"},{default:n((()=>[c(C,{modelValue:p(s).support_file,"onUpdate:modelValue":l[8]||(l[8]=e=>p(s).support_file=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),c(o,{class:"ml-[12rpx]"},{default:n((()=>[m(f(1==p(s).support_file?"启用":"关闭"),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(o,{class:"text-muted"},{default:n((()=>[m("开启后对话时支持上传文件，需消耗大量token，按需启用")])),_:1})])),_:1})}}}),[["__scopeId","data-v-56bf71a8"]]),Me=u({__name:"add-menus",props:{show:{type:Boolean},type:null,data:null},emits:["update:show","update:data","confirm"],setup(e,{emit:l}){const t=e,a=v(),{show:s,data:o}=ee(t,l),u={keyword:[{required:!0,message:"请输入关键词"}]},r=()=>{a.value.validate((e=>{e&&(l("confirm",he.cloneDeep(o.value)),s.value=!1)}))};return k(s,(e=>{e&&setTimeout((()=>{a.value.setRules(u)}))})),(e,l)=>{const t=y,u=x(b("u-input"),M),f=x(b("u-form-item"),Z),_=x(b("app-upload"),K),h=x(b("u-form"),O),g=A,w=x(b("u-button"),P),v=x(b("u-popup"),ge);return i(),d(v,{modelValue:p(s),"onUpdate:modelValue":l[3]||(l[3]=e=>V(s)?s.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:n((()=>[c(t,{class:"h-[80vh] flex flex-col"},{default:n((()=>[c(t,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:n((()=>[m(" 添加菜单 ")])),_:1}),c(t,{class:"flex-1 min-h-0"},{default:n((()=>[c(g,{class:"h-full","scroll-y":""},{default:n((()=>[c(t,{class:"p-[20rpx]"},{default:n((()=>[c(h,{model:p(o),ref_key:"uFormRef",ref:a,"label-position":"top","border-bottom":!1},{default:n((()=>[c(f,{label:"关键词",prop:"keyword",required:""},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(u,{modelValue:p(o).keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>p(o).keyword=e),placeholder:"请输入关键词",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{label:"回复内容",prop:"content"},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(u,{modelValue:p(o).content,"onUpdate:modelValue":l[1]||(l[1]=e=>p(o).content=e),placeholder:"请输入回复内容，10000个字以内",border:!0,type:"textarea",height:300},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{label:"上传图片"},{default:n((()=>[c(t,{class:"mx-[-10rpx] flex-1 min-w-0"},{default:n((()=>[c(_,{modelValue:p(o).images,"onUpdate:modelValue":l[2]||(l[2]=e=>p(o).images=e),"max-count":9,"return-type":"string-array",disabled:!1},null,8,["modelValue"]),c(t,{class:"text-muted"},{default:n((()=>[m(" 最多支持上传 9 张图 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),c(t,{class:"flex p-[20rpx]"},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(w,{type:"primary",onClick:r},{default:n((()=>[m(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),Ye=u({__name:"interface-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const t=$(e,"modelValue",l),a=C({show:!1,type:"add",data:{},index:0}),s=(e="add",l={images:[],content:"",keyword:""})=>{var s;a.show=!0,a.type=e,a.data=he.cloneDeep(l),a.index=null==(s=t.value.menus)?void 0:s.indexOf(l)},o=e=>{var l,s,o;switch(a.type){case"add":(null==(l=t.value.menus)?void 0:l.length)<3&&(null==(s=t.value.menus)||s.push(e));break;case"edit":-1!==a.index&&(null==(o=t.value.menus)||o.splice(a.index,1,e))}};return(e,l)=>{const u=x(b("u-input"),M),r=y,h=x(b("u-form-item"),Z),g=x(b("uni-th"),_e),w=x(b("uni-tr"),xe),v=x(b("uni-td"),be),k=x(b("uni-table"),ye),V=x(b("u-button"),P);return i(),d(r,null,{default:n((()=>[c(h,{label:"欢迎语",prop:"welcome_introducer"},{default:n((()=>[c(r,{class:"flex-1"},{default:n((()=>[c(u,{modelValue:p(t).welcome_introducer,"onUpdate:modelValue":l[0]||(l[0]=e=>p(t).welcome_introducer=e),type:"textarea",height:200,placeholder:"",border:!0},null,8,["modelValue"]),c(r,{class:"text-muted"},{default:n((()=>[m(" 打开聊天窗口后会主动发送，添加双井号可添加提问示例，例如：#帮我写一则关于xxx的文案# "),I("br"),m(" 多个问题请用回车换行 ")])),_:1})])),_:1})])),_:1}),c(h,{label:"底部标识",prop:"copyright"},{default:n((()=>[c(r,{class:"flex-1"},{default:n((()=>[c(u,{modelValue:p(t).copyright,"onUpdate:modelValue":l[1]||(l[1]=e=>p(t).copyright=e),placeholder:"",border:!0},null,8,["modelValue"]),c(r,{class:"text-muted"},{default:n((()=>[m(" 不填写不显示 ")])),_:1})])),_:1})])),_:1}),c(h,{label:"菜单设置"},{default:n((()=>[c(r,{class:"flex-1 min-w-0"},{default:n((()=>[c(k,{ref:"table",stripe:"",emptyText:"暂无更多数据"},{default:n((()=>[c(w,null,{default:n((()=>[c(g,{width:"100"},{default:n((()=>[m("关键词")])),_:1}),c(g,{width:"100"},{default:n((()=>[m("回复内容")])),_:1}),c(g,{width:"80"},{default:n((()=>[m("操作")])),_:1})])),_:1}),(i(!0),U(S,null,j(p(t).menus,((e,l)=>(i(),d(w,{key:l},{default:n((()=>[c(v,null,{default:n((()=>[m(f(e.keyword),1)])),_:2},1024),c(v,null,{default:n((()=>[c(r,{class:"flex"},{default:n((()=>{var l,t;return[e.content?(i(),d(r,{key:0},{default:n((()=>[m(" 文字 ")])),_:1})):_("v-if",!0),e.content&&(null==(l=e.images)?void 0:l.length)?(i(),d(r,{key:1},{default:n((()=>[m(" + ")])),_:1})):_("v-if",!0),(null==(t=e.images)?void 0:t.length)?(i(),d(r,{key:2},{default:n((()=>[m(" 图片 ")])),_:1})):_("v-if",!0)]})),_:2},1024)])),_:2},1024),c(v,null,{default:n((()=>[c(r,{class:"flex"},{default:n((()=>[c(r,{class:"text-primary mr-[20rpx]",onClick:l=>s("edit",e)},{default:n((()=>[m(" 编辑 ")])),_:2},1032,["onClick"]),c(r,{class:"text-error",onClick:e=>(e=>{var l;null==(l=t.value.menus)||l.splice(e,1)})(l)},{default:n((()=>[m(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},512),c(r,{class:"inline-flex mt-[20rpx]"},{default:n((()=>[c(V,{type:"primary",size:"medium",disabled:p(t).menus.length>=3,onClick:l[2]||(l[2]=e=>s())},{default:n((()=>[m(" +添加菜单 ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),c(Me,{show:a.show,"onUpdate:show":l[3]||(l[3]=e=>a.show=e),type:a.type,data:a.data,"onUpdate:data":l[4]||(l[4]=e=>a.data=e),onConfirm:o},null,8,["show","type","data"])])),_:1})}}}),Xe=u({__name:"digital-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const t=$(e,"modelValue",l),a=r([]);return(async()=>{const e=await ve({page_type:0});a.value=e.lists||[]})(),(e,l)=>{const s=x(b("u-switch"),X),o=y,u=x(b("u-form-item"),Z),r=x(b("u-avatar"),we);return i(),d(o,null,{default:n((()=>[c(u,{label:"启用形象","label-position":"left","label-width":"150",prop:"is_digital"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(o,{class:"flex justify-end items-center"},{default:n((()=>[c(s,{modelValue:p(t).is_digital,"onUpdate:modelValue":l[0]||(l[0]=e=>p(t).is_digital=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),c(o,{class:"ml-[12rpx]"},{default:n((()=>[m(f(1==p(t).is_digital?"开启":"关闭"),1)])),_:1})])),_:1})])),_:1})])),_:1}),_(' <u-form-item label="形象背景色" prop="digital_bg">\n            <color-picker v-model="formData.digital_bg" />\n        </u-form-item> '),1==p(t).is_digital?(i(),d(u,{key:0,label:"选择形象",prop:"digital_id",required:""},{default:n((()=>[c(o,{class:"flex-1 w-full flex flex-wrap mx-[-10rpx]"},{default:n((()=>[(i(!0),U(S,null,j(a.value,(e=>(i(),d(o,{class:"w-[50%] p-[10rpx]",key:e.id},{default:n((()=>[c(o,{class:W(["rounded-[10rpx] h-[100rpx] flex items-center px-[30rpx] border border-solid border-light",{"!bg-primary-light-7 !border-primary !text-primary":e.id==p(t).digital_id}]),onClick:l=>p(t).digital_id=e.id},{default:n((()=>[c(r,{size:64,src:e.avatar},null,8,["src"]),c(o,{class:"line-clamp-2 ml-[14rpx]"},{default:n((()=>[m(f(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):_("v-if",!0)])),_:1})}}});const $e=fe({name:"u-alert-tips",emits:["click","close"],props:{title:{type:String,default:""},type:{type:String,default:"warning"},description:{type:String,default:""},closeAble:{type:Boolean,default:!1},closeText:{type:String,default:""},showIcon:{type:Boolean,default:!1},color:{type:String,default:""},bgColor:{type:String,default:""},borderColor:{type:String,default:""},show:{type:Boolean,default:!0},icon:{type:String,default:""},iconStyle:{type:Object,default:()=>({})},titleStyle:{type:Object,default:()=>({})},descStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{uTitleStyle(){let e={};return e.fontWeight=this.description?500:"normal",this.$u.deepMerge(e,this.titleStyle)},uIcon(){return this.icon?this.icon:this.$u.type2icon(this.type)},uIconType(){return Object.keys(this.iconStyle).length?"":this.type}},methods:{click(){this.$emit("click")},close(){this.$emit("close")}}},[["render",function(e,l,t,a,s,o){const u=x(b("u-icon"),de),r=y,p=w;return t.show?(i(),d(r,{key:0,class:W(["u-alert-tips",[t.show?"":"u-close-alert-tips",t.type?"u-alert-tips--bg--"+t.type+"-light":"",t.type?"u-alert-tips--border--"+t.type+"-disabled":""]]),style:B({backgroundColor:t.bgColor,borderColor:t.borderColor})},{default:n((()=>[c(r,{class:"u-icon-wrap"},{default:n((()=>[t.showIcon?(i(),d(u,{key:0,name:o.uIcon,size:t.description?40:32,class:"u-icon",color:o.uIconType,"custom-style":t.iconStyle},null,8,["name","size","color","custom-style"])):_("v-if",!0)])),_:1}),c(r,{class:"u-alert-content",onClick:g(o.click,["stop"])},{default:n((()=>[c(r,{class:"u-alert-title",style:B([o.uTitleStyle])},{default:n((()=>[m(f(t.title),1)])),_:1},8,["style"]),t.description?(i(),d(r,{key:0,class:"u-alert-desc",style:B([t.descStyle])},{default:n((()=>[m(f(t.description),1)])),_:1},8,["style"])):_("v-if",!0)])),_:1},8,["onClick"]),c(r,{class:"u-icon-wrap"},{default:n((()=>[t.closeAble&&!t.closeText?(i(),d(u,{key:0,onClick:o.close,hoverClass:"u-type-error-hover-color",name:"close",color:"#c0c4cc",size:22,class:"u-close-icon",style:B({top:t.description?"18rpx":"24rpx"})},null,8,["onClick","style"])):_("v-if",!0)])),_:1}),t.closeAble&&t.closeText?(i(),d(p,{key:0,class:"u-close-text",style:B({top:t.description?"18rpx":"24rpx"})},{default:n((()=>[m(f(t.closeText),1)])),_:1},8,["style"])):_("v-if",!0)])),_:1},8,["class","style"])):_("v-if",!0)}],["__scopeId","data-v-49c3e924"]]),el=u({__name:"flow-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const t=$(e,"modelValue",l);return k((()=>t.value.flow_status),(e=>{1!==e||t.value.flow_config||(t.value.flow_config={workflow_id:"",bot_id:""})}),{immediate:!0}),(e,l)=>{const a=x(b("u-alert-tips"),$e),s=x(b("u-switch"),X),o=y,u=x(b("u-form-item"),Z),r=x(b("u-input"),M);return i(),d(o,null,{default:n((()=>[c(a,{type:"warning",title:"重要提示",style:{"white-space":"pre-line"},description:"1. coze工作流配置地址：https://www.coze.cn （工作空间->资源库）\n            2. 启用后对话时将使用coze工作流作为响应结果，相似问题输出仍使用AI模型输出\n            3. coze工作流设置时输入变量名需为“input”,输出变量名需为“output_text”或“output_image”\n            4. 输出变量“output_text”对应为输出文本内容，输出变量“output_image”对应为输出图片资源，目前仅支持单图"}),c(u,{label:"启用 coze 工作流","label-position":"top","label-width":"150",prop:"flow_status"},{default:n((()=>[c(o,{class:"flex-1 flex items-center"},{default:n((()=>[c(s,{modelValue:p(t).flow_status,"onUpdate:modelValue":l[0]||(l[0]=e=>p(t).flow_status=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),c(o,{class:"ml-[12rpx]"},{default:n((()=>[m(f(1==p(t).flow_status?"开启":"关闭"),1)])),_:1})])),_:1})])),_:1}),1==p(t).flow_status?(i(),U(S,{key:0},[c(u,{label:"应用 ID","label-position":"top","label-width":"150",prop:"flow_config.app_id"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(r,{modelValue:p(t).flow_config.app_id,"onUpdate:modelValue":l[1]||(l[1]=e=>p(t).flow_config.app_id=e),placeholder:"请输入应用 ID",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(u,{label:"工作流 ID","label-position":"top","label-width":"150",prop:"flow_config.workflow_id"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(r,{modelValue:p(t).flow_config.workflow_id,"onUpdate:modelValue":l[2]||(l[2]=e=>p(t).flow_config.workflow_id=e),placeholder:"请输入工作流 ID",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(u,{label:"智能体 ID","label-position":"top","label-width":"150",prop:"flow_config.bot_id"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(r,{modelValue:p(t).flow_config.bot_id,"onUpdate:modelValue":l[3]||(l[3]=e=>p(t).flow_config.bot_id=e),placeholder:"请输入智能体 ID",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(u,{label:"token","label-position":"top","label-width":"150",prop:"flow_config.api_token"},{default:n((()=>[c(o,{class:"flex-1"},{default:n((()=>[c(r,{modelValue:p(t).flow_config.api_token,"onUpdate:modelValue":l[4]||(l[4]=e=>p(t).flow_config.api_token=e),placeholder:"请输入token",border:!0},null,8,["modelValue"])])),_:1})])),_:1})],64)):_("v-if",!0)])),_:1})}}}),ll=r(),tl=r({kb_ids:[],icons:"",image:"",name:"",intro:"",model_id:"",model_sub_id:"",roles_prompt:"",search_similarity:.8,search_limits:3,search_empty_type:1,search_empty_text:"",welcome_introducer:"",is_show_context:1,is_show_quote:1,is_enable:1,menus:[]}),al=r(""),sl=r(""),ol=()=>({robotInfo:tl,currentTab:sl,setRobotId:e=>{ll.value=e},getRobotInfo:async()=>{tl.value=await ae({id:ll.value}),al.value=tl.value.name},reset:()=>{ll.value=0,tl.value={kb_ids:[],icons:"",image:"",name:"",intro:"",model_id:"",model_sub_id:"",roles_prompt:"",search_similarity:.8,search_limits:3,search_empty_type:1,search_empty_text:"",welcome_introducer:"",is_show_context:1,is_show_quote:1,is_enable:1,menus:[]},al.value="",sl.value=""},robotName:al}),ul=fe(u({__name:"index",setup(e){const l=q(),t=C({list:[{name:"基本设置",type:"base"},{name:"AI模型/搜索配置",type:"search"},{name:"界面设置",type:"interface"},{name:"形象设置",type:"digital"},{name:"工作流设置",type:"flow"}],current:"base"}),a=r(0),s=v(),{robotInfo:o,getRobotInfo:u}=ol(),h={image:[{required:!0,message:"请选择智能体图标"}],name:[{required:!0,message:"请输入智能体名称",trigger:["change"]}],model_sub_id:[{required:!0,message:"请选择AI模型"}],cate_id:[{required:!0,message:"请选择智能体分类"}],digital_id:[{required:!0,message:"请选择形象",validator:(e,l,t)=>l>0}]},g=()=>{s.value.validate((async e=>{e&&(await se(o.value),u(),setTimeout((()=>{l.navigateBack()}),1e3))}))};return F((()=>{setTimeout((()=>{s.value.setRules(h)}),10)})),(e,l)=>{const u=y,r=A,w=x(b("u-form"),O),v=x(b("u-button"),P);return i(),d(u,{class:"h-full pt-[20rpx]"},{default:n((()=>[c(u,{class:"h-full bg-white flex flex-col py-[20rpx]"},{default:n((()=>[c(r,{class:"flex mb-[20rpx] px-[20rpx] whitespace-nowrap","scroll-x":""},{default:n((()=>[c(u,{class:"bg-page mr-8 p-[8rpx] inline-block rounded-[8rpx]"},{default:n((()=>[(i(!0),U(S,null,j(t.list,(e=>(i(),d(u,{key:e.type,class:W(["px-[14rpx] inline-block py-[9rpx] rounded-[8rpx]",{"tab-active":e.type==t.current}]),onClick:l=>{return s=e.type,t.current=s,a.value=10,void G((()=>{a.value=0}));var s}},{default:n((()=>[m(f(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),c(u,{class:"flex-1 min-h-0 relative z-10"},{default:n((()=>[c(r,{class:"h-full","scroll-y":"","scroll-top":a.value},{default:n((()=>[c(u,{class:"px-[20rpx]"},{default:n((()=>[c(w,{model:p(o),ref_key:"uFormRef",ref:s,rules:h,"label-position":"top","border-bottom":!1},{default:n((()=>[E(c(Ke,{modelValue:p(o),"onUpdate:modelValue":l[0]||(l[0]=e=>V(o)?o.value=e:null)},null,8,["modelValue"]),[[T,"base"==t.current]]),E(c(Ze,{modelValue:p(o),"onUpdate:modelValue":l[1]||(l[1]=e=>V(o)?o.value=e:null)},null,8,["modelValue"]),[[T,"search"==t.current]]),"interface"==t.current?(i(),d(Ye,{key:0,modelValue:p(o),"onUpdate:modelValue":l[2]||(l[2]=e=>V(o)?o.value=e:null)},null,8,["modelValue"])):_("v-if",!0),E(c(Xe,{modelValue:p(o),"onUpdate:modelValue":l[3]||(l[3]=e=>V(o)?o.value=e:null)},null,8,["modelValue"]),[[T,"digital"==t.current]]),E(c(el,{modelValue:p(o),"onUpdate:modelValue":l[4]||(l[4]=e=>V(o)?o.value=e:null)},null,8,["modelValue"]),[[T,"flow"==t.current]])])),_:1},8,["model"])])),_:1})])),_:1},8,["scroll-top"])])),_:1}),c(u,{class:"px-[20rpx] pt-[20rpx]"},{default:n((()=>[c(u,{class:"flex-1"},{default:n((()=>[c(v,{type:"primary","custom-style":{"z-index":0},onClick:g},{default:n((()=>[m(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-3f922d51"]]),rl=u({__name:"index",setup(e){const l=C([{name:"WebAPP",lists:[{name:"网页",icon:"/mobile/assets/light_web-26dd5d21.svg",desc:"用户在此链接可以直接和您的智能体聊天",key:"web",disabled:!1},{name:"JS嵌入",icon:"/mobile/assets/light_js-b05585b4.svg",desc:"可添加到网站的任何位置，将此 iframe 添加到 html 代码中",key:"js",disabled:!1},{name:"微信公众号",icon:"/mobile/assets/light_public_account-88baaf7d.svg",desc:"可在微信公众号后台配置，提供智能体服务",key:"oa",disabled:!1},{name:"朋友圈海报",icon:"/mobile/assets/light_wx-e023cbb5.svg",desc:"用户扫码后，可直接和您的智能体聊天",key:"web",disabled:!1}]},{name:"API对接",lists:[{name:"API调用",icon:"/mobile/assets/light_api-9396e20f.svg",desc:"用户在此链接可以直接和您的智能体聊天",key:"api",disabled:!1},{name:"企业微信",icon:"/mobile/assets/light_enterprise_wechat-c64eea98.svg",desc:"用户在此链接可以直接和您的智能体聊天",key:"qwx",disabled:!1},{name:"影刀RPA",icon:"/mobile/assets/light_yd-4d222062.svg",desc:"通过影刀RPA在微信或企业微信中模拟人类操作鼠标键盘进行智能体聊天",key:"yd",disabled:!1}]}]),t=q(),a=z();return(e,s)=>{const o=y,u=R,r=A;return i(),d(o,{class:"h-full"},{default:n((()=>[c(r,{class:"h-full","scroll-y":""},{default:n((()=>[c(o,{class:"mt-[20rpx] bg-white p-[20rpx]"},{default:n((()=>[(i(!0),U(S,null,j(l,((e,l)=>(i(),d(o,{key:l},{default:n((()=>[c(o,{class:"text-xl font-medium mb-[20rpx]"},{default:n((()=>[m(f(e.name),1)])),_:2},1024),c(o,{class:"flex flex-wrap justify-stretch mx-[-20rpx]"},{default:n((()=>[(i(!0),U(S,null,j(e.lists,((e,l)=>(i(),d(o,{key:l,class:"px-[20rpx] w-full mb-[20rpx]"},{default:n((()=>[c(o,{class:"bg-[#FBFBFC] border border-solid border-light h-full flex items-center rounded-lg px-[40rpx] py-[30rpx] cursor-pointer",onClick:l=>(e=>{e.disabled||t.navigateTo({path:"/packages/pages/release_robot/release_robot",query:{key:e.key,id:a.query.id}})})(e)},{default:n((()=>[_(" eslint-disable-next-line vue/html-self-closing "),c(u,{src:e.icon,class:"w-[88rpx] h-[88rpx] flex-none"},null,8,["src"]),c(o,{class:"ml-[30rpx]"},{default:n((()=>[c(o,{class:"text-tx-primary text-xl font-medium flex items-center"},{default:n((()=>[m(f(e.name)+" ",1),e.disabled?(i(),d(o,{key:0,class:"bg-[#EFF0F1] text-tx-regular text-xs px-[20rpx] py-[4rpx] rounded ml-[20rpx]"},{default:n((()=>[m(" 即将开放 ")])),_:1})):_("v-if",!0)])),_:2},1024),c(o,{class:"text-tx-secondary mt-[12rpx]"},{default:n((()=>[m(f(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}}),il=u({__name:"data",setup(e){const l=r([{title:"今日对话次数",key:"robot.todayChatCount"},{title:"昨日对话次数",key:"robot.yesterdayChatCount"},{title:"本周对话次数",key:"robot.weekChatCount"},{title:"全部对话次数",key:"robot.wholeChatCount"},{title:"今日访问用户/人",key:"visitor.todayVisitorCount"},{title:"昨日访问用户/人",key:"visitor.yesterdayVisitorCount"},{title:"本周访问用户/人",key:"visitor.weekVisitorCount"},{title:"全部用户/人",key:"visitor.wholeVisitorCount"}]),t=z(),a=r([]);return(async()=>{a.value=await oe({robot_id:t.query.id})})(),(e,t)=>{const s=y,o=A;return i(),d(s,{class:"h-full w-full overflow-hidden"},{default:n((()=>[c(o,{class:"h-full","scroll-y":""},{default:n((()=>[c(s,{class:"flex flex-wrap px-[20rpx] mx-[-15rpx]"},{default:n((()=>[(i(!0),U(S,null,j(l.value,(e=>(i(),d(s,{class:"w-[50%] px-[15rpx] mb-[30rpx]",key:e.key},{default:n((()=>[c(s,{class:"bg-[#fafafc] flex flex-col items-center rounded-[20rpx] px-[20rpx] py-[30rpx] border border-solid border-light h-full"},{default:n((()=>[c(s,{class:"text-lg"},{default:n((()=>[m(f(e.title),1)])),_:2},1024),c(s,{class:"text-[60rpx] mt-[24rpx]"},{default:n((()=>[m(f(p(Pe)(a.value,e.key)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}}),dl=u({__name:"reply-popup",props:{show:{type:Boolean},content:null},emits:["update:show"],setup(e,{emit:l}){const t=e,{show:a}=ee(t,l);return(l,t)=>{const s=y,o=x(b("ua-markdown"),Ce),u=A,r=x(b("u-popup"),ge);return i(),d(r,{modelValue:p(a),"onUpdate:modelValue":t[0]||(t[0]=e=>V(a)?a.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:n((()=>[c(s,{class:"h-[80vh] flex flex-col"},{default:n((()=>[c(s,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:n((()=>[m(" 查看回复 ")])),_:1}),c(s,{class:"flex-1 min-h-0"},{default:n((()=>[c(u,{class:"h-full","scroll-y":""},{default:n((()=>[c(s,{class:"p-[20rpx]"},{default:n((()=>[c(o,{content:e.content},null,8,["content"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),nl=u({__name:"correct-popup",props:{show:{type:Boolean},data:null},emits:["update:show"],setup(e,{emit:l}){const t=e,a=v(),{show:s}=ee(t,l),o=r({kb_id:"",ask:"",reply:"",images:[],files:[],video:[]}),u=H({get:()=>o.value.images.map((({url:e})=>e)),set(e){o.value.images=e.map((e=>({url:e})))}}),f=r([]);(async()=>{const{lists:e=[]}=await le({page_type:0});f.value=e})();const _={kb_id:[{required:!0,message:"请选择知识库"}],ask:[{required:!0,message:"请输入问题"}],reply:[{required:!0,message:"请输入答案"}]},h=()=>{a.value.validate((async e=>{e&&(await ue(o.value),setTimeout((()=>{s.value=!1}),1e3))}))};return k(s,(e=>{e&&setTimeout((()=>{a.value.setRules(_)}))})),k((()=>t.data),(e=>{Object.assign(o.value,he.cloneDeep(e))})),(e,l)=>{const t=y,r=x(b("app-select"),Y),_=x(b("u-form-item"),Z),g=x(b("u-input"),M),w=x(b("app-upload"),K),v=x(b("app-upload-file"),Ie),k=x(b("u-form"),O),C=A,I=x(b("u-button"),P),U=x(b("u-popup"),ge);return i(),d(U,{modelValue:p(s),"onUpdate:modelValue":l[6]||(l[6]=e=>V(s)?s.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:n((()=>[c(t,{class:"h-[80vh] flex flex-col"},{default:n((()=>[c(t,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:n((()=>[m(" 修正问答 ")])),_:1}),c(t,{class:"flex-1 min-h-0"},{default:n((()=>[c(C,{class:"h-full","scroll-y":""},{default:n((()=>[c(t,{class:"p-[20rpx]"},{default:n((()=>[c(k,{model:o.value,ref_key:"uFormRef",ref:a,"label-position":"top","border-bottom":!1},{default:n((()=>[c(_,{label:"选择知识库",prop:"kb_id",required:""},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(r,{modelValue:o.value.kb_id,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.kb_id=e),popupTitle:"知识库选择",dataLists:f.value,placeholder:"请选择知识库",value:"id"},null,8,["modelValue","dataLists"])])),_:1})])),_:1}),c(_,{label:"提问问题",prop:"ask",required:""},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(g,{modelValue:o.value.ask,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.ask=e),placeholder:"请输入问题",border:!0,type:"textarea",height:200},null,8,["modelValue"])])),_:1})])),_:1}),c(_,{label:"问题答案",prop:"reply",required:""},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(g,{modelValue:o.value.reply,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.reply=e),placeholder:"请输入答案",border:!0,type:"textarea",height:300},null,8,["modelValue"])])),_:1})])),_:1}),c(_,{label:"上传图片"},{default:n((()=>[c(t,{class:"flex-1 min-w-0"},{default:n((()=>[c(w,{modelValue:p(u),"onUpdate:modelValue":l[3]||(l[3]=e=>V(u)?u.value=e:null),"max-count":9},null,8,["modelValue"]),c(t,{class:"text-muted"},{default:n((()=>[m(" 最多支持上传 9 张图 ")])),_:1})])),_:1})])),_:1}),c(_,{label:"上传视频"},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(w,{maxCount:1,modelValue:o.value.video,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.video=e),returnType:"object-array",accept:"video"},null,8,["modelValue"]),c(t,{class:"text-info"},{default:n((()=>[m(" 格式为MP4，大小不能超过20M ")])),_:1})])),_:1})])),_:1}),c(_,{label:"上传附件"},{default:n((()=>[c(t,{class:"flex-1 min-w-0"},{default:n((()=>[c(v,{modelValue:o.value.files,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.files=e),fileExtname:["doc","docx","pdf","xls","xlsx"]},null,8,["modelValue"]),c(t,{class:"text-muted"},{default:n((()=>[m(" 支持上传PDF、docx、excel、等文件格式 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),c(t,{class:"flex p-[20rpx]"},{default:n((()=>[c(t,{class:"flex-1"},{default:n((()=>[c(I,{type:"primary",onClick:h},{default:n((()=>[m(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),cl=fe(u({__name:"record",props:{isFeedback:{type:[String,Number],default:-1}},setup(e){const l=e,t=z(),a=C({show:!1,content:""}),s=C({show:!1,data:{}}),o=H((()=>t.query.id)),u=r([]),h=v();k((()=>l.isFeedback),(e=>{var l;null==(l=h.value)||l.reload()}));const g=async(e,t)=>{var a,s;try{const{lists:s}=await re({page_no:e,page_size:t,robot_id:o.value,is_feedback:l.isFeedback});s.forEach((e=>{e.show=!1})),null==(a=h.value)||a.complete(s)}catch(u){null==(s=h.value)||s.complete(!1)}},w=e=>{u.value[e].show=!0},V=e=>{u.value[e].show=!1};return(e,l)=>{const t=x(b("u-image"),ke),r=y,v=R,k=x(b("u-read-more"),Ve),A=x(b("u-icon"),de),C=x(b("z-paging"),Ae);return i(),U(S,null,[c(r,{class:"h-full flex flex-col"},{default:n((()=>[c(r,{class:"flex-1 min-h-0"},{default:n((()=>[c(C,{ref_key:"pagingRef",ref:h,modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),"auto-clean-list-when-reload":!1,onQuery:g,fixed:!1},{default:n((()=>[c(r,{class:"px-[30rpx] pt-[10rpx]"},{default:n((()=>[(i(!0),U(S,null,j(u.value,((e,l)=>(i(),d(r,{class:"data-item mb-[30rpx]",key:e.id},{default:n((()=>[c(k,{ref_for:!0,ref:"readmoreRef","close-text":"展开全部",index:l,toggle:!0,"text-indent":"0","show-height":"350",onOpen:w,onClose:V},{default:n((()=>[c(r,{class:"p-[20rpx]"},{default:n((()=>[c(r,{class:"flex mb-[20rpx] items-center justify-between"},{default:n((()=>[c(r,{class:"flex items-center"},{default:n((()=>[c(r,{class:"flex items-center flex-none"},{default:n((()=>[c(t,{width:"44",height:"44",src:e.user.avatar||p(je),"border-radius":"50%"},null,8,["src"])])),_:2},1024),c(r,{class:"ml-2 w-[300rpx] line-clamp-1"},{default:n((()=>{var l;return[m(f(null==(l=e.user)?void 0:l.nickname),1)]})),_:2},1024)])),_:2},1024),c(r,{class:"ml-2 text-xs text-muted"},{default:n((()=>[m(f(e.create_time),1)])),_:2},1024)])),_:2},1024),c(r,{class:"flex mb-[20rpx] items-center"},{default:n((()=>[c(r,{class:"flex items-center flex-none"},{default:n((()=>[c(v,{class:"w-[44rpx] h-[44rpx]",src:"data:image/png;base64,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"})])),_:1}),c(r,{class:"line-clamp-2 ml-2"},{default:n((()=>[m(f(e.ask),1)])),_:2},1024)])),_:2},1024),c(r,{class:"flex mb-[20rpx] items-stretch"},{default:n((()=>[c(r,{class:"flex flex-none pt-1"},{default:n((()=>[c(v,{class:"w-[44rpx] h-[44rpx]",src:"data:image/png;base64,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"})])),_:1}),c(r,{class:"ml-2"},{default:n((()=>[e.show?(i(),d(Ue,{key:0,"is-markdown":!0,content:e.reply},null,8,["content"])):(i(),d(r,{key:1,class:"line-clamp-2"},{default:n((()=>[m(f(e.reply),1)])),_:2},1024))])),_:2},1024),_(' \n                                        @load="parseLoaded" ')])),_:2},1024),c(r,{class:"flex items-center"},{default:n((()=>[c(r,{class:"flex items-center flex-none"},{default:n((()=>[c(v,{class:"w-[44rpx] h-[44rpx]",src:"data:image/png;base64,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"})])),_:1}),c(r,{class:"ml-2"},{default:n((()=>[e.show?(i(),d(Ue,{key:0,"is-markdown":!0,content:e.feedback},null,8,["content"])):(i(),d(r,{key:1,class:"line-clamp-2"},{default:n((()=>[m(f(e.feedback||"-"),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["index"]),c(r,{class:"border-t border-0 border-solid border-light p-[25rpx] flex justify-around"},{default:n((()=>[c(r,{class:"flex items-center",onClick:l=>{return t=e,s.show=!0,void(s.data=Se(t));var t}},{default:n((()=>[c(A,{name:"edit-pen",size:32}),c(r,{class:"ml-[10rpx]"},{default:n((()=>[m(" 修正 ")])),_:1})])),_:2},1032,["onClick"]),_(' <view\n                                class="flex items-center"\n                                @click="showReply(item.reply)"\n                            >\n                                <u-icon name="eye" :size="32" />\n                                <view class="ml-[10rpx]"> 查看回复 </view>\n                            </view> '),c(r,{class:"flex items-center",onClick:l=>(async e=>{var l;const{cancel:t}=await Q({title:"温馨提示",content:"确定要删除？"});t||(await ie({ids:e,robot_id:o.value}),null==(l=h.value)||l.refresh())})([e.id])},{default:n((()=>[c(A,{name:"trash",size:32}),c(r,{class:"ml-[10rpx]"},{default:n((()=>[m(" 删除 ")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(dl,{show:a.show,"onUpdate:show":l[1]||(l[1]=e=>a.show=e),content:a.content},null,8,["show","content"]),c(nl,{show:s.show,"onUpdate:show":l[2]||(l[2]=e=>s.show=e),data:s.data},null,8,["show","data"])],64)}}}),[["__scopeId","data-v-0c4c2ba3"]]),pl=fe(u({options:{virtualHost:!0,styleIsolation:"shared"},externalClasses:["class"],__name:"index",setup(e){const l=z(),t=r(-1),a=v([{id:-1,alias:"全部"},{id:0,alias:"未反馈"},{id:1,alias:"已反馈"}]),s=C({list:[{name:"对话数据",type:"data"},{name:"对话记录",type:"record"}],current:"data"});return F((()=>{const e=l.query.dialogue;e&&(s.current=e)})),(e,l)=>{const o=y,u=x(b("app-select"),Y);return i(),d(o,{class:"h-full pt-[20rpx]"},{default:n((()=>[c(o,{class:"h-full bg-white flex flex-col pt-[20rpx]"},{default:n((()=>[c(o,{class:"flex justify-between items-center mb-[20rpx] px-[20rpx]"},{default:n((()=>[c(o,{class:"bg-page flex p-[8rpx] rounded-[16rpx] flex-none"},{default:n((()=>[(i(!0),U(S,null,j(s.list,(e=>(i(),d(o,{key:e.type,class:W(["px-[34rpx] py-[12rpx] rounded-[16rpx]",{"tab-active":e.type==s.current}]),onClick:l=>{return t=e.type,void(s.current=t);var t}},{default:n((()=>[m(f(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),E(c(o,{class:"w-[250rpx] app-select-style"},{default:n((()=>[c(u,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),popupTitle:"筛选反馈",dataLists:p(a),placeholder:"全部",closeable:!1,name:"alias",value:"id"},null,8,["modelValue","dataLists"])])),_:1},512),[[T,"record"==s.current]])])),_:1}),c(o,{class:"flex-1 min-h-0"},{default:n((()=>["data"==s.current?(i(),d(il,{key:0})):_("v-if",!0),"record"==s.current?(i(),d(cl,{key:1,isFeedback:t.value},null,8,["isFeedback"])):_("v-if",!0)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a568fbbb"]]),ml=fe(u({__name:"robot_info",setup(l){const t=z(),a=q(),{getRobotInfo:s,currentTab:o,setRobotId:u,reset:r,robotName:m}=ol(),f=C({list:[{name:"智能体设置",type:"setting"},{name:"发布智能体",type:"release"},{name:"对话数据",type:"dialogue"},{name:"开始对话",type:"begin"}],current:0}),h=H((()=>f.list[f.current].type)),g=e=>{f.current=e,"begin"!=h.value?o.value=h.value:a.navigateTo({path:"/packages/pages/robot_chat/robot_chat",query:{id:t.query.id}})};return u(t.query.id),J((()=>{s()})),N((()=>{r()})),k((()=>t.query.type),(e=>{const l=f.list.findIndex((l=>l.type==e||l.type==o.value));setTimeout((()=>{f.current=l>-1?l:0}),10)}),{immediate:!0}),(l,t)=>{const a=x(b("page-meta"),e),s=x(b("u-navbar"),D),o=x(b("u-tabs"),L),u=y;return i(),U(S,null,[c(a,{"page-style":l.$theme.pageStyle},null,8,["page-style"]),c(u,{class:"h-full flex flex-col"},{default:n((()=>[c(s,{title:p(m),"title-color":"#333","title-bold":!0},null,8,["title"]),c(o,{"is-scroll":!1,ref:"tabs","active-color":l.$theme.primaryColor,list:f.list,current:f.current,onChange:g},null,8,["active-color","list","current"]),c(u,{class:"flex-1 min-h-0"},{default:n((()=>["setting"==p(h)?(i(),d(ul,{key:0})):_("v-if",!0),"release"==p(h)?(i(),d(rl,{key:1})):_("v-if",!0),"dialogue"==p(h)?(i(),d(pl,{key:2})):_("v-if",!0)])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-7f41c920"]]);export{ml as default};
