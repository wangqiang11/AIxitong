import{_ as e}from"./page-meta.d751427a.js";import{d as a,u as l,s,C as t,o as u,k as o,b as p,w as r,e as d,c as n,F as c,f as i,t as f,g as m,r as _,a as x,j as y,a8 as v,h as g,cJ as b,cK as j}from"./index-d6d2a33a.js";import{_ as k}from"./u-input.e3cf3beb.js";import{_ as h}from"./u-empty.a728d8d9.js";import{_ as w}from"./u-popup.21776ef7.js";import{_ as C}from"./tabbar.vue_vue_type_script_setup_true_lang.e2e30d1a.js";import{u as V}from"./useCopy.4954d67d.js";import{u as F}from"./useLockFn.3b1f86f9.js";import{F as L}from"./floating-menu.85d77f2f.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.992584aa.js";import"./emitter.1571a5d9.js";import"./u-badge.f9b9ebb9.js";const U=I(a({__name:"redeem_code",setup(a){const I=l(),U=s(""),$=s(!1),D=s({content:"",failure_time:"",id:"",sn:"",type:"",type_desc:"",valid_time:""}),J=t((()=>I.getCardCodeConfig)),{isLock:K,lockFn:S}=F((async()=>{try{const e=await b({sn:U.value});$.value=!0,D.value=e}catch(e){U.value="",console.log("查询卡密失败=>",e)}})),{isLock:Z,lockFn:q}=F((async()=>{try{await j({sn:U.value}),$.value=!1,uni.$u.toast("兑换成功"),U.value=""}catch(e){console.log("兑换卡密失败=>",e)}}));return(a,l)=>{const s=_(x("page-meta"),e),t=y,b=_(x("u-input"),k),j=v,F=_(x("u-empty"),h),I=g,z=_(x("u-popup"),w),A=_(x("tabbar"),C);return u(),o(c,null,[p(s,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),p(t,{class:"redeem-code p-[24rpx]"},{default:r((()=>[d(J).is_open?(u(),n(t,{key:0,class:"px-[30rpx] py-[50rpx] bg-white rounded-[16rpx]"},{default:r((()=>[d(J).is_show?(u(),o(c,{key:0},[p(t,null,{default:r((()=>[i("购买链接")])),_:1}),p(t,{class:"flex justify-between pb-6"},{default:r((()=>[p(t,{class:"line-clamp-1 leading-[40rpx] w-[520rpx]"},{default:r((()=>[i(f(d(J).buy_site),1)])),_:1}),p(t,{class:"flex-none text-primary",onClick:l[0]||(l[0]=e=>(e=>{const{copy:a}=V();a(e)})(d(J).buy_site))},{default:r((()=>[i(" 复制 ")])),_:1})])),_:1})],64)):m("v-if",!0),p(t,{class:"py-[10rpx] px-[20rpx] bg-[#f5f5f5] rounded"},{default:r((()=>[p(b,{modelValue:U.value,"onUpdate:modelValue":l[1]||(l[1]=e=>U.value=e),placeholder:"请输入卡密编号"},null,8,["modelValue"])])),_:1}),p(t,{class:"w-full mt-[30px]"},{default:r((()=>[p(j,{class:"entry-btn",loading:d(K),onClick:d(S)},{default:r((()=>[i(" 查询 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})):(u(),n(t,{key:1,class:"py-[400rpx]"},{default:r((()=>[p(F,{text:"功能未开启"})])),_:1})),p(z,{modelValue:$.value,"onUpdate:modelValue":l[2]||(l[2]=e=>$.value=e),mode:"center","border-radius":"24"},{default:r((()=>[p(t,{class:"w-[690rpx] px-[24rpx]"},{default:r((()=>[p(t,{class:"p-[30rpx] text-lg text-center font-medium"},{default:r((()=>[i(" 查询结果 ")])),_:1}),p(t,{class:"min-h-[200rpx] px-[20rpx]"},{default:r((()=>[p(t,{class:"flex mt-[30rpx]"},{default:r((()=>[p(I,null,{default:r((()=>[i("卡密类型：")])),_:1}),p(I,{class:"ml-[20rpx]"},{default:r((()=>[i(f(D.value.type_desc),1)])),_:1})])),_:1}),p(t,{class:"flex mt-[30rpx]"},{default:r((()=>[p(I,null,{default:r((()=>[i("卡密面额：")])),_:1}),p(I,{class:"ml-[20rpx]"},{default:r((()=>[i(f(D.value.content),1)])),_:1})])),_:1}),p(t,{class:"flex mt-[30rpx]"},{default:r((()=>[p(I,{class:"flex-none"},{default:r((()=>[i("兑换时间：")])),_:1}),p(I,{class:"ml-[20rpx]"},{default:r((()=>[i(f(D.value.failure_time),1)])),_:1})])),_:1}),D.value.valid_time?(u(),n(t,{key:0,class:"flex mt-[30rpx]"},{default:r((()=>[p(I,{class:"flex-none"},{default:r((()=>[i("有效期至：")])),_:1}),p(I,{class:"ml-[20rpx]"},{default:r((()=>[i(f(D.value.valid_time),1)])),_:1})])),_:1})):m("v-if",!0)])),_:1}),p(t,{class:"py-[50rpx] px-[16rpx] bg-white"},{default:r((()=>[p(j,{class:"entry-btn",loading:d(Z),onClick:d(q)},{default:r((()=>[i(" 立即兑换 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),m("    底部导航    "),p(A),m("    悬浮菜单    "),p(L)])),_:1})],64)}}}),[["__scopeId","data-v-d415da56"]]);export{U as default};
