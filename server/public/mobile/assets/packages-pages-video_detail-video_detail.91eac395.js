import{_ as e}from"./page-meta.d751427a.js";import{d as a,aB as t,A as l,s,cu as u,K as r,$ as o,o as i,k as n,b as d,w as p,g as c,f,e as m,t as _,p as x,m as g,n as y,F as v,ae as b,z as w,a$ as h,r as j,a as k,aE as C,j as I,h as q}from"./index-d6d2a33a.js";import{_ as $}from"./u-icon.992584aa.js";import{_ as L}from"./u-button.97a3d07f.js";import{F as O}from"./floating-menu.85d77f2f.js";import{_ as R}from"./u-popup.21776ef7.js";import{_ as z}from"./page-status.451737f8.js";import{b as A}from"./video.0bbf10d1.js";import{u as N}from"./useCopy.4954d67d.js";import{a as S}from"./download.954a43dc.js";import{c as V,v as D}from"./square.95eaea5a.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading.d153dd1a.js";const F=E(a({__name:"video_detail",setup(a){const E=t.baseUrl,{copy:F}=N(),T=b(),U=w(),B=l(),G=s(u.LOADING),J=s({status_desc:"生成成功",style_desc:"电影镜头",type_desc:"文生视频",id:96,prompt:"",type:1,tags:"电影镜头",image:"",nickname:"",channel:"openai_hk",video_url:"",style_id:"4",status:2,create_time:""}),K=r({id:""}),M=s(!1),Q=async()=>{if(B.isLogin)try{await D({records_id:K.id,status:J.value.is_collect?0:1}),J.value.is_collect=J.value.is_collect?0:1}catch(e){console.error(e),uni.$u.toast(JSON.stringify(e))}else U.navigateTo("/pages/login/login")},H=()=>{B.isLogin?h()?M.value=!0:S(J.value.video_url,"视频"):U.navigateTo("/pages/login/login")},P=async()=>{await F(J.value.video_url),M.value=!1};return o((async()=>{console.log(T.query);const e=T.query.id;await(async e=>{try{if(T.query.collectId){const a=await V({id:e});J.value=a}else{const a=await A({id:e});J.value=a[0]}G.value=u.NORMAL}catch(a){G.value=u.ERROR}})(e),K.id=T.query.collectId})),(a,t)=>{const l=j(k("page-meta"),e),s=C,u=I,r=q,o=j(k("u-icon"),$),b=j(k("u-button"),L),w=j(k("floating-menu"),O),h=j(k("u-popup"),R),A=j(k("page-status"),z);return i(),n(v,null,[d(l,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),d(A,{class:"h-full",status:G.value},{default:p((()=>[d(u,{class:"h-full flex flex-col"},{default:p((()=>[d(u,{class:"flex-1 min-h-0"},{default:p((()=>[d(u,{class:"px-[20rpx] bg-white",style:{"padding-bottom":"50px"}},{default:p((()=>[c("      视频      "),d(u,{class:"pt-[24rpx]",style:{height:"720rpx"}},{default:p((()=>[d(s,{class:"w-full h-full rounded-[10rpx] overflow-hidden object-cover",preload:"",autoplay:"",muted:"",loop:"","initial-time":"0",playsinline:"","show-progress":!1,"webkit-playsinline":"","x-webkit-airplay":"allow","x5-video-player-fullscreen":"true","x5-video-player-type":"h5",src:J.value.video_url},null,8,["src"])])),_:1}),c("      视频描述词      "),d(u,{class:"mt-[30rpx]"},{default:p((()=>[d(u,{class:"flex items-center justify-between"},{default:p((()=>[d(r,{class:"text-lg font-medium"},{default:p((()=>[f("描述场景词")])),_:1}),d(r,{class:"text-primary text-base",onClick:t[0]||(t[0]=e=>{var a;return m(F)(null==(a=J.value)?void 0:a.prompt)})},{default:p((()=>[f("复制")])),_:1})])),_:1}),d(u,{class:"min-h-[150rpx] mt-[20rpx] p-[20rpx] bg-page rounded-lg"},{default:p((()=>[d(r,{class:"text-base leading-4",style:{"letter-spacing":"1px"}},{default:p((()=>{var e;return[f(_(null==(e=J.value)?void 0:e.prompt),1)]})),_:1})])),_:1})])),_:1}),c("      创作信息      "),d(u,{class:"mt-[30rpx]",style:{"padding-bottom":"100rpx"}},{default:p((()=>[d(u,{class:"text-lg font-medium"},{default:p((()=>[f("创作信息")])),_:1}),d(u,{class:"mt-[20rpx] p-[20rpx] bg-page rounded-lg text-main text-base"},{default:p((()=>[d(u,{class:"flex items-center justify-between"},{default:p((()=>[d(r,null,{default:p((()=>[f("创作者")])),_:1}),d(r,null,{default:p((()=>{var e,a;return[f(_(J.value.nickname||(null==(a=null==(e=m(B))?void 0:e.userInfo)?void 0:a.nickname)),1)]})),_:1})])),_:1}),d(u,{class:"flex items-center justify-between mt-[20rpx]"},{default:p((()=>[d(r,null,{default:p((()=>[f("生成时间")])),_:1}),d(r,null,{default:p((()=>[f(_(J.value.create_time),1)])),_:1})])),_:1}),d(u,{class:"flex items-center justify-between mt-[20rpx]"},{default:p((()=>[d(r,null,{default:p((()=>[f("视频类型")])),_:1}),d(r,null,{default:p((()=>[f(_(J.value.type_desc),1)])),_:1})])),_:1}),d(u,{class:"flex items-center justify-between mt-[20rpx]"},{default:p((()=>[d(r,null,{default:p((()=>[f("视频风格")])),_:1}),d(r,null,{default:p((()=>[f(_(J.value.style_desc),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(u,{class:"video-detail-footer flex justify-between items-center px-[60rpx]"},{default:p((()=>[d(u,{class:"flex text-xs text-[#666]"},{default:p((()=>[d(u,{class:"text-center",onClick:x(Q,["stop"])},{default:p((()=>[d(u,{class:"praise"},{default:p((()=>[d(u,{class:g(["praise-animate",[J.value.is_collect?"praise-entry":"praise-leave"]]),style:y({backgroundImage:`url(${m(E)}resource/image/api/default/praise02.png)`})},null,8,["style","class"])])),_:1}),d(u,{class:"text-[22rpx] text-content"},{default:p((()=>[f("收藏")])),_:1})])),_:1},8,["onClick"]),d(u,{class:"ml-7 text-center",onClick:x(H,["stop"])},{default:p((()=>[d(u,{class:"mt-[2rpx] mb-[4rpx]"},{default:p((()=>[d(o,{name:"download",size:"42"})])),_:1}),d(u,{class:"text-[22rpx] text-content"},{default:p((()=>[f("下载")])),_:1})])),_:1},8,["onClick"])])),_:1}),d(b,{type:"primary",size:"default",customStyle:{padding:"0 30rpx",height:"82rpx",width:"400rpx",margin:"0"},onClick:H},{default:p((()=>[f(" 保存视频 ")])),_:1})])),_:1})])),_:1})])),_:1}),c("    悬浮菜单    "),d(w),d(h,{modelValue:M.value,"onUpdate:modelValue":t[1]||(t[1]=e=>M.value=e),mode:"center","border-radius":"15",closeable:""},{default:p((()=>[d(u,{class:"w-[650rpx] p-[40rpx]"},{default:p((()=>[d(u,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:p((()=>[f(" 下载视频 ")])),_:1}),d(u,{class:"mb-[40rpx]"},{default:p((()=>[f(" 当前环境不支持下载，请复制链接到浏览器打开下载 ")])),_:1}),d(b,{type:"primary",shape:"circle",onClick:P},{default:p((()=>[f(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["status"])],64)}}}),[["__scopeId","data-v-eae9f76d"]]);export{F as default};
