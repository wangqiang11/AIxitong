import{_ as e}from"./page-meta.d751427a.js";import{d as a,C as l,o as t,c as s,w as o,b as n,k as i,l as u,e as r,F as c,f as p,g as d,j as m,r as f,a as v,t as x,i as g,s as _,P as y,D as h,m as w,U as k,u as b,A as j,J as C,x as V,K as T,L as S,aF as U,z,p as A,aG as I,h as L,aH as F,aI as D}from"./index-d6d2a33a.js";import{_ as R}from"./u-icon.992584aa.js";import{_ as B}from"./tabbar.vue_vue_type_script_setup_true_lang.e2e30d1a.js";import{_ as P}from"./model-picker.594cca17.js";import{_ as $}from"./chat-record-item.e19df2e0.js";import{_ as O}from"./uni-icons.0b553b27.js";import{_ as E,a as K,b as H}from"./dialog-poster.vue_vue_type_script_setup_true_lang.74c53633.js";import{_ as J}from"./z-paging.6c8c2edf.js";import{_ as q}from"./u-modal.793c614f.js";import{g as G,c as M,a as N,b as Q,d as Y,e as W,f as X,h as Z,i as ee}from"./chat.d9a8f946.js";import{u as ae}from"./useLockFn.3b1f86f9.js";import{u as le,F as te}from"./use-files-manage.1a21abcb.js";import{_ as se}from"./popup.vue_vue_type_script_setup_true_lang.100af7f0.js";import{_ as oe}from"./u-empty.a728d8d9.js";import{_ as ne}from"./u-popup.21776ef7.js";import{u as ie}from"./text-item.bd4ac6fd.js";import{_ as ue}from"./u-search.7e682473.js";import{_ as re}from"./u-image.9574760c.js";import{g as ce,a as pe}from"./role.7efbb103.js";import{_ as de}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-badge.f9b9ebb9.js";import"./u-collapse.5c69f838.js";import"./u-tag.fd761889.js";import"./useAudio.deb09cdd.js";import"./howler.bdae6f69.js";import"./_commonjsHelpers.157f59fb.js";import"./u-loading.d153dd1a.js";import"./icon_copy.bacd4068.js";import"./useCopy.4954d67d.js";import"./uni-file-picker.87d7f36a.js";import"./u-input.e3cf3beb.js";import"./emitter.1571a5d9.js";import"./index.3dd6f2ef.js";import"./index.22b2ad12.js";import"./l-painter-image.027bd37e.js";import"./l-painter.cecf0579.js";import"./u-button.97a3d07f.js";import"./fileReader.617b57ea.js";import"./index.ccff8ee2.js";import"./ua-markdown.e9ea1a15.js";import"./katex.37f36714.js";import"./mp-html.318bb55d.js";import"./icon_copy.36709540.js";const me=a({__name:"problem-example",props:{data:null},emits:["click-item","show-more"],setup(e,{emit:a}){const _=e,y=e=>e.slice(0,3),h=l((()=>y(_.data))),w=l((()=>_.data.reduce(((e,a)=>{var l;return e+=(null==(l=a.sample)?void 0:l.length)||0}),0)>9||_.data.length>3));return(e,l)=>{const _=g,k=m,b=f(v("u-icon"),R);return t(),s(k,{class:"problem-example px-[10rpx]"},{default:o((()=>[n(k,{class:"flex"},{default:o((()=>[(t(!0),i(c,null,u(r(h),(e=>(t(),s(k,{key:e.id,class:"flex-1 mx-[10rpx]"},{default:o((()=>[n(k,{class:"flex flex-col justify-center items-center mb-[20rpx]"},{default:o((()=>[e.image?(t(),s(_,{key:0,class:"w-[88rpx] h-[88rpx]",src:e.image,alt:""},null,8,["src"])):d("v-if",!0),n(k,{class:"text-[30rpx] font-medium mt-[32rpx] line-clamp-1"},{default:o((()=>[p(x(e.name),1)])),_:2},1024)])),_:2},1024),n(k,null,{default:o((()=>[(t(!0),i(c,null,u(y(e.sample),(e=>(t(),s(k,{key:e.id,class:"bg-white mb-[20rpx] px-[20rpx] py-[15rpx] flex justify-center rounded-[12rpx] cursor-pointer",onClick:l=>{return t=e.content,void a("click-item",t);var t}},{default:o((()=>[n(k,{class:"line-clamp-2 text-sm text-center"},{default:o((()=>[p(x(e.content),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),r(w)?(t(),s(k,{key:0,class:"py-[10rpx]",onClick:l[0]||(l[0]=e=>a("show-more"))},{default:o((()=>[n(k,{class:"text-sm text-muted flex items-center justify-center"},{default:o((()=>[p(" 查看更多 "),n(b,{name:"arrow-right",size:"26"})])),_:1})])),_:1})):d("v-if",!0)])),_:1})}}}),fe=a({__name:"problem-example-popup",props:{data:null,modelValue:{type:Boolean}},emits:["update:modelValue","click-item"],setup(e,{emit:a}){const d=e,g=l({get:()=>d.modelValue,set:e=>{a("update:modelValue",e)}}),k=_(0),b=l((()=>{var e;return(null==(e=d.data[k.value])?void 0:e.sample)||[]}));return(l,d)=>{const _=m,j=h,C=f(v("u-empty"),oe),V=f(v("u-popup"),ne);return t(),s(V,{modelValue:r(g),"onUpdate:modelValue":d[0]||(d[0]=e=>y(g)?g.value=e:null),height:"1000rpx",mode:"bottom","safe-area-inset-bottom":"","border-radius":"14",closeable:""},{default:o((()=>[n(_,{class:"py-[30rpx] h-full flex flex-col"},{default:o((()=>[n(_,{class:"text-2xl font-medium px-[30rpx]"},{default:o((()=>[p("问题示例")])),_:1}),n(_,null,{default:o((()=>[n(j,{"scroll-x":!0,class:"whitespace-nowrap"},{default:o((()=>[n(_,{class:"inline-block py-[20rpx]"},{default:o((()=>[n(_,{class:"flex px-[15rpx]"},{default:o((()=>[(t(!0),i(c,null,u(e.data,((e,a)=>(t(),s(_,{class:w(["mx-[15rpx] leading-[72rpx] px-[40rpx] bg-primary-light-9 text-primary rounded-[8rpx]",{"!text-btn-text !bg-primary":k.value==a}]),key:e.id,onClick:e=>k.value=a},{default:o((()=>[n(_,null,{default:o((()=>[p(x(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1}),n(_,{class:"border-0 border-t border-light border-solid flex-1 min-h-0"},{default:o((()=>[n(j,{class:"h-full","scroll-y":!0},{default:o((()=>[n(_,{class:"px-[30rpx] py-[20rpx]"},{default:o((()=>[r(b).length?(t(!0),i(c,{key:0},u(r(b),(e=>(t(),s(_,{key:e.id,class:"py-[10rpx]"},{default:o((()=>[n(_,{class:"text-center px-[20rpx] bg-page rounded py-[20rpx]",onClick:l=>{return t=e.content,g.value=!1,void a("click-item",t);var t}},{default:o((()=>[p(x(e.content),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128)):(t(),s(_,{key:1,class:"py-[150rpx]"},{default:o((()=>[n(C,{text:"暂无数据",mode:"data"})])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ve=_(0),xe=_([]);const ge=a({__name:"chat",props:{active:{default:0}},emits:["active"],setup(e,{expose:a,emit:g}){var h;const w=b(),F=z(),D=j(),B=C(),oe=le(),ne=_(!1),ue=_([]),re=_(""),{getSessionLists:ce,initSessionActive:pe,sessionActive:de,sessionAdd:ge,sessionEdit:_e,sessionLists:ye,sessionDelete:he,sessionClear:we,currentSession:ke}=function(){const e=async()=>{try{const e=await G({page_type:0});return xe.value=(null==e?void 0:e.lists)||[],xe.value}catch(e){xe.value=[],t()}},{lockFn:a}=ae((async()=>{await M({}),await e(),t()})),t=()=>{var e;ve.value=(null==(e=xe.value[0])?void 0:e.id)||0},s=l((()=>{var e;return(null==(e=xe.value.find((e=>e.id===ve.value)))?void 0:e.name)||""}));return{getSessionLists:e,sessionActive:ve,initSessionActive:t,sessionLists:xe,sessionAdd:a,sessionEdit:async a=>{await Y(a),e()},sessionDelete:async a=>{(await k({title:"确定删除该会话？"})).confirm&&(await N({id:a}),await e(),t())},sessionClear:async()=>{(await k({title:"确定清除所有会话？"})).confirm&&(await Q(),await e(),t())},currentSession:s}}(),be=_(!1),je=_(!1),Ce=_(!1),Ve=_([]),Te=_(""),Se=_(""),Ue=Boolean(w.getChatConfig.support_file),ze=()=>{if(!D.isLogin)return We();He()},Ae=C();(null==(h=w.getChatConfig)?void 0:h.is_reopen)&&(ge(),w.getChatConfig.is_reopen=0);const Ie=C(),Le=async(e,a)=>{var l,t;try{const{lists:t=[],count:s}=await W({type:1,category_id:de.value,page_size:a/2,page_no:e});null==(l=Ae.value)||l.complete(t.reverse()),0===s?setTimeout((()=>{var e;null==(e=Ae.value)||e.scrollToTop(!1)}),200):1===a&&setTimeout((()=>{He()}),100)}catch(s){null==(t=Ae.value)||t.complete(!1)}},Fe=_(!1),De=e=>{e.height>0?Fe.value=!0:Fe.value=!1},Re=()=>{Fe.value=!1};V(de,(e=>{console.log(e),setTimeout((()=>{var a,l;e?null==(a=Ae.value)||a.reload():(null==(l=Ae.value)||l.complete([]),setTimeout((()=>{var e;null==(e=Ae.value)||e.scrollToTop(!1)}),100))}),10)}),{immediate:!0});const Be=T({show:!1,data:{url:"",name:"",type:"image"}}),Pe=e=>{Be.show=!!e.support_image,Be.show||(Be.data.url="")},{lockFn:$e}=ae((async()=>{if(!D.isLogin)return We();Ce.value=!0})),Oe=async()=>{Me(),await X({type:1,category_id:de.value})},Ee=_(-1),{lockFn:Ke}=ae((async e=>{if(Je.value)return;const a=ue.value[e],l=ue.value.findLast((({id:e})=>e===a.id));l&&(Ee.value=a.id,ue.value.splice(e,2),Ye(l.content))})),He=async()=>{var e;null==(e=Ae.value)||e.scrollToBottom(!1)},Je=_(!1);let qe=null;const Ge=_([]),Me=()=>{null==qe||qe.cancel(),setTimeout((()=>{Te.value=""}))},Ne=_({}),{pauseAll:Qe}=ie(),{lockFn:Ye}=ae((async(e,a)=>{if(console.log(a),ne.value=!1,!D.isLogin)return We();if(Je.value)return;const l=e||Te.value;if(!l)return;0===de.value&&await ge(),"新的会话"===ke.value&&await _e({id:de.value,name:l});const t=oe.files.value.map((e=>({name:e.name,type:"30",url:e.url})));Be.data.url&&t.push({...Be.data}),Ae.value.addChatRecordData({type:1,content:l,files_plugin:t}),Ne.value={type:2,loading:!0,content:[],reasoning:"",id:Date.now()},Ae.value.addChatRecordData(Ne.value),Se.value=Te.value,Te.value="";try{Je.value=!0,await ee({type:1,other_id:de.value,question:l,model:re.value,annex:Be.data.url?[{type:Be.data.type,name:Be.data.name,url:Be.data.url}]:[],files:oe.files.value.map((e=>({...e,type:"30"}))),...a},{onstart(e){qe=e,Qe(),Te.value=""},onmessage(e){e.trim().split("data:").forEach((async e=>{var a,l,t,s,o,n,i;if(""!==e)try{const u=JSON.parse(e),{object:r,choices:c,error:p}=u;if(p){console.log(p);const{message:e,code:a}=p;if(1100===a)if(w.getIsShowRecharge){const{cancel:e}=await k({title:"温馨提示",content:`${w.getTokenUnit}数量已用完，请前往充值`});if(e)return;F.navigateTo({path:"/packages/pages/recharge/recharge"})}else uni.$u.toast(`${w.getTokenUnit}数量已用完。请联系客服增加`);else e&&uni.$u.toast(e);return Te.value=Se.value,void ue.value.splice(0,2)}switch(r){case"chat":{const e=null==(a=c[0])?void 0:a.index,s=null==(t=null==(l=c[0])?void 0:l.delta)?void 0:t.content;Ne.value.content[e]||(Ne.value.content[e]=""),Ne.value.content[e]+=s;break}case"reasoning":{const e=null==(o=null==(s=c[0])?void 0:s.delta)?void 0:o.content;Ne.value.reasoning+=e;break}case"question":Ge.value=JSON.parse(null==(i=null==(n=c[0])?void 0:n.delta)?void 0:i.content);break;case"finish":Be.data.url=""}}catch(u){}}))},async onclose(){-1!==Ee.value&&Ne.value.content.length&&(await X({type:1,id:Ee.value}),Ee.value=-1),Je.value=!1,D.getUser(),setTimeout((()=>{var e;null==(e=Ae.value)||e.reload()}),1e3)}})}catch(s){console.log("发送消息失败=>",s),s.errMsg!==I.ABORT&&ue.value.splice(0,2),Te.value=Se.value,Je.value=!1}})),We=()=>{F.navigateTo({path:"/pages/login/login"})};return S((async()=>{await ce(),pe(),(async()=>{Ve.value=await Z()})(),setTimeout((()=>{}),100)})),U((()=>{Me()})),a({showPopup:be}),(a,l)=>{const g=f(v("model-picker"),P),_=m,h=f(v("u-icon"),R),k=L,b=f(v("chat-record-item"),$),j=f(v("uni-icons"),O),C=f(v("chat-input"),K),V=f(v("z-paging"),J),T=f(v("l-watermark"),H),S=f(v("u-modal"),q);return t(),i(c,null,[n(_,{class:"flex-col flex flex-1 min-h-0"},{default:o((()=>[n(_,{class:"flex-1 min-h-0"},{default:o((()=>[n(T,{class:"w-full h-full",content:r(w).getChatConfig.watermark,font:{color:"rgba(0,0,0,0.06)",fontSize:12}},{default:o((()=>[n(V,{ref_key:"pagingRef",ref:Ae,modelValue:ue.value,"onUpdate:modelValue":l[5]||(l[5]=e=>ue.value=e),"use-chat-record-mode":"",fixed:!1,height:"100%",auto:!1,"safe-area-inset-bottom":!1,"auto-clean-list-when-reload":!1,"show-chat-loading-when-reload":!0,"default-page-size":20,onQuery:Le,onKeyboardHeightChange:De,onHidedKeyboard:Re},{top:o((()=>[n(_,null,{default:o((()=>[n(g,{sub_id:re.value,"onUpdate:sub_id":l[0]||(l[0]=e=>re.value=e),"onUpdate:modelConfig":Pe},null,8,["sub_id"])])),_:1})])),empty:o((()=>[n(_,{class:"w-full min-h-full"},{default:o((()=>[n(_,{class:"py-[100rpx]"},{default:o((()=>[Ve.value.length?(t(),s(me,{key:0,data:Ve.value,onClickItem:r(Ye),onShowMore:l[1]||(l[1]=e=>je.value=!0)},null,8,["data","onClickItem"])):d("v-if",!0)])),_:1})])),_:1})])),bottom:o((()=>[n(C,{modelValue:Te.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Te.value=e),loading:Je.value,showStop:Je.value,"file-plugin":Be.data,"onUpdate:filePlugin":l[3]||(l[3]=e=>Be.data=e),"show-file-upload":Be.show,showContinue:ue.value.length,safeAreaInsetBottom:"",onSend:r(Ye),onPause:Me,onFocus:ze,onClear:r($e),onContinue:l[4]||(l[4]=e=>r(Ye)("继续"))},{actions:o((()=>[n(_,{class:"flex justify-between items-center"},{default:o((()=>[n(_,{class:"flex items-center"},{default:o((()=>[r(D).isLogin?(t(),s(_,{key:0,class:"text-sm flex-1"},{default:o((()=>[p(" 剩余: "+x(r(D).userInfo.balance)+" "+x(r(w).getTokenUnit),1)])),_:1})):d("v-if",!0)])),_:1}),r(Ue)?(t(),s(_,{key:0},{default:o((()=>[n(te,{onOnSuccess:r(oe).addFile},null,8,["onOnSuccess"])])),_:1})):d("v-if",!0)])),_:1})])),"file-list":o((()=>[(t(!0),i(c,null,u(r(oe).files.value,(e=>(t(),s(_,{class:"flex items-center py-1 px-2 bg-page rounded",key:e.id},{default:o((()=>[n(_,{class:"text-sm mr-1"},{default:o((()=>[p(x(e.name),1)])),_:2},1024),n(j,{type:"closeempty",size:16,onClick:a=>r(oe).removeFile(e)},null,8,["onClick"])])),_:2},1024)))),128))])),_:1},8,["modelValue","loading","showStop","file-plugin","show-file-upload","showContinue","onSend","onClear"])])),default:o((()=>[n(_,{class:"scroll-view-content pb-[40rpx]",ref_key:"contentRef",ref:B},{default:o((()=>[(t(!0),i(c,null,u(ue.value,((a,l)=>(t(),s(_,{key:`${a.id} + ${l} + ''`,style:{transform:"scaleY(-1)"}},{default:o((()=>[n(_,{class:"chat-record mt-[20rpx] pb-[40rpx]"},{default:o((()=>[0===e.active?(t(),s(b,{key:0,"record-id":a.id,type:1==a.type?"right":"left",content:a.content,reasoning:a.reasoning,loading:a.loading,"files-plugin":a.files_plugin,avatar:1==a.type?r(D).userInfo.avatar:r(w).getChatConfig.chat_logo,index:l,time:2==a.type?a.create_time:"",showCopyBtn:!0,showVoiceBtn:2==a.type,"model-name":a.model,"show-poster":2==a.type,onPoster:e=>(async e=>{const a=ue.value.filter((a=>a.id==e));2==a.length?Ie.value.initPosterData({title:a[1].content,content:a[0].content}):uni.$u.toast("上下文数据不对～")})(a.id)},{btn:o((()=>[2==a.type&&0===l?(t(),s(_,{key:0,class:"text-content text-sm flex items-center mr-[20rpx] mt-[16rpx]",onClick:A((e=>r(Ke)(l)),["stop"])},{default:o((()=>[n(h,{name:"reload",size:"26"}),n(k,{class:"ml-1"},{default:o((()=>[p("重新回答")])),_:1})])),_:2},1032,["onClick"])):d("v-if",!0)])),sub_actions:o((()=>[0!==l||Je.value?d("v-if",!0):(t(),s(_,{key:0,class:"flex flex-col",style:{"margin-left":"84rpx"}},{default:o((()=>[(t(!0),i(c,null,u(Ge.value.length?Ge.value:a.correlation,((e,a)=>(t(),s(_,{key:a,class:"inline-flex items-center rounded-md bg-white cursor-pointer mt-[20rpx]",style:{padding:"16rpx 24rpx",width:"fit-content"},onClick:A((a=>r(Ye)(e)),["stop"])},{default:o((()=>[n(k,{class:"mr-1 text-base text-content"},{default:o((()=>[p(x(e),1)])),_:2},1024),n(h,{name:"arrow-rightward",color:"#999",size:"30"})])),_:2},1032,["onClick"])))),128))])),_:2},1024))])),_:2},1032,["record-id","type","content","reasoning","loading","files-plugin","avatar","index","time","showVoiceBtn","model-name","show-poster","onPoster"])):d("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},512)])),_:1},8,["modelValue"])])),_:1},8,["content","font"])])),_:1})])),_:1}),d("  会话弹窗  "),n(se,{show:be.value,"onUpdate:show":l[6]||(l[6]=e=>be.value=e),modelValue:r(de),"onUpdate:modelValue":l[7]||(l[7]=e=>y(de)?de.value=e:null),lists:r(ye),onAdd:r(ge),onClear:r(we),onDelete:r(he),onEdit:r(_e)},null,8,["show","modelValue","lists","onAdd","onClear","onDelete","onEdit"]),d("  会话弹窗  "),n(fe,{modelValue:je.value,"onUpdate:modelValue":l[8]||(l[8]=e=>je.value=e),data:Ve.value,onClickItem:l[9]||(l[9]=e=>r(Ye)(e))},null,8,["modelValue","data"]),d("  生产对话海报  "),n(E,{ref_key:"posterRef",ref:Ie},null,512),d("  是否清空对话  "),n(S,{modelValue:Ce.value,"onUpdate:modelValue":l[10]||(l[10]=e=>Ce.value=e),content:"确定清空对话？","show-cancel-button":"",onConfirm:Oe},null,8,["modelValue"])],64)}}}),_e=de(a({__name:"role",setup(e){const a=j(),l=z(),r=_(""),d=T({lists:[],current:0}),g=_([]),y=C(),k=async(e,a)=>{var l,t;try{const{lists:t=[]}=await pe({keyword:r.value,category_id:d.current,page_size:a,page_no:e});null==(l=y.value)||l.complete(t)}catch(s){null==(t=y.value)||t.complete(!1)}},b=()=>{var e;null==(e=y.value)||e.reload()};return V((()=>d.current),(()=>{b()})),S((async()=>{await(async()=>{d.lists=await ce()})(),b()})),(e,_)=>{const j=f(v("u-search"),ue),C=m,V=h,T=f(v("u-image"),re),S=f(v("u-icon"),R),U=f(v("z-paging"),J);return t(),s(C,{class:"flex-col flex flex-1 min-h-0"},{default:o((()=>[n(C,{class:"px-[20rpx] pt-[20rpx] pb-[10rpx]"},{default:o((()=>[n(j,{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=e=>r.value=e),placeholder:"请输入关键词搜索",height:"72","bg-color":"#ffffff",onSearch:_[1]||(_[1]=e=>b()),onCustom:_[2]||(_[2]=e=>b()),onClear:_[3]||(_[3]=e=>b())},null,8,["modelValue"])])),_:1}),n(V,{"scroll-x":"",class:"whitespace-nowrap"},{default:o((()=>[n(C,{class:"inline-flex py-[20rpx] px-[10rpx]"},{default:o((()=>[(t(!0),i(c,null,u(d.lists,(e=>(t(),s(C,{class:w(["category-item mx-[10rpx]",{"category-item-active":e.id==d.current}]),key:e.id,onClick:a=>d.current=e.id},{default:o((()=>[p(x(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),n(C,{class:"flex-1 min-h-0"},{default:o((()=>[n(U,{ref_key:"pagingRef",ref:y,modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=e=>g.value=e),"auto-clean-list-when-reload":!1,fixed:!1,onQuery:k},{default:o((()=>[n(C,{class:"px-[24rpx] pb-[1rpx]"},{default:o((()=>[(t(!0),i(c,null,u(g.value,(e=>(t(),s(C,{key:e.id,class:"mb-[20rpx]",onClick:t=>(async e=>{a.isLogin||l.navigateTo("/pages/login/login"),l.navigateTo({path:"/packages/pages/dialogue_role/dialogue_role",query:{id:e.id}})})(e)},{default:o((()=>[n(C,{class:"role-item flex items-center p-[20rpx]"},{default:o((()=>[n(T,{src:e.image,width:"130",height:"130","border-radius":"20"},null,8,["src"]),n(C,{class:"flex-1 min-w-0 ml-[20rpx]"},{default:o((()=>[n(C,{class:"font-medium text-lg line-clamp-1"},{default:o((()=>[p(x(e.name),1)])),_:2},1024),n(C,{class:"mt-[10rpx] text-sm text-muted line-clamp-1"},{default:o((()=>[p(x(e.describe),1)])),_:2},1024),n(C,{class:"mt-[10rpx] text-xs text-muted line-clamp-1"},{default:o((()=>[n(S,{name:"account"}),p(" 10人使用过 ")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-4a412df6"]]),ye=de(a({__name:"dialogue",setup(a){const l=z(),r=_(),g=_(["问答","角色"]),y=_(0),h=_(""),k=()=>{l.navigateBack()};return(a,l)=>{const _=f(v("page-meta"),e),b=f(v("u-icon"),R),j=m,C=f(v("tabbar"),B);return t(),i(c,null,[n(_,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),n(j,{class:"h-full flex flex-col min-h-0"},{default:o((()=>[n(j,{class:"bg-white flex items-center pr-[20rpx]"},{default:o((()=>[n(j,{class:"flex items-center text-lg w-[110rpx]"},{default:o((()=>[n(j,{class:"px-[20px] py-[16rpx]",onClick:k},{default:o((()=>[n(b,{name:"arrow-left",size:34})])),_:1})])),_:1}),n(j,{class:w(["flex-1 flex items-center justify-center py-[24rpx]",{"pr-[100rpx]":1==y.value}])},{default:o((()=>[(t(!0),i(c,null,u(g.value,((e,a)=>(t(),s(j,{key:a,class:w(["flex items-center mx-[24rpx] px-[10rpx] dialogue_tabs",{dialogue_tabs_active:y.value===a}]),onClick:e=>y.value=a},{default:o((()=>[p(x(e),1)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["class"]),0===y.value?(t(),s(j,{key:0,class:"flex items-center",onClick:l[0]||(l[0]=e=>r.value.showPopup=!0)},{default:o((()=>[n(b,{name:"plus-circle",size:36}),n(j,{class:"flex-1 line-clamp-1 ml-[8rpx]"},{default:o((()=>[p("新建")])),_:1})])),_:1})):d("v-if",!0)])),_:1}),d("    问答AI    "),F(n(j,{class:"h-full flex flex-col"},{default:o((()=>[n(ge,{class:"h-full flex flex-col",ref_key:"chatRef",ref:r,active:y.value,modelKey:h.value},null,8,["active","modelKey"])])),_:1},512),[[D,0===y.value]]),d("    角色对话    "),F(n(j,{class:"h-full flex flex-col"},{default:o((()=>[n(_e,{class:"h-full flex flex-col"})])),_:1},512),[[D,1===y.value]]),n(C)])),_:1})],64)}}}),[["__scopeId","data-v-884d9653"]]);export{ye as default};
