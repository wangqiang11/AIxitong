import{d as a,s as t,cu as e,u as s,A as l,_ as n,L as i,bd as u,be as r,o,k as c,b as p,w as d,f as m,t as _,e as y,c as f,F as x,l as g,g as b,z as v,r as w,a as k,h,j,cR as S,cw as T,U,I,cS as O,aJ as N}from"./index-d6d2a33a.js";import{_ as R}from"./page-meta.d751427a.js";import{_ as $}from"./u-icon.992584aa.js";import{_ as A}from"./u-button.97a3d07f.js";import{_ as C}from"./u-empty.a728d8d9.js";import{_ as z}from"./page-status.451737f8.js";import{_ as D}from"./tabbar.vue_vue_type_script_setup_true_lang.e2e30d1a.js";import{u as J}from"./useCopy.4954d67d.js";import{F as L}from"./floating-menu.85d77f2f.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading.d153dd1a.js";import"./u-badge.f9b9ebb9.js";const W=M(a({__name:"task_reward",setup(a){const M=t(e.LOADING),{copy:W}=J(),X=v(),E=s(),{resolveOptions:F}=N(),G=t({title:"",subTitle:"",content:[]}),H={1:{num:"0/1",btn_text:"立即签到",desc:"每天签到，可获得",payload:"每天签到，可获得"},2:{num:"0/10",btn_text:"去分享",desc:"邀请1人，可获得",payload:"邀请1人，可获得"},3:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},4:{num:"0/4",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},5:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},6:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},7:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"}};t(-1);const Z=a=>{T({OA_WEIXIN:()=>{U({title:"温馨提示",content:"点击右上角“...”，分享给好友",showCancel:!1})},H5:async()=>{const a=await F();W(a.path||a.link),U({title:"温馨提示",content:"已经复制到剪贴板，请转发给好友",showCancel:!1})},ANDROID:async()=>{const a=await F();uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:a.path,title:a.title,imageUrl:a.imageUrl,success:a=>{console.log("分享成功")},fail:a=>{uni.$u.toast(a.errMsg)}})},IOS:async()=>{const a=await F();uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:a.path,title:a.title,imageUrl:a.imageUrl,success:a=>{console.log("分享成功")},fail:a=>{uni.$u.toast(a.errMsg)}})}})},q=l(),{userInfo:B}=n(q),K=async()=>{try{await(async()=>{const a=await O(),t=JSON.parse(a.data);G.value.content=t.filter((a=>{var t,e;return a.data.num>=a.data.day_num&&(H[a.type].btn_text=1===a.type?"已签到":"已分享"),H[a.type].num=`${null==(t=a.data)?void 0:t.num}/${null==(e=a.data)?void 0:e.day_num}`,H[a.type].desc=`${H[a.type].payload}`,1===a.data.is_open}))})(),await(async()=>{var a;const t=await I({id:10}),e=JSON.parse(t.data)[0];G.value.title=null==e?void 0:e.content.title,G.value.subTitle=null==(a=null==e?void 0:e.content)?void 0:a.subTitle})(),M.value=e.NORMAL}catch(a){console.error(a),M.value=e.ERROR}};return i((()=>{K(),q.getUser()})),u((async()=>{try{await K(),await q.getUser()}catch(a){}r()})),(a,t)=>{const e=w(k("page-meta"),R),s=h,l=j,n=w(k("u-icon"),$),i=w(k("u-button"),A),u=w(k("u-empty"),C),r=w(k("page-status"),z),v=w(k("tabbar"),D);return o(),c(x,null,[p(e,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),p(r,{status:M.value},{error:d((()=>[p(u,{text:"加载出错～"})])),default:d((()=>[p(l,{class:"task-center"},{default:d((()=>[p(l,{class:"bg-primary text-white px-[30rpx] pt-[30rpx] pb-[80rpx] mb-[-50rpx]"},{default:d((()=>[p(s,{class:"text-base"},{default:d((()=>[m(_(y(E).getTokenUnit)+"数量",1)])),_:1}),p(s,{class:"text-[48rpx] font-medium"},{default:d((()=>[m(_(y(B).balance||0),1)])),_:1})])),_:1}),p(l,{class:"px-[30rpx] pb-[20rpx]"},{default:d((()=>[G.value.content.length?(o(),f(l,{key:0,class:"daily-tasks"},{default:d((()=>[p(l,{class:"tasks-title"},{default:d((()=>[p(l,{class:"font-medium text-xl"},{default:d((()=>[m(_(G.value.title),1)])),_:1}),p(l,{class:"ml-[14rpx] text-sm"},{default:d((()=>[m(_(G.value.subTitle),1)])),_:1})])),_:1}),p(l,{class:"tasks-content"},{default:d((()=>[(o(!0),c(x,null,g(G.value.content,((a,t)=>(o(),f(l,{class:"tasks-item m-[24rpx] pb-[24rpx] flex",key:t},{default:d((()=>[p(n,{class:"flex-none",name:a.image,size:88},null,8,["name"]),p(l,{class:"flex-1 min-w-0 ml-[20rpx]"},{default:d((()=>[p(l,{class:"text-lg font-medium"},{default:d((()=>[m(_(a.customName||a.name)+" ("+_(H[a.type].num)+") ",1)])),_:2},1024),p(l,{class:"mt-[10rpx] text-xs text-muted text-justify"},{default:d((()=>[p(s,null,{default:d((()=>[m(_(H[a.type].desc),1)])),_:2},1024),p(s,{class:"text-error"},{default:d((()=>{var t;return[m(_(null==(t=a.data)?void 0:t.one_award),1)]})),_:2},1024),p(s,null,{default:d((()=>[m(_(y(E).getTokenUnit),1)])),_:1})])),_:2},1024)])),_:2},1024),p(l,{class:"w-[150rpx] flex justify-end items-center"},{default:d((()=>[p(i,{type:"primary",shape:"circle",size:"medium",customStyle:{margin:"0",padding:"0 24rpx",height:"56rpx"},disabled:a.data.num>=a.data.day_num,"open-type":2==a.type||3==a.type?"share":"",onClick:t=>(async a=>{switch(a){case 1:await S(),await K(),await q.getUser();break;case 4:await X.navigateTo("/packages/pages/draw_list/draw_list");break;case 5:await X.navigateTo("/packages/pages/video_list/video_list");break;case 6:await X.navigateTo("/packages/pages/music_list/music_list");break;case 7:await X.navigateTo("/pages/kb/kb");break;default:Z()}})(a.type)},{default:d((()=>[m(_(H[a.type].btn_text),1)])),_:2},1032,["disabled","open-type","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):b("v-if",!0)])),_:1})])),_:1})])),_:1},8,["status"]),b("    悬浮菜单    "),p(L),p(v)],64)}}}),[["__scopeId","data-v-c38c0a9d"]]);export{W as default};
