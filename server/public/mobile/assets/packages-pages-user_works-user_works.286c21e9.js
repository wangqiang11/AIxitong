import{_ as e}from"./page-meta.d751427a.js";import{d as l,J as a,s as t,C as s,x as u,K as o,aF as r,o as i,k as c,b as d,w as n,c as p,e as m,P as f,f as x,t as h,g as v,F as _,l as g,z as b,U as y,a$ as w,r as k,a as V,j as C,h as j,p as B,i as z,aE as U,m as I,X as E}from"./index-d6d2a33a.js";import{_ as A}from"./u-navbar.d70905ec.js";import{_ as F}from"./u-tabs.f14aec5a.js";import{_ as T}from"./u-image.9574760c.js";import{_ as D}from"./u-icon.992584aa.js";import{_ as R}from"./u-loading.d153dd1a.js";import{_ as Q}from"./u-checkbox.0fdc3635.js";import{_ as $}from"./u-button.97a3d07f.js";import{_ as q}from"./z-paging.6c8c2edf.js";import{_ as J}from"./u-action-sheet.29883fbc.js";import{_ as L}from"./u-popup.21776ef7.js";import{_ as S}from"./icon_music.5ddb40fe.js";import{d as H,b as K}from"./music.d5e913c6.js";import{a as M}from"./download.954a43dc.js";import{m as P}from"./icon_music_fail.bb797fc1.js";import{u as X}from"./useCopy.4954d67d.js";import{_ as G}from"./u-tag.fd761889.js";import{d as N,a as O}from"./video.0bbf10d1.js";import{I as W}from"./icon_copy.36709540.js";import{I as Y,a as Z}from"./icon_delete.577abfad.js";import{d as ee,a as le}from"./draw.cfe8756a.js";import{_ as ae}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-badge.f9b9ebb9.js";const te=l({__name:"music",props:{isBatch:{type:Boolean}},setup(e){const l=e,U=b(),I=a(),{copy:E}=X(),A=t([]),F=t([]),G=s({get:()=>F.value.length===A.value.length,set(){F.value.length===A.value.length?F.value=[]:F.value=A.value.map((e=>e.id))}});u((()=>l.isBatch),(()=>{F.value=[]}));const N=o({show:!1,item:{}}),O=s((()=>{const e=[{value:"delete",text:"删除",color:"#EA0000"}];return 2==N.item.status&&e.unshift({value:"download",text:"下载"}),e})),W=e=>{N.show=!0,N.item=e},Y=async e=>{const{cancel:l}=await y({title:"温馨提示",content:"确定删除？"});l||(await H({id:e}),F.value=[],se())},Z=t(),ee=async e=>{const l=O.value[e].value,a=N.item;switch(l){case"delete":Y(a.id);break;case"download":w()?Z.value=!0:M(a.audio_url,a.title)}},le=async()=>{await E(N.item.audio_url),Z.value=!1},ae=a(),te=async(e,l)=>{try{const{lists:a}=await K({page_no:e,page_size:l,status:2});I.value.complete(a)}catch(a){I.value.complete(!1)}},se=()=>{var e;null==(e=I.value)||e.refresh()};return r((()=>{clearTimeout(ae.value)})),(a,t)=>{const s=k(V("u-image"),T),u=C,o=z,r=j,b=k(V("u-icon"),D),y=k(V("u-loading"),R),w=k(V("u-checkbox"),Q),E=k(V("u-button"),$),H=k(V("z-paging"),q),K=k(V("u-action-sheet"),J),M=k(V("u-popup"),L);return i(),c(_,null,[d(H,{ref_key:"pagingRef",ref:I,modelValue:A.value,"onUpdate:modelValue":t[2]||(t[2]=e=>A.value=e),"auto-clean-list-when-reload":!1,"safe-area-inset-bottom":!0,onQuery:te,fixed:!1,height:"100%"},{bottom:n((()=>[e.isBatch?(i(),p(u,{key:0,class:"h-[120rpx] flex items-center px-[20rpx] rounded-t-[25rpx] bg-white shadow-light"},{default:n((()=>[d(w,{modelValue:m(G),"onUpdate:modelValue":t[0]||(t[0]=e=>f(G)?G.value=e:null),shape:"circle"},{default:n((()=>[x(" 全选 ")])),_:1},8,["modelValue"]),d(u,null,{default:n((()=>[x("已选"),d(r,{class:"text-error"},{default:n((()=>[x(h(F.value.length),1)])),_:1}),x("/"+h(A.value.length)+"首音乐",1)])),_:1}),d(u,{class:"ml-auto"},{default:n((()=>[d(E,{size:"medium",type:"error",disabled:!F.value.length,onClick:t[1]||(t[1]=e=>Y(F.value))},{default:n((()=>[x(" 删除 ")])),_:1},8,["disabled"])])),_:1})])),_:1})):v("v-if",!0)])),default:n((()=>[d(u,{class:"flex flex-wrap px-[10rpx]"},{default:n((()=>[(i(!0),c(_,null,g(A.value,(a=>(i(),p(u,{class:"w-[50%] px-[10rpx] mb-[20rpx]",key:a.id},{default:n((()=>[d(u,{class:"h-[390rpx] relative rounded-[15rpx] overflow-hidden",onClick:e=>(e=>{if(l.isBatch){const l=F.value.findIndex((l=>l===e));l>-1?F.value.splice(l,1):F.value.push(e)}else U.navigateTo({path:"/packages/pages/music_player/music_player",query:{id:e,mode:"user_works"}})})(a.id)},{default:n((()=>[d(u,{class:"w-full h-full"},{default:n((()=>[d(s,{src:a.image_url,width:"100%",height:"100%"},null,8,["src"])])),_:2},1024),d(u,{class:"flex flex-col h-full absolute left-0 right-0 top-0 bottom-0 z-[999]"},{default:n((()=>[d(u,{class:"p-[20rpx] flex-1"},{default:n((()=>[d(u,{class:"bg-[rgba(0,0,0,0.5)] inline-flex text-white p-[10rpx] rounded-full text-xs items-center"},{default:n((()=>[d(o,{src:S,class:"w-[24rpx] h-[24rpx]"}),d(r,{class:"ml-[6rpx]"},{default:n((()=>[x(h(a.duration),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(u,{class:"bg-[rgba(0,0,0,0.3)] px-[20rpx] py-[25rpx] text-white",style:{"backdrop-filter":"blur(10px)","border-radius":"0 0 15rpx 15rpx"}},{default:n((()=>[d(u,{class:"line-clamp-1 font-bold"},{default:n((()=>[x(h(a.title),1)])),_:2},1024),d(u,{class:"flex text-xs mt-[15rpx] items-center"},{default:n((()=>[d(u,{class:"mr-auto"},{default:n((()=>[x(h(a.create_time),1)])),_:2},1024),d(u,{onClick:B((e=>W(a)),["stop"])},{default:n((()=>[d(b,{name:"more-dot-fill",size:32})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024),3==a.status||1==a.status?(i(),p(u,{key:0,class:"h-full absolute inset-0 bg-white z-10 flex items-center justify-center flex-col"},{default:n((()=>[1==a.status?(i(),c(_,{key:0},[d(y,{size:50,mode:"flower"}),d(u,{class:"text-content text-sm mt-[20rpx]"},{default:n((()=>[x(" 歌曲生成中，请稍等！ ")])),_:1})],64)):(i(),c(_,{key:1},[d(b,{name:m(P),size:50},null,8,["name"]),d(u,{class:"text-content text-sm mt-[20rpx]"},{default:n((()=>[x(" 音乐生成失败 ")])),_:1}),d(u,{class:"absolute bottom-0 w-full px-[20rpx] py-[25rpx] flex items-center text-muted"},{default:n((()=>[d(u,{class:"mr-auto text-xs"},{default:n((()=>[x(h(a.create_time),1)])),_:2},1024),d(u,{onClick:B((e=>W(a)),["stop"])},{default:n((()=>[d(b,{name:"more-dot-fill",size:32})])),_:2},1032,["onClick"])])),_:2},1024)],64))])),_:2},1024)):v("v-if",!0),e.isBatch?(i(),p(u,{key:1,class:"absolute right-0 top-[20rpx]"},{default:n((()=>[d(w,{"model-value":F.value.includes(a.id),shape:"circle"},null,8,["model-value"])])),_:2},1024)):v("v-if",!0)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),d(K,{"safe-area-inset-bottom":"",list:m(O),modelValue:N.show,"onUpdate:modelValue":t[3]||(t[3]=e=>N.show=e),onClick:ee},null,8,["list","modelValue"]),d(M,{modelValue:Z.value,"onUpdate:modelValue":t[4]||(t[4]=e=>Z.value=e),mode:"center","border-radius":"15",closeable:""},{default:n((()=>[d(u,{class:"w-[650rpx] p-[40rpx]"},{default:n((()=>[d(u,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:n((()=>[x(" 下载音乐 ")])),_:1}),d(u,{class:"mb-[40rpx]"},{default:n((()=>[x(" 当前环境不支持下载，请复制链接到浏览器打开下载 ")])),_:1}),d(E,{type:"primary",shape:"circle",onClick:le},{default:n((()=>[x(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),se=l({__name:"video",props:{isBatch:{type:Boolean}},setup(e){const l=e;b();const B=a(),{copy:I}=X(),E=t([]),A=t([]),F=s({get:()=>A.value.length===E.value.length,set(){A.value.length===E.value.length?A.value=[]:A.value=E.value.map((e=>e.id))}});u((()=>l.isBatch),(()=>{A.value=[]}));const T=async e=>{const{cancel:l}=await y({title:"温馨提示",content:"确定删除？"});l||(await N({id:e}),A.value=[],H())},D=o({show:!1,item:{}}),R=async()=>{await I(D.item.video_url),D.show=!1},J=a(),S=async(e,l)=>{try{const{lists:a}=await O({page_no:e,page_size:l,status:2});B.value.complete(a)}catch(a){B.value.complete(!1)}},H=()=>{var e;null==(e=B.value)||e.refresh()};return r((()=>{clearTimeout(J.value)})),(a,t)=>{const s=k(V("u-checkbox"),Q),u=C,o=k(V("u-tag"),G),r=z,b=U,y=j,J=k(V("u-button"),$),H=k(V("z-paging"),q),K=k(V("u-popup"),L);return i(),c(_,null,[d(H,{ref_key:"pagingRef",ref:B,modelValue:E.value,"onUpdate:modelValue":t[2]||(t[2]=e=>E.value=e),"auto-clean-list-when-reload":!1,"safe-area-inset-bottom":!0,onQuery:S,fixed:!1,height:"100%"},{bottom:n((()=>[e.isBatch?(i(),p(u,{key:0,class:"h-[120rpx] flex items-center px-[20rpx] rounded-t-[25rpx] bg-white shadow-light"},{default:n((()=>[d(s,{modelValue:m(F),"onUpdate:modelValue":t[0]||(t[0]=e=>f(F)?F.value=e:null),shape:"circle"},{default:n((()=>[x(" 全选 ")])),_:1},8,["modelValue"]),d(u,null,{default:n((()=>[x("已选"),d(y,{class:"text-error"},{default:n((()=>[x(h(A.value.length),1)])),_:1}),x("/"+h(E.value.length),1)])),_:1}),d(u,{class:"ml-auto"},{default:n((()=>[d(J,{size:"medium",type:"error",disabled:!A.value.length,onClick:t[1]||(t[1]=e=>T(A.value))},{default:n((()=>[x(" 删除 ")])),_:1},8,["disabled"])])),_:1})])),_:1})):v("v-if",!0)])),default:n((()=>[d(u,{class:"w-full h-full px-[20rpx]"},{default:n((()=>[(i(!0),c(_,null,g(E.value,(a=>(i(),p(u,{class:"mb-[20rpx] rounded-[12rpx] relative shadow-[0px_3px_16px_0px_#EBEEFD] bg-white",key:a.id,onClick:e=>(e=>{if(l.isBatch){const l=A.value.findIndex((l=>l===e));l>-1?A.value.splice(l,1):A.value.push(e)}})(a.id)},{default:n((()=>[e.isBatch?(i(),p(u,{key:0,class:"absolute right-0 bottom-[30rpx]"},{default:n((()=>[d(s,{"model-value":A.value.includes(a.id),shape:"circle"},null,8,["model-value"])])),_:2},1024)):v("v-if",!0),d(u,{class:"px-[30rpx]"},{default:n((()=>[d(u,{class:"py-[30rpx] flex"},{default:n((()=>[d(u,{class:"mr-[20rpx]"},{default:n((()=>[d(o,{text:a.type_desc,size:"mini","border-color":"transparent"},null,8,["text"])])),_:2},1024),d(u,{class:"ml-auto flex items-center"},{default:n((()=>[d(r,{class:"w-[32rpx] h-[32rpx] ml-[34rpx]",src:m(W),alt:"复制",onClick:e=>m(I)(a.prompt)},null,8,["src","onClick"]),d(r,{class:"w-[32rpx] h-[32rpx] ml-[34rpx]",src:m(Y),alt:"下载",onClick:e=>(e=>{w()?(D.show=!0,D.item=e):M(e.video_url,"视频","video")})(a)},null,8,["src","onClick"]),d(r,{class:"w-[32rpx] h-[32rpx] ml-[34rpx]",src:m(Z),alt:"删除",onClick:e=>T(a.id)},null,8,["src","onClick"])])),_:2},1024)])),_:2},1024),d(u,{class:"h-[472rpx]"},{default:n((()=>[d(b,{class:"w-full h-full rounded-[10rpx] overflow-hidden",preload:"",playsinline:"","webkit-playsinline":"","x-webkit-airplay":"allow","x5-video-player-fullscreen":"true","x5-video-player-type":"h5",src:a.video_url},null,8,["src"])])),_:2},1024),d(u,{class:"line-clamp-2 mt-[20rpx]"},{default:n((()=>[x(h(a.prompt),1)])),_:2},1024),d(u,{class:"flex items-center py-[30rpx]"},{default:n((()=>[d(u,{class:"text-muted mr-auto"},{default:n((()=>[x(" 时间："+h(a.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),d(K,{modelValue:D.show,"onUpdate:modelValue":t[3]||(t[3]=e=>D.show=e),mode:"center","border-radius":"15",closeable:""},{default:n((()=>[d(u,{class:"w-[650rpx] p-[40rpx]"},{default:n((()=>[d(u,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:n((()=>[x(" 下载视频 ")])),_:1}),d(u,{class:"mb-[40rpx]"},{default:n((()=>[x(" 当前环境不支持下载，请复制链接到浏览器打开下载 ")])),_:1}),d(J,{type:"primary",shape:"circle",onClick:R},{default:n((()=>[x(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),ue=ae(l({__name:"draw",props:{isBatch:{type:Boolean}},setup(e){const l=e,r=b(),w=a(),{copy:z}=X(),U=t([]),E=t([]),A=o({status:3,model:"sd"}),F=t([{name:"SD绘画",type:"sd"},{name:"DALLE绘画",type:"dalle3"},{name:"MJ绘画",type:"mj"},{name:"豆包绘画",type:"doubao"}]),D=s({get:()=>E.value.length===U.value.length,set(){E.value.length===U.value.length?E.value=[]:E.value=U.value.map((e=>e.id))}});u((()=>l.isBatch),(()=>{E.value=[]}));const R=o({show:!1,item:{}}),J=async()=>{await z(R.item.video_url),R.show=!1},S=async(e,l)=>{try{const{lists:a}=await le({page_no:e,page_size:l,...A});w.value.complete(a)}catch(a){w.value.complete(!1)}},H=()=>{var e;null==(e=w.value)||e.refresh()};return(a,t)=>{const s=C,u=k(V("u-image"),T),o=k(V("u-checkbox"),Q),b=j,z=k(V("u-button"),$),K=k(V("z-paging"),q),M=k(V("u-popup"),L);return i(),c(_,null,[d(s,{class:"flex flex-col min-h-0 h-full"},{default:n((()=>[d(s,{class:"nav flex px-4 pb-2"},{default:n((()=>[d(s,{class:"category-list flex-1"},{default:n((()=>[(i(!0),c(_,null,g(F.value,(e=>(i(),p(s,{key:e.type,class:I(["category-item",{"category-item--active":e.type===A.model}]),onClick:l=>{return a=e.type,void(A.model!==a&&(A.model=a,H()));var a}},{default:n((()=>[x(h(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),d(s,{class:"flex-1"},{default:n((()=>[d(K,{ref_key:"pagingRef",ref:w,modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=e=>U.value=e),"auto-clean-list-when-reload":!1,"safe-area-inset-bottom":!0,onQuery:S,fixed:!1,height:"100%"},{bottom:n((()=>[e.isBatch?(i(),p(s,{key:0,class:"h-[120rpx] flex items-center px-[20rpx] rounded-t-[25rpx] bg-white shadow-light"},{default:n((()=>[d(o,{modelValue:m(D),"onUpdate:modelValue":t[0]||(t[0]=e=>f(D)?D.value=e:null),shape:"circle"},{default:n((()=>[x(" 全选 ")])),_:1},8,["modelValue"]),d(s,null,{default:n((()=>[x("已选"),d(b,{class:"text-error"},{default:n((()=>[x(h(E.value.length),1)])),_:1}),x("/"+h(U.value.length),1)])),_:1}),d(s,{class:"ml-auto"},{default:n((()=>[d(z,{size:"medium",type:"error",disabled:!E.value.length,onClick:t[1]||(t[1]=e=>(async e=>{const{cancel:l}=await y({title:"温馨提示",content:"确定删除？"});l||(await ee({ids:e}),E.value=[],H())})(E.value))},{default:n((()=>[x(" 删除 ")])),_:1},8,["disabled"])])),_:1})])),_:1})):v("v-if",!0)])),default:n((()=>[d(s,{class:"w-full h-full px-[20rpx]"},{default:n((()=>[(i(!0),c(_,null,g(U.value,(a=>(i(),p(s,{class:"inline-block w-[50%] px-[10rpx] mb-[20rpx]",key:a.id,onClick:B((e=>(e=>{if(l.isBatch){const l=E.value.findIndex((l=>l===e));l>-1?E.value.splice(l,1):E.value.push(e)}})(a.id)),["stop"])},{default:n((()=>[d(s,{class:I(["relative rounded-[15rpx] overflow-hidden",{"border-[2px] !border-primary border-solid":e.isBatch&&E.value.includes(a.id)}]),style:{border:"2px solid transparent"},onClick:e=>(e=>{l.isBatch||r.navigateTo({path:"/packages/pages/draw_detail/draw_detail",query:{id:e.id}})})(a)},{default:n((()=>[d(s,{class:"w-full h-full"},{default:n((()=>[d(u,{src:a.image,width:"100%",height:"340"},null,8,["src"])])),_:2},1024),e.isBatch?(i(),p(s,{key:0,class:"absolute right-0 top-[20rpx]"},{default:n((()=>[d(o,{"model-value":E.value.includes(a.id),shape:"circle"},null,8,["model-value"])])),_:2},1024)):v("v-if",!0)])),_:2},1032,["class","onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),d(M,{modelValue:R.show,"onUpdate:modelValue":t[3]||(t[3]=e=>R.show=e),mode:"center","border-radius":"15",closeable:""},{default:n((()=>[d(s,{class:"w-[650rpx] p-[40rpx]"},{default:n((()=>[d(s,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:n((()=>[x(" 下载图片 ")])),_:1}),d(s,{class:"mb-[40rpx]"},{default:n((()=>[x(" 当前环境不支持下载，请复制链接到浏览器打开下载，或长按图片选择保存 ")])),_:1}),d(z,{type:"primary",shape:"circle",onClick:J},{default:n((()=>[x(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-9c7f7cf9"]]),oe=ae(l({__name:"user_works",setup(l){const a=E(),u=t(!1),o=t(0),r=t([{name:"AI音乐",component:"music"},{name:"AI视频",component:"video"},{name:"AI绘画",component:"draw"}]),f=s((()=>r.value[o.value].component));return(l,t)=>{const s=k(V("page-meta"),e),g=C,b=k(V("u-navbar"),A),y=k(V("u-tabs"),F);return i(),c(_,null,[d(s,{"page-style":l.$theme.pageStyle},null,8,["page-style"]),d(g,{class:"h-full flex flex-col"},{default:n((()=>[d(b,{"back-text":m(a).getTitle||"我的作品"},{right:n((()=>[d(g,{class:"flex items-center mr-[20rpx] text-primary border-[1px] border-primary border-solid text-sm py-[7rpx] px-[16rpx] rounded-[8rpx]",onClick:t[0]||(t[0]=e=>u.value=!u.value)},{default:n((()=>[x(h(u.value?"取消":"批量管理"),1)])),_:1})])),_:1},8,["back-text"]),d(g,{class:"m-[20rpx] bg-white rounded-[16rpx] overflow-hidden"},{default:n((()=>[d(y,{list:r.value,modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),"is-scroll":!0,"active-color":l.$theme.primaryColor},null,8,["list","modelValue","active-color"])])),_:1}),d(g,{class:"flex-1 min-h-0"},{default:n((()=>["video"==m(f)?(i(),p(se,{key:0,class:"w-full h-full",isBatch:u.value},null,8,["isBatch"])):v("v-if",!0),"music"==m(f)?(i(),p(te,{key:1,class:"w-full h-full",isBatch:u.value},null,8,["isBatch"])):v("v-if",!0),"draw"==m(f)?(i(),p(ue,{key:2,class:"w-full h-full",isBatch:u.value},null,8,["isBatch"])):v("v-if",!0)])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-2eb64347"]]);export{oe as default};
