import{a as S}from"./B7GaOiDz.js";import{E as L}from"./oVx59syQ.js";import{b as B,j as N,_ as $,f as _,E as j}from"./CmRxzTqw.js";import{E as z}from"./CiabO6Xq.js";import{E as A}from"./CUKNHy7a.js";/* empty css        *//* empty css        *//* empty css        */import{u as D}from"./DNOp0HuO.js";import{u as F}from"./Bj_9-7Jh.js";import{a as G,p as T}from"./B5TkE_dZ.js";import{_ as I}from"./B2AmO2RF.js";import M from"./CqOSGOo7.js";import{_ as O}from"./B2PctvPe.js";import{_ as q}from"./C-IdjV8I.js";import P from"./B0Ee_Syw.js";import X from"./BE8Fz7EA.js";import{e as Z}from"./BhXe-NXN.js";import{l as H,j as J,r as K,c as Q,m as W,M as a,N as n,a3 as r,a1 as p,u as e,O as s,a0 as y,Z as d,a5 as g}from"./CUZG7cWw.js";import"./D6yUe_Nr.js";import"./Bh-PoUNP.js";import"./gj6kus5n.js";import"./CpufhUzm.js";import"./_i9izYtZ.js";import"./BscXL5XZ.js";import"./D5Svi-lq.js";import"./DP2rzg_V.js";import"./DlAUqK2U.js";import"./eFgaMLiC.js";import"./D5RYEqFL.js";import"./DNRqakyH.js";import"./DikNcrXK.js";import"./Bs9Zhtqd.js";import"./D8e5izeA.js";import"./xixvWuCN.js";import"./DCzKTodP.js";import"./Zz2DnF66.js";import"./DCTLXrZ8.js";import"./CfDE0MAs.js";import"./Cs0_Uid5.js";import"./DY7CbrCZ.js";import"./Cpg3PDWZ.js";import"./C7tIPmrK.js";import"./u6CVc_ZE.js";import"./C9jirCEY.js";/* empty css        */import"./l0sNRNKZ.js";/* empty css        *//* empty css        */import"./CRNANWso.js";import"./7Aafpuyn.js";import"./C3s9J3qB.js";import"./CL6uIcv0.js";import"./CXDY_LVT.js";import"./7tQUKVT9.js";import"./DSuLZIN6.js";import"./Ddo5WWE5.js";/* empty css        */import"./DjwCd26w.js";import"./CaNlADry.js";import"./ArzC3z2d.js";import"./CDwN27aR.js";import"./C3XldtMC.js";/* empty css        */const Y={key:0,class:"h-full p-[16px] flex"},ee={class:"bg-body w-[355px] h-full rounded-[12px] flex flex-col"},te={class:"p-4"},oe={class:"flex-1 min-h-0"},re={class:"p-4"},le={key:0,class:"text-sm ml-[4px]"},se={key:1,class:"text-sm ml-[4px]"},me={class:"ml-4 flex-1 min-w-0 h-full"},ie={key:1,class:"h-full flex-1 flex p-4 justify-center items-center"},Vt=H({__name:"index",setup(ae){const u=B(),x=N(),c=J(),t=K({type:1,prompt:"",scale:"1:1",image:"",style_id:[],channel:""}),{data:m,refresh:V}=D(()=>G(),{default(){return{model:{},style:[],example:{}}},lazy:!0},"$xAqLrLrbXd");Q(m,i=>{t.channel=i.channel});const k=i=>{Object.assign(t,i)},f=W(()=>m.value.model[t.channel]||{}),{lockFn:h,isLock:v}=F(async()=>{var i;try{if(!t.prompt){_.msgError(`请输入${t.type===1?"视频场景":"描述词"}`);return}if(t.type===2&&!t.image)return _.msgError("请上传上传参考图");await T({...t}),t.prompt="",t.style_id=[],(i=c.value)==null||i.refresh(),x.getUser(),V()}catch{}finally{}});return(i,o)=>{const b=S,w=L,E=j,R=z,U=A,C=$;return a(),n("div",null,[r(C,{name:"default"},{default:p(()=>[e(u).config.switch.video_status?(a(),n("div",Y,[s("div",ee,[s("div",te,[r(I,{modelValue:e(t).type,"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).type=l)},null,8,["modelValue"])]),s("div",oe,[r(w,null,{default:p(()=>[r(b,{class:"px-4",ref:"formRef",model:e(t),"label-position":"top","show-message":!1},{default:p(()=>[e(t).type===2?(a(),y(P,{key:0,modelValue:e(t).image,"onUpdate:modelValue":o[1]||(o[1]=l=>e(t).image=l)},null,8,["modelValue"])):d("",!0),r(O,{type:e(t).type,modelValue:e(t).prompt,"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).prompt=l),config:e(m).example,showTranslate:!!e(m).translate_switch},null,8,["type","modelValue","config","showTranslate"]),r(M,{modelValue:e(t).scale,"onUpdate:modelValue":o[3]||(o[3]=l=>e(t).scale=l)},null,8,["modelValue"]),e(m).style.length?(a(),y(q,{key:1,"style-list":e(m).style,modelValue:e(t).style_id,"onUpdate:modelValue":o[4]||(o[4]=l=>e(t).style_id=l)},null,8,["style-list","modelValue"])):d("",!0)]),_:1},8,["model"])]),_:1})]),s("div",re,[r(E,{size:"large",class:"w-full",type:"primary",loading:e(v),onClick:e(h)},{default:p(()=>[s("div",null,[o[5]||(o[5]=s("span",{class:"text-base font-bold"},"立即生成",-1)),e(m).is_member?(a(),n("span",le," 会员免费 ")):e(f).price>0?(a(),n("span",se," 消耗 "+g(e(f).price)+" "+g(e(u).getTokenUnit),1)):d("",!0)])]),_:1},8,["loading","onClick"])])]),s("div",me,[r(X,{ref_key:"videoResultRef",ref:c,onRegenerate:k},null,512)])])):(a(),n("div",ie,[r(U,null,{icon:p(()=>[r(R,{class:"w-[150px] dark:opacity-60",src:e(Z)},null,8,["src"])]),title:p(()=>o[6]||(o[6]=[s("div",{class:"text-info"},"功能暂未开启",-1)])),_:1})]))]),_:1})])}}});export{Vt as default};
