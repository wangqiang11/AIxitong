import{l as J,r as I,b as K,ai as L,j as Q,M as r,N as c,a3 as i,a1 as _,O as a,a7 as V,u as n,_ as $,ao as j,Z as v,a8 as W,aG as X,a0 as ee,$ as z,a5 as b,a4 as D,ag as te,aH as oe}from"./CUZG7cWw.js";import{_ as se}from"./CfDE0MAs.js";import{E as ae}from"./DluKwKHO.js";import{E as re}from"./Zz2DnF66.js";import{_ as ie}from"./eFgaMLiC.js";import{l as ne,j as le,cF as ce,cZ as de,H as pe,E as _e,ct as me,f as ue}from"./CmRxzTqw.js";import{E as fe}from"./CiabO6Xq.js";import{E as ge}from"./C9jirCEY.js";/* empty css        */import"./l0sNRNKZ.js";/* empty css        *//* empty css        */import{u as R}from"./DNOp0HuO.js";import{b as xe}from"./CRNANWso.js";import{c as ve,v as ye}from"./CJgd20ip.js";import{a as he}from"./DjwCd26w.js";import{e as we}from"./BhXe-NXN.js";import{_ as be}from"./DlAUqK2U.js";import"./Cs0_Uid5.js";import"./DY7CbrCZ.js";import"./Cpg3PDWZ.js";import"./DCTLXrZ8.js";import"./CpufhUzm.js";import"./_i9izYtZ.js";import"./BscXL5XZ.js";const ke={class:"flex-1 min-h-0 mx-[16px] relative"},Ce=["onClick"],Ee={class:"flex-1 min-h-[70vh] overflow-hidden mx-auto"},Se=["infinite-scroll-disabled"],Be={key:0,class:"grid grid-cols-4 xl:grid-cols-4 2xl:grid-cols-5 4xl:grid-cols-6 8xl:grid-cols-7 gap-4"},Ie={class:"relative flex-1"},Le={class:"bg-[var(--el-bg-color-page)] rounded-t-[12px] overflow-hidden"},Ve={class:"w-full h-full p-[15px] box-border"},$e={class:"line-clamp-2"},je={class:"flex justify-between px-[15px] pb-[20px]"},ze={key:0,class:"flex items-center"},De={class:"text-[#BBBBBB] ml-[6px] w-[100px] truncate"},Re={class:"flex items-center"},qe=["onClick"],Te=["onClick"],Ne={key:1,class:"flex justify-center items-center mt-[50px]"},Pe={class:"flex flex-col justify-center items-center w-full h-[60vh]"},Ae=J({__name:"video",props:{keyword:{}},async setup(q){let d,f;const T=q;ne();const g=le(),p=I({page_no:0,page_size:20,keyword:"",category_id:""}),o=I({more:!0,count:0,loading:!1,lists:[]}),k=K(0),{data:C}=([d,f]=L(()=>R(()=>he({type:de.VIDEO}),{default(){return[]},transform(e){return[{id:"",name:"全部"}].concat(e)},lazy:!0},"$F7shVYj0fG")),d=await d,f(),d);[d,f]=L(()=>R(()=>y(),{lazy:!0},"$Cw5rrd3Tss")),await d,f();const y=async()=>{if(!o.loading){if(o.more)p.page_no+=1;else return;o.loading=!0;try{const e=await ve(p),{lists:s,page_no:l,page_size:m,count:u}=e;l*m>u&&(o.more=!1),l==1?o.lists=s:o.lists=[...o.lists,...s]}finally{setTimeout(()=>o.loading=!1,200)}}},x=()=>{p.page_no=0,o.more=!0,y()},N=async e=>{if(!g.isLogin){g.toggleShowLogin(!0);return}await ye({records_id:e.id,status:e.is_collect?0:1}),p.category_id===0?x():e.is_collect=e.is_collect?0:1},P=async(e,s)=>{if(!g.isLogin){g.toggleShowLogin(!0);return}try{const l=await $request.get({url:e,responseType:"blob",baseURL:""},{isReturnDefaultResponse:!0,apiPrefix:""});console.log(l);const m=new Blob([l._data],{type:l.headers.get("Content-Type")}),u=window.URL.createObjectURL(m);xe(u,s)}catch{ue.msgError("文件下载失败")}},A=Q(),O=e=>{A.value=e,console.log(e)},E=e=>{var s;k.value=e,p.category_id=(s=C.value[e])==null?void 0:s.id,x()};return E(0),ce(()=>T.keyword,e=>{p.keyword=e,x()},{debounce:500}),(e,s)=>{const l=oe,m=X,u=se,U=ae,S=re,F=ie,G=pe,H=fe,M=_e,Z=ge;return r(),c("div",ke,[i(m,{slidesPerView:"auto",spaceBetween:16,class:"category-lists",style:{padding:"10px 0"},onSwiper:O},{default:_(()=>[(r(!0),c($,null,j(n(C),(t,h)=>(r(),ee(l,{key:t.id,style:{width:"auto","margin-right":"12px"}},{default:_(()=>[Object.keys(t).includes("name")?(r(),c("div",{key:0,class:z(["category-item bg-white",{"is-active":n(k)===h}]),onClick:w=>E(h)},b(t.name),11,Ce)):v("",!0)]),_:2},1024))),128))]),_:1}),a("div",Ee,[V((r(),c("div",{class:"model-lists mb-[10px] mx-[0px]","infinite-scroll-distance":"50","infinite-scroll-delay":200,"infinite-scroll-disabled":!n(o).more},[n(o).lists.length?(r(),c("div",Be,[(r(!0),c($,null,j(n(o).lists,(t,h)=>{var w,B;return r(),c("div",{key:t.id,class:"flex flex-col min-h-0 bg-body rounded-[12px] cursor-pointer"},[a("div",Ie,[a("div",Le,[i(u,{src:t.video_url,type:"video",ratio:[4,3]},null,8,["src"])])]),a("div",Ve,[a("div",$e,b(t.prompt),1)]),a("div",je,[(w=t==null?void 0:t.user_info)!=null&&w.image?(r(),c("div",ze,[i(U,{size:28,src:(B=t==null?void 0:t.user_info)==null?void 0:B.image},null,8,["src"]),a("p",De,b(t.user_info.name),1)])):v("",!0),a("div",Re,[i(S,{effect:"dark",content:"收藏 / 取消收藏",placement:"bottom"},{default:_(()=>[a("div",{class:"image-praise relative dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-md p-1 box-content",onClick:D(Y=>N(t),["stop"])},[a("div",{class:z(["praise-animate",t.is_collect?"praise-entry":"praise-leave"])},null,2)],8,qe)]),_:2},1024),i(S,{effect:"dark",content:"下载视频",placement:"bottom"},{default:_(()=>[a("div",{onClick:D(Y=>P(t.video_url,"视频"),["stop"])},[i(F,{class:"cursor-pointer dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-md p-1 box-content",name:"el-icon-Download",size:"24",color:"#556477"})],8,Te)]),_:2},1024)])])])}),128))])):v("",!0),n(o).loading?(r(),c("div",Ne,[i(G,{size:"25",class:"is-loading"},{default:_(()=>[i(n(me))]),_:1}),s[0]||(s[0]=a("span",{class:"mt-[4px] ml-[10px] text-[#999999]"},"加载中...",-1))])):v("",!0),V(a("div",Pe,[i(H,{class:"w-[200px] h-[200px]",src:n(we)},null,8,["src"]),s[2]||(s[2]=a("div",{class:"text-tx-regular mb-4"},"当前选择暂无视频～",-1)),i(M,{type:"primary",onClick:x},{default:_(()=>s[1]||(s[1]=[te(" 点击刷新 ")])),_:1})],512),[[W,!n(o).lists.length&&!n(o).loading]])],8,Se)),[[Z,y]])])])}}}),_t=be(Ae,[["__scopeId","data-v-26cc000b"]]);export{_t as default};
