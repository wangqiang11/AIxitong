import{E as O,a as q}from"./DHUC3PVh.js";import{_ as y}from"./eFgaMLiC.js";import{E as A}from"./CiabO6Xq.js";import{E as F}from"./oVx59syQ.js";import{E as Z}from"./C9jirCEY.js";import{l as G,j as H,b as J,f as b}from"./CmRxzTqw.js";/* empty css        *//* empty css        */import{l as Q,b as S,r as C,j as W,E as X,M as n,N as l,O as e,a3 as a,a1 as E,u as p,a0 as Y,Z as d,_ as N,n as v,a7 as ee,ao as te,a4 as w,a5 as h}from"./CUZG7cWw.js";import{_ as oe}from"./BXBQD0li.js";import{_ as se}from"./CgHpiIC_.js";import{r as ae,c as ie}from"./Dl64kDm5.js";import{u as ne}from"./CsJP_4je.js";import{_ as re}from"./DlAUqK2U.js";import"./7tQUKVT9.js";import"./Dbi96Hzd.js";import"./CpufhUzm.js";import"./_i9izYtZ.js";import"./BscXL5XZ.js";import"./B7GaOiDz.js";import"./D6yUe_Nr.js";import"./Bh-PoUNP.js";import"./gj6kus5n.js";import"./C7tIPmrK.js";import"./Zz2DnF66.js";import"./DCTLXrZ8.js";import"./u6CVc_ZE.js";import"./DB7Ysqj9.js";import"./CXDY_LVT.js";import"./DCzKTodP.js";import"./D8e5izeA.js";import"./DSuLZIN6.js";import"./Ddo5WWE5.js";import"./Bf_xRNbS.js";import"./BOx_5T3X.js";/* empty css        *//* empty css        *//* empty css        */import"./CaNlADry.js";import"./ArzC3z2d.js";import"./CDwN27aR.js";import"./C3XldtMC.js";/* empty css        */import"./DdtGP7XX.js";import"./Dhda0m3Y.js";import"./DNRqakyH.js";import"./DikNcrXK.js";import"./Bs9Zhtqd.js";import"./DP2rzg_V.js";/* empty css        *//* empty css        */const le={class:"h-full flex flex-col"},pe={class:"px-[20px] py-[16px] mt-[-8px]"},ce={class:"flex-1 min-h-0"},me={key:0,class:"flex flex-wrap px-[20px]","infinite-scroll-distance":"50"},de=["onClick"],fe={class:"flex relative"},ue=["onClick"],_e={class:"ml-1 text-sm"},xe={key:0,class:"kb-btns absolute bottom-0 left-0 w-full flex bg-[rgba(0,0,0,0.4)] py-[6px] text-white"},ge=["onClick"],be=["onClick"],ve={class:"px-[15px] py-[12px]"},we={class:"text-[18px] truncate"},he={class:"flex items-center mt-[10px]"},ke={class:"text-info flex-1 min-w-0 truncate"},ye={key:1},Se=Q({__name:"kb",setup(Ce){const $=G(),r=H(),D=ne(),I=J(),f=S({type:"0"});C({show:!1,num:0,kbId:0,isOwner:!1});const m=S(!1),u=W(),o=C({pageNo:1,count:0,pageSize:15,lists:[]}),L=async()=>{o.pageNo=1,await v(),await c()},c=async()=>{const i=await ae({...f.value,page_no:o.pageNo,page_size:o.pageSize});o.count=i.count,o.pageNo===1&&(o.lists=[]),o.lists.push(...i.lists)},R=()=>{r.isLogin&&o.count>=o.pageNo*o.pageSize&&(o.pageNo++,c())},V=async()=>{if(r.userInfo.kb_num<=0){I.getIsShowRecharge?(await b.confirm("知识库数量已用完，请前往充值"),D.toggleShow(!0)):b.msgError("知识库数量已用完。请联系客服增加");return}if(!r.isLogin)return r.toggleShowLogin();m.value=!0,await v(),u.value.open()},j=async i=>{m.value=!0,await v(),u.value.open({id:i})},z=async(i,t)=>{await b.confirm(`确认删除 ${t} 吗？`),await ie({id:i}),c()},k=(i,t)=>{$.push(`/application/kb/detail?id=${i}&type=${t}`)};return X(()=>{c()}),(i,t)=>{const _=q,B=O,P=y,T=A,x=y,M=F,U=Z;return n(),l(N,null,[e("div",le,[e("div",pe,[a(B,{modelValue:p(f).type,"onUpdate:modelValue":t[0]||(t[0]=s=>p(f).type=s),class:"demo-tabs",onTabChange:L},{default:E(()=>[a(_,{label:"全部知识库",name:"0"}),a(_,{label:"我的知识库",name:"1"}),a(_,{label:"共享给我",name:"2"})]),_:1},8,["modelValue"])]),e("div",ce,[a(M,null,{default:E(()=>[p(r).isLogin?ee((n(),l("div",me,[e("div",{class:"sm:w-[200px] w-full bg-body rounded-[12px] overflow-hidden cursor-pointer mr-[20px] flex-none mb-[20px] flex flex-col items-center justify-center min-h-[150px]",onClick:V},[a(P,{name:"el-icon-Plus",size:24}),t[2]||(t[2]=e("div",{class:"mt-[10px]"},"新增知识库",-1))]),(n(!0),l(N,null,te(p(o).lists,(s,K)=>(n(),l("div",{key:K,class:"kb-item sm:w-[200px] w-full bg-body rounded-[12px] overflow-hidden cursor-pointer mr-[20px] flex-none mb-[20px]",onClick:g=>k(s.id,"dataStudy")},[e("div",fe,[a(T,{src:s.image,class:"w-full h-[160px]",fit:"cover"},null,8,["src"]),e("div",{class:"bg-[rgba(0,0,0,0.4)] text-white absolute px-1 right-[10px] top-[10px] rounded flex items-center",onClick:w(g=>k(s.id,"teamData"),["stop"])},[a(x,{name:"el-icon-User"}),e("span",_e,h(s.team_people),1)],8,ue),s.is_super?(n(),l("div",xe,[e("div",{class:"flex flex-1 items-center justify-center",onClick:w(g=>j(s.id),["stop"])},[a(x,{name:"el-icon-Edit"}),t[3]||(t[3]=e("span",{class:"ml-1"}," 编辑 ",-1))],8,ge),e("div",{class:"flex flex-1 items-center justify-center",onClick:w(g=>z(s.id,s.name),["stop"])},[a(x,{name:"el-icon-Delete"}),t[4]||(t[4]=e("span",{class:"ml-1"}," 删除 ",-1))],8,be)])):d("",!0)]),e("div",ve,[e("div",we,h(s.name),1),e("div",he,[e("div",ke,h(s.intro||"这个知识库还没介绍呢～"),1)])])],8,de))),128))])),[[U,R]]):d("",!0),p(r).isLogin?d("",!0):(n(),l("div",ye,[a(se)]))]),_:1})])]),p(m)?(n(),Y(oe,{key:0,ref_key:"popRef",ref:u,onSuccess:t[1]||(t[1]=()=>{m.value=!1,c()})},null,512)):d("",!0)],64)}}}),yt=re(Se,[["__scopeId","data-v-84898f5a"]]);export{yt as default};
