"use strict";const e=require("../../../../common/vendor.js");exports.useImageSplit=()=>{const t=e.ref([]),a=(t,a,s,n,i)=>{const r=e.index.createOffscreenCanvas({type:"2d",width:n,height:i}),c=r.getContext("2d"),g=t.getImageData(a,s,n,i);return c.putImageData(g,0,0),r.toDataURL("image/png",1)};return{images:t,splitImage:s=>new Promise(((n,i)=>{e.index.getImageInfo({src:s,success:async s=>{const i=e.index.createOffscreenCanvas({type:"2d",width:s.width,height:s.height}),r=i.getContext("2d"),c=i.createImage();await new Promise((e=>{c.src=s.path,c.onload=e})),r.clearRect(0,0,s.width,s.height),r.drawImage(c,0,0,s.width,s.height);const g=r.canvas.width/2,h=r.canvas.height/2;t.value=[];for(let e=0;e<2;e++)for(let s=0;s<2;s++){const n=a(r,s*g,e*h,g,h);t.value.push(n)}n(t.value)},fail:e=>{i(e)}})}))}};
