"use strict";const e=require("../../../common/vendor.js"),u=require("../../../stores/user.js"),t=require("../../../api/video.js"),s=require("../../../hooks/useCopy.js"),i=require("../../../api/square.js"),r=require("../../../enums/appEnums.js"),o=require("../../../config/index.js");if(require("../../../api/user.js"),require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../router/index.js"),require("../../../utils/cache.js"),require("../../../enums/constantEnums.js"),require("../../../utils/client.js"),require("../../../utils/auth.js"),require("../../../utils/unique-id.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button")+e.resolveComponent("u-popup")+e.resolveComponent("page-status"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js")+(()=>"../../../components/page-status/page-status.js"))();const a=e.defineComponent({__name:"video_detail",setup(a){const n=o.config.baseUrl,{copy:l}=s.useCopy(),c=e.useRoute(),p=e.useRouter(),d=u.useUserStore(),v=e.ref(r.PageStatusEnum.LOADING),m=e.ref({status_desc:"生成成功",style_desc:"电影镜头",type_desc:"文生视频",id:96,prompt:"",type:1,tags:"电影镜头",image:"",nickname:"",channel:"openai_hk",video_url:"",style_id:"4",status:2,create_time:""}),g=e.reactive({id:""}),q=e.ref(!1),y=async()=>{if(d.isLogin)try{await i.videoSquareCollect({records_id:g.id,status:m.value.is_collect?0:1}),m.value.is_collect=m.value.is_collect?0:1}catch(u){console.error(u),e.index.$u.toast(JSON.stringify(u))}else p.navigateTo("/pages/login/login")},_=()=>{d.isLogin?q.value=!0:p.navigateTo("/pages/login/login")},j=async()=>{await l(m.value.video_url),q.value=!1};return e.onLoad((async()=>{console.log(c.query);const e=c.query.id;await(async e=>{try{if(c.query.collectId){const u=await i.getSquareVideoDetail({id:e});m.value=u}else{const u=await t.getVideoDetail({id:e});m.value=u[0]}v.value=r.PageStatusEnum.NORMAL}catch(u){v.value=r.PageStatusEnum.ERROR}})(e),g.id=c.query.collectId})),(u,t)=>{var s,i,r;return{a:u.$theme.navColor,b:u.$theme.navBgColor,c:u.$theme.pageStyle,d:m.value.video_url,e:e.o((u=>{var t;return e.unref(l)(null==(t=m.value)?void 0:t.prompt)})),f:e.t(null==(s=m.value)?void 0:s.prompt),g:e.t(m.value.nickname||(null==(r=null==(i=e.unref(d))?void 0:i.userInfo)?void 0:r.nickname)),h:e.t(m.value.create_time),i:e.t(m.value.type_desc),j:e.t(m.value.style_desc),k:`url(${e.unref(n)}resource/image/api/default/praise02.png)`,l:e.n(m.value.is_collect?"praise-entry":"praise-leave"),m:e.o(y),n:e.p({name:"download",size:"42"}),o:e.o(_),p:e.o(_),q:e.p({type:"primary",size:"default",customStyle:{padding:"0 30rpx",height:"82rpx",width:"400rpx",margin:"0"}}),r:e.o(j),s:e.p({type:"primary",shape:"circle"}),t:e.o((e=>q.value=e)),v:e.p({mode:"center","border-radius":"15",closeable:!0,modelValue:q.value}),w:e.p({status:v.value})}}}}),n=e._export_sfc(a,[["__scopeId","data-v-f670ce98"]]);wx.createPage(n);
