"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../api/robot.js"),t=require("../../../../stores/user.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../router/index.js"),require("../../../../utils/cache.js"),require("../../../../enums/constantEnums.js"),require("../../../../config/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),require("../../../../api/user.js"),require("../../../../utils/auth.js"),require("../../../../utils/unique-id.js"),!Array){(e.resolveComponent("u-image")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const s=e.defineComponent({__name:"robot",props:{keyword:null},setup(s){const i=s,u=e.useRouter(),a=t.useUserStore(),o=e.reactive({lists:[],current:0}),n=e.ref([]),c=e.shallowRef(),l=async(e,t)=>{var s,u;try{const{lists:u=[]}=await r.getRobotSquare({keyword:i.keyword,cid:o.current,page_size:t,page_no:e});null==(s=c.value)||s.complete(u)}catch(a){null==(u=c.value)||u.complete(!1)}},d=()=>{var e;null==(e=c.value)||e.reload()};return e.watch((()=>o.current),(()=>{d()})),e.watchDebounced((()=>i.keyword),(e=>{d()}),{debounce:500}),e.onMounted((async()=>{await(async()=>{o.lists=await r.getRobotCategory(),o.lists.unshift({name:"全部",id:0})})()})),(t,s)=>({a:e.f(o.lists,((r,t,s)=>({a:e.t(r.name),b:r.id==o.current?1:"",c:r.id,d:e.o((e=>o.current=r.id),r.id)}))),b:e.f(n.value,((t,s,i)=>e.e({a:"58b8d950-1-"+i+",58b8d950-0",b:e.p({src:t.image,width:"80",height:"80",shape:"circle"}),c:e.t(t.name),d:null==t?void 0:t.author},(null==t?void 0:t.author)?{e:e.t(t.author)}:{},{f:e.t(t.intro),g:t.id,h:e.o((e=>(async e=>{a.isLogin||u.navigateTo("/pages/login/login");const{id:t}=await r.putRobotRecord({id:e.id});u.navigateTo({path:"/packages/pages/square_chat/square_chat",query:{id:t,square_id:e.id}})})(t)),t.id)}))),c:e.sr(c,"58b8d950-0",{k:"pagingRef"}),d:e.o(l),e:e.o((e=>n.value=e)),f:e.p({fixed:!1,"auto-clean-list-when-reload":!1,modelValue:n.value})})}}),i=e._export_sfc(s,[["__scopeId","data-v-58b8d950"]]);wx.createComponent(i);
