"use strict";const e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+n+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+i+t+o+a+p)();const n=()=>"./components/release-web.js",t=()=>"./components/release-api.js",o=()=>"./components/js-embedding.js",a=()=>"./components/oa-config.js",i=()=>"./components/call-description.js",p=()=>"./components/poster.js",s=e.defineComponent({__name:"release_robot",setup(n){const t=e.useRoute(),o=e.shallowRef(),a=e.computed((()=>t.query.key)),i=e.computed((()=>t.query.id)),p=e.reactive({show:!1,apikey:""}),s=e.reactive({show:!1,apikey:""}),r=e.reactive({show:!1,url:"",apikey:"",shareId:""});return(n,t)=>e.e({a:n.$theme.navColor,b:n.$theme.navBgColor,c:n.$theme.pageStyle,d:"web"===e.unref(a)},"web"===e.unref(a)?{e:e.w((({item:n},t,o)=>({a:"5685a3db-1-"+o+",5685a3db-0",b:e.o((e=>{return t=n,r.show=!0,r.url=t.share_bg,r.apikey=t.apikey,void(r.shareId=t.id);var t})),c:o,d:t})),{name:"actions",path:"e",vueId:"5685a3db-0"}),f:e.p({name:"photo",size:32}),g:e.sr(o,"5685a3db-0",{k:"releaseWebRef"}),h:e.p({title:"发布为网页/朋友圈海报",type:1,"robot-id":e.unref(i),"show-more-action":!0})}:{},{i:"js"===e.unref(a)},"js"===e.unref(a)?{j:e.w((({item:n},t,o)=>({a:"5685a3db-3-"+o+",5685a3db-2",b:e.o((e=>(e=>{p.show=!0,p.apikey=e.apikey})(n))),c:o,d:t})),{name:"actions",path:"j",vueId:"5685a3db-2"}),k:e.p({name:"eye",size:32}),l:e.p({title:"发布为JS",type:2,"robot-id":e.unref(i)})}:{},{m:"oa"===e.unref(a)},"oa"===e.unref(a)?{n:e.w((({item:n},t,o)=>({a:"5685a3db-5-"+o+",5685a3db-4",b:e.o((e=>(e=>{s.show=!0,s.apikey=e.apikey})(n))),c:o,d:t})),{name:"actions",path:"n",vueId:"5685a3db-4"}),o:e.p({name:"chat",size:32}),p:e.p({title:"发布为公众号",type:3,"robot-id":e.unref(i)})}:{},{q:"api"===e.unref(a)},"api"===e.unref(a)?{r:e.p({size:"medium"}),s:e.p({title:"API调用说明",content:"\n【接口地址】\n请求方式: POST\n接口地址: /api/v1/chat/completions\n调用示例: http(s)://yourdomain.com/api/v1/chat/completions\n\n【Body参数】\n``` json\n{\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"你要提问的问题\"\n        }\n    ]\n}\n```\n\n【Header参数】\nAuthorization: 此参数是发布渠道的 apikey (必须的)\n\n【PHP代码示例】\n``` php\npublic function chat()\n{\n    // 设置SSE响应\n    header('Access-Control-Allow-Origin: *');\n    header('Connection: keep-alive');\n    header('Content-Type: text/event-stream');\n    header('Cache-Control: no-cache');\n    header('X-Accel-Buffering: no');\n    \n    // 处理响应回调\n    $response = true;\n    $callback = function ($ch, $data) use (&$response, &$total) {\n        if (str_starts_with($data, 'data:')) {\n            echo $data;\n        }\n\n        if(!connection_aborted()){\n            return strlen($data);\n        } else {\n            return 1;\n        }\n    };\n\n    // 请求的参数\n    $data = [\n        'messages'  => [\n            ['role'=>'user', 'content'=>'你好吗?']\n        ]\n    ];\n\n    // 请求头参数\n    $headers  = [\n        'Accept: application/json',\n        'Content-Type: application/json',\n        'Authorization: web-8b582192d72b20931b9142155d1476cc7Fnmp' // 此参数是 apikey (必须的)\n    ];\n\n    // 发起接口请求\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, 'http(s)://【你自己的域名】/api/v1/chat/completions');\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);\n    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n    curl_setopt($ch, CURLOPT_POST, 1);\n    curl_setopt($ch, CURLOPT_TIMEOUT, 100);\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));\n    curl_setopt($ch, CURLOPT_WRITEFUNCTION, $callback);\n    curl_exec($ch);\n    curl_close($ch);\n\n    if(true !== $response){\n        throw new Exception($response);\n    }\n\n    exit();\n}\n```\n"}),t:e.p({title:"发布为API",type:4,"robot-id":e.unref(i)})}:{},{v:"qwx"===e.unref(a)},"qwx"===e.unref(a)?{w:e.p({size:"medium"}),x:e.p({title:"微信调用说明",content:'\n【接口地址】\n请求方式: POST\n接口地址: /api/v1/chat/completions\n调用示例: http(s)://yourdomain.com/api/v1/chat/completions\n\n【参数说明】\nopen_ai_api_key:  apiKey密钥\nopen_ai_api_base: 请求的域名\n\n```\n{\n  "channel_type": "wx", // 渠道类型: wx=个人微信的意思\n  "open_ai_api_key": "wx-f228079c92d0ab83548067bba13967d1xR1cu",          // 修改此处密钥\n  "open_ai_api_base": "http(s)://yourdomain.com/api/v1", // 修改此处域名\n    "model": "gpt-3.5-turbo",\n    "text_to_image": "dall-e-2",\n    "voice_to_text": "openai",\n    "text_to_voice": "openai",\n    "proxy": "",\n    "hot_reload": false,\n    "single_chat_prefix": [\n        "bot",\n        "@bot"\n    ],\n    "single_chat_reply_prefix": "[bot] ",\n    "group_chat_prefix": [\n        "@bot"\n    ]\n    ......\n}\n```\n\n【更详细的接入文档】\n请参考官方产品对接微信文档。\n'}),y:e.p({title:"发布为企业微信",type:5,"robot-id":e.unref(i)})}:{},{z:"yd"===e.unref(a)},"yd"===e.unref(a)?{A:e.p({size:"medium"}),B:e.p({title:"影刀RPA调用说明",content:"\n【基础说明】\n通过影刀RPA在微信或企业微信中模拟人类操作鼠标键盘进行智能体聊天\n\n【影刀RPA】\n应用地址: https://api.winrobot360.com/redirect/robot/share?inviteKey=39426041fae2e52c\n\n【影刀RPA应用参数说明】\n接口url: http(s)://yourdomain.com/api/v1/chat/completions（调用示例）\n接口key: api密钥\n微信昵称：群聊中充当AI客服的微信名称\n\n【注意事项】\n1，只能打开微信或者企业微信中的一个（最小化也算打开）\n2，微信（或企业微信）窗口不能有遮挡，否则有可能发送不成功\n3，微信昵称前增加@，便于影刀RPA监听群聊回复，例如'@AI客服'\n4，企业微信需设置会话显示模式为消息气泡左对齐（设置-通用-会话显示模式-消息气泡左对齐）\n\n【更详细的接入文档】\n请参考官方产品对接影刀RPA文档。\n"}),C:e.p({title:"影刀RPA",type:7,"robot-id":e.unref(i)})}:{},{D:e.o((e=>p.show=e)),E:e.p({apikey:p.apikey,show:p.show}),F:e.o((e=>s.show=e)),G:e.p({apikey:s.apikey,show:s.show}),H:e.o((n=>e.unref(o).refresh())),I:e.o((e=>r.show=e)),J:e.p({...r,show:r.show})})}});wx.createPage(s);
