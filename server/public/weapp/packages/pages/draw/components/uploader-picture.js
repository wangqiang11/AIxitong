"use strict";const e=require("../../../../common/vendor.js"),i=require("../../../../common/assets.js"),u=require("../../../../api/app.js"),s=require("../../../../hooks/useLockFn.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-loading")+e.resolveComponent("uni-file-picker")+e.resolveComponent("u-form-item"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-loading/u-loading.js")+(()=>"../../../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-form-item/u-form-item.js"))();const r=e.defineComponent({__name:"uploader-picture",props:{modelValue:{default:""},type:{default:"image"}},emits:["update:modelValue"],setup(r,{emit:o}){const n=r,{modelValue:t}=e.useVModels(n,o),l=e.shallowRef(),a=e.ref({}),{lockFn:c,isLock:m}=s.useLockFn((async i=>{var s;null==(s=l.value)||s.clearFiles();const[r]=i.tempFiles;if(!r)return e.index.$u.toast("文件不存在");if(r.size>10485760)e.index.$u.toast("文件大小不能超过10MB");else try{const e=await u.uploadFileByType(n.type,{filePath:r.url,name:"file"});t.value=e.uri,a.value=r}catch(o){e.index.$u.toast(o)}}));return(u,s)=>e.e({a:e.unref(t)},e.unref(t)?{b:a.value.url||e.unref(t),c:e.p({name:"close-circle-fill",size:50}),d:e.o((e=>t.value=""))}:{e:i._imports_0$12,f:e.t("支持图片格式：JPG/JPEG/PNG，低于10MB")},{g:e.unref(m)},e.unref(m)?{h:e.p({size:"40",mode:"circle"})}:{},{i:e.sr(l,"4c87dd36-1,4c87dd36-0",{k:"filePickerRef"}),j:e.o(e.unref(c)),k:e.p({limit:"1",fileMediatype:"image",mode:"list","list-styles":{display:"none"},"auto-upload":!1}),l:e.p({prop:"image",label:"上传参考图",required:!0})})}}),o=e._export_sfc(r,[["__scopeId","data-v-4c87dd36"]]);wx.createComponent(o);
