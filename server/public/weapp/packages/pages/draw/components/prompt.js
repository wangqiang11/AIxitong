"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../api/draw.js"),u=require("../../../../hooks/useLockFn.js"),r=require("../../../../stores/user.js"),l=require("../../../../common/assets.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../router/index.js"),require("../../../../utils/cache.js"),require("../../../../enums/constantEnums.js"),require("../../../../config/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),require("../../../../api/user.js"),require("../../../../utils/auth.js"),require("../../../../utils/unique-id.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("l-textarea")+e.resolveComponent("u-form-item")+e.resolveComponent("u-loading"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../components/l-textarea/l-textarea.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-form-item/u-form-item.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-loading/u-loading.js")+a)();const a=()=>"./keyword-suggestion.js",s=e.defineComponent({__name:"prompt",props:{modelValue:{default:""},model:{default:""},negative:{default:""},showTranslate:{type:Boolean,default:!1},isNegative:{type:Boolean,default:!0}},emits:["update:modelValue","update:negative"],setup(a,{emit:s}){const n=a,t=e.shallowRef(),i=e.useRouter(),d=r.useUserStore(),p=e.useVModel(n,"modelValue",s),m=e.useVModel(n,"negative",s),v={1:{label:"描述词",placeholder:"请输入英文描述词，生成效果会更好；描述词越详细，生成的图片效果更加真实哦~ ~"},2:{label:"反向词",placeholder:"输入你希望AI绘制的内容，例如：white hair,sit，这样AI尽可能避免绘制白色的毛发和坐着的姿势"}},c=e.ref(1),f=e.computed((()=>v[c.value]||{})),g=()=>{d.isLogin||i.navigateTo("/pages/login/login")},{lockFn:j,isLock:q}=u.useLockFn((async()=>{if(!p.value)return e.index.$u.toast("请输入描述词");const u=await o.translate({prompt:p.value,model:n.model});p.value=u.result})),h=e.ref(0),x=e.ref([]),w=async()=>{var e,u;try{if(x.value.length)return h.value>=x.value.length-1&&(h.value=-1),h.value+=1,void(p.value=(null==(e=x.value[h.value])?void 0:e.prompt_en)||"");x.value=await o.drawingExample({model:n.model}),p.value=(null==(u=x.value[0])?void 0:u.prompt_en)||""}catch(r){console.log("请求绘画示例失败=>",r)}};return(o,u)=>e.e({a:1==c.value},1==c.value?{b:e.p({name:"trash"}),c:e.o((e=>p.value="")),d:e.o(g),e:e.o((o=>e.isRef(p)?p.value=o:null)),f:e.p({rows:4,"custom-class":{background:"#fff",paddingBottom:"70rpx",fontSize:"28rpx",borderRadius:a.isNegative?"16rpx 0 0 16rpx":"16rpx"},placeholder:e.unref(f).placeholder,modelValue:e.unref(p)})}:{g:e.p({name:"trash"}),h:e.o((e=>m.value="")),i:e.o(g),j:e.o((o=>e.isRef(m)?m.value=o:null)),k:e.p({rows:4,"custom-class":{background:"#fff",paddingBottom:"70rpx",fontSize:"28rpx",borderRadius:"16rpx 0 0 16rpx"},placeholder:e.unref(f).placeholder,modelValue:e.unref(m)})},{l:a.isNegative},a.isNegative?{m:e.f(v,((o,u,r)=>({a:e.t(o.label),b:o.label,c:u==c.value?1:"",d:e.o((e=>c.value=u),o.label)})))}:{},{n:e.p({prop:"title"}),o:e.unref(l.ExampleIcon),p:e.o((o=>{var u;return null==(u=e.unref(t))?void 0:u.open()})),q:a.showTranslate},a.showTranslate?e.e({r:e.unref(q)},e.unref(q)?{s:e.p({mode:"flower",size:"24"})}:{t:e.unref(l.TranslateIcon)},{v:e.o(((...o)=>e.unref(j)&&e.unref(j)(...o)))}):{},{w:e.o(w),x:e.sr(t,"d171dd65-6",{k:"keywordSuggestionRef"}),y:e.o((o=>e.isRef(p)?p.value=o:null)),z:e.p({model:a.model,modelValue:e.unref(p)})})}}),n=e._export_sfc(s,[["__scopeId","data-v-d171dd65"]]);wx.createComponent(n);
