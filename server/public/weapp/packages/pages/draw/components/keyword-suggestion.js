"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../common/assets.js"),t=require("../../../../api/draw.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const o=e.defineComponent({__name:"keyword-suggestion",props:{modelValue:{default:""},model:{default:""}},emits:["update:modelValue","close"],setup(o,{expose:l,emit:a}){const r=o,s=e.ref(!1),n=e.ref(-1),p=e.ref([]),i=e.ref({prompt:[],cate_prompt:[]}),m=e.ref([]),c=e.ref([]);e.watchEffect((()=>{""==r.modelValue&&(m.value=[],c.value=[])}));const d=e=>{const u=m.value.findIndex((u=>u==e));if(u>=0)return m.value.splice(u,1),void c.value.splice(u,1);m.value.push(e),c.value.push(n.value)},v=async()=>{try{p.value=await t.keywordCate({model:r.model}),await e.nextTick$1(),n.value=0,await f()}catch(u){console.log("获取关键词分类错误",u)}},f=async()=>{try{i.value=await t.keywordPrompt({model:r.model,id:p.value[n.value].id})}catch(e){console.log("获取关键词错误",e)}};return l({open:()=>{s.value=!0,v()}}),(t,o)=>e.e({a:e.f(p.value,((u,t,o)=>({a:e.t(u.name),b:t,c:t==n.value?1:"",d:t==n.value-1?1:"",e:t==n.value+1?1:"",f:c.value.includes(t)?1:"",g:e.o((e=>(e=>{n.value!=e&&(n.value=e,f())})(t)),t)}))),b:i.value.prompt.length||i.value.cate_prompt.length},i.value.prompt.length||i.value.cate_prompt.length?e.e({c:e.f(i.value.cate_prompt,((u,t,o)=>({a:e.t(u.name),b:e.f(u.prompt,((u,t,o)=>({a:e.t(u.prompt),b:u.text,c:m.value.includes(u.prompt_en)?1:"",d:e.o((e=>d(u.prompt_en)),u.text)}))),c:t}))),d:i.value.prompt.length},i.value.prompt.length?{e:e.f(i.value.prompt,((u,t,o)=>({a:e.t(u.prompt),b:u.text,c:m.value.includes(u.prompt_en)?1:"",d:e.o((e=>d(u.prompt_en)),u.text)})))}:{}):{f:u._imports_0$15},{g:e.t(m.value.length),h:e.o((e=>(()=>{if(s.value=!1,""==r.modelValue.trim()){const e=m.value.length?m.value.join(","):"";a("update:modelValue",e)}else{const e=m.value.length?m.value.join(","):"",u=`${r.modelValue} ${e?`,${e}`:""}`;a("update:modelValue",u)}m.value=[]})())),i:e.p({type:"primary","custom-style":{width:"100%",border:"none",color:"#333333",background:"#F4F4F8"}}),j:e.o((e=>(()=>{s.value=!1;const e=m.value.length?m.value.join(","):"";a("update:modelValue",e),m.value=[]})())),k:e.p({type:"primary","custom-style":{width:"100%"}}),l:e.o((e=>a("close"))),m:e.o((e=>s.value=e)),n:e.p({mode:"bottom",closeable:!0,"border-radius":"20","z-index":99999,safeAreaInsetBottom:!0,modelValue:s.value})})}}),l=e._export_sfc(o,[["__scopeId","data-v-457192de"]]);wx.createComponent(l);
