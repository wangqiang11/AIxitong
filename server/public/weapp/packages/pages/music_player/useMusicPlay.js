"use strict";const e=require("../../../common/vendor.js");exports.useMusicPlay=()=>{const l=e.shallowRef(e.index.createInnerAudioContext()),a=e.ref(!1),u=e.ref(0),n=e.ref(0),o=e.ref(0);l.value.obeyMuteSwitch=!1;const v=()=>{c(),a.value=!0},r=()=>{a.value=!1,clearTimeout(o.value)},t=()=>{a.value=!1,clearTimeout(o.value)},c=()=>{u.value=l.value.duration,n.value=l.value.currentTime},s=()=>{var e;null==(e=l.value)||e.pause()};return e.onMounted((()=>{l.value.onPlay(v),l.value.onEnded(r),l.value.onError(t),l.value.onStop(r),l.value.onPause(r),l.value.onTimeUpdate(c),l.value.onSeeking(c)})),e.onBeforeUnmount((()=>{var e,u,n,i,d,p,m,y,T,f,P,S,g,k;a.value&&s(),l.value&&(null==(u=(e=l.value).onPlay)||u.call(e,v),null==(i=(n=l.value).onEnded)||i.call(n,r),null==(p=(d=l.value).onError)||p.call(d,t),null==(y=(m=l.value).onStop)||y.call(m,r),null==(f=(T=l.value).onPause)||f.call(T,r),null==(S=(P=l.value).onTimeUpdate)||S.call(P,c),null==(k=(g=l.value).onSeeking)||k.call(g,c),clearTimeout(o.value))})),{pause:s,play:async()=>{l.value.onCanplay((()=>{console.log(l.value.paused),l.value.play()})),l.value.play()},duration:u,currentTime:n,isPlaying:a,setUrl:e=>{l.value.src=e},seek:e=>{var a;null==(a=l.value)||a.seek(e)}}};
