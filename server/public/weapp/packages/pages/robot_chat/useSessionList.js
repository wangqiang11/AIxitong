"use strict";const e=require("../../../common/vendor.js"),t=require("../../../api/robot.js"),o=require("../../../hooks/useLockFn.js");exports.useSessionList=function(s){const i=e.ref(0),a=e.ref([]),n=async()=>{try{const e=await t.getRobotCateLists({robot_id:s});return a.value=e||[],0===i.value&&u(),a.value}catch(e){a.value=[],u()}},{lockFn:r}=o.useLockFn((async()=>{await t.postRobotCate({robot_id:s}),await n(),u()})),u=()=>{var e;i.value=(null==(e=a.value[0])?void 0:e.id)||0},c=e.computed((()=>{var e;return(null==(e=a.value.find((e=>e.id===i.value)))?void 0:e.name)||""}));return{getSessionLists:n,sessionActive:i,sessionLists:a,sessionAdd:r,sessionEdit:async e=>{await t.putRobotCate({...e,robot_id:s}),n()},sessionDelete:async o=>{(await e.index.showModal({title:"确定删除该会话？"})).confirm&&(await t.delRobotCate({id:o,robot_id:s}),await n(),u())},sessionClear:async()=>{(await e.index.showModal({title:"确定清除所有会话？"})).confirm&&(await t.clearRobotCate({robot_id:s}),await n(),u())},currentSession:c}};
