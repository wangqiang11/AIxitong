"use strict";const e=require("../../../common/vendor.js"),t=require("../../../api/app.js"),i=require("../../../common/assets.js"),o=require("../../../stores/app.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../stores/user.js"),require("../../../api/user.js"),require("../../../enums/constantEnums.js"),require("../../../utils/auth.js"),require("../../../utils/cache.js"),require("../../../utils/unique-id.js"),require("../../../router/index.js"),require("../../../config/index.js"),require("../../../utils/client.js"),require("../../../enums/appEnums.js"),require("../../../api/shop.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-image")+e.resolveComponent("u-badge")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-badge/u-badge.js")+(()=>"../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const a=e.defineComponent({__name:"notification",setup(a){const s=e.useRouter(),r=o.useAppStore(),n=e.shallowRef(),u=e.ref([]),l={4:{name:"绘画",bg:"#EAF3FF",color:"#4A92FF",link:"/packages/pages/draw_list/draw_list"},5:{name:"音乐",bg:"#FFF1E4",color:"#FF8F1F",link:"/packages/pages/music_list/music_list"},6:{name:"视频",bg:"#FFF0F0",color:"#FA5151",link:"/packages/pages/video_list/video_list"},7:{name:"智能体",bg:"#E7FFF7",color:"#00B578",link:"/pages/kb/kb"}},c=async()=>{var e;await t.noticeAllRead(),null==(e=n.value)||e.reload()},p=async(e,i)=>{try{const{lists:o}=await t.noticeLists({page_no:e,page_size:i});n.value.complete(o)}catch(o){n.value.complete(!1),console.log("请求消息通知列表失败",o)}};return(o,a)=>({a:o.$theme.navColor,b:o.$theme.navBgColor,c:o.$theme.pageStyle,d:e.o(c),e:e.p({"is-fixed":!1,"back-text":`消息通知(${u.value.length})`}),f:e.f(u.value,((i,o,a)=>e.e({a:3===i.notice_type},3===i.notice_type?{b:"422bf656-2-"+a+",422bf656-1",c:e.p({width:84,height:84,src:i.avatar,"border-radius":"50%"})}:{d:e.t(l[i.notice_type].name),e:l[i.notice_type].bg,f:l[i.notice_type].color},{g:!i.read},i.read?{}:{h:"422bf656-3-"+a+",422bf656-1",i:e.p({"is-dot":!0,type:"error",offset:[-8,-8]})},{j:i.nickname},i.nickname?{k:e.t(i.nickname)}:{},{l:e.t(i.create_time),m:3===i.notice_type},3===i.notice_type?{n:e.t(i.robot),o:e.t(i.content)}:e.e({p:e.t(i.records_name),q:e.t(1===i.verify_status?"审核成功":"审核失败"),r:e.n(1===i.verify_status?"text-success":"text-error"),s:2==i.verify_status},2==i.verify_status?{t:e.t(i.verify_result)}:{},{v:1==i.verify_status&&i.balance>0},1==i.verify_status&&i.balance>0?{w:e.t(i.balance),x:e.t(e.unref(r).getTokenUnit)}:{}),{y:i.id,z:e.o((e=>(async e=>{var i;3===e.notice_type?s.navigateTo({path:"/packages/pages/robot_info/robot_info",query:{id:e.robot_id,type:"dialogue",dialogue:"record"}}):4===e.notice_type?s.navigateTo({path:l[e.notice_type].link,query:{model:e.model}}):s.navigateTo(l[e.notice_type].link),e.read||(await t.noticeRead({id:e.id}),null==(i=n.value)||i.reload())})(i)),i.id)}))),g:e.sr(n,"422bf656-1",{k:"paging"}),h:e.o(p),i:e.o((e=>u.value=e)),j:e.p({fixed:!1,height:"100%","empty-view-text":"暂无消息通知～","empty-view-img":e.unref(i.EmptyNoticeImage),"empty-view-style":{"margin-top":"100px"},"empty-view-center":!1,"auto-clean-list-when-reload":!1,"show-loading-more-no-more-view":!1,"auto-scroll-to-top-when-reload":!1,"empty-view-img-style":{width:"360rpx",height:"360rpx"},modelValue:u.value})})}});wx.createPage(a);
