"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../api/draw.js");require("../../../../utils/client.js");const s=require("../../../../hooks/useCopy.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-image")+e.resolveComponent("u-checkbox")+e.resolveComponent("u-button")+e.resolveComponent("z-paging")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-checkbox/u-checkbox.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const a=e.defineComponent({__name:"draw",props:{isBatch:{type:Boolean}},setup(a){const t=a,i=e.useRouter(),o=e.shallowRef(),{copy:n}=s.useCopy(),r=e.ref([]),l=e.ref([]),c=e.reactive({status:3,model:"sd"}),p=e.ref([{name:"SD绘画",type:"sd"},{name:"DALLE绘画",type:"dalle3"},{name:"MJ绘画",type:"mj"},{name:"豆包绘画",type:"doubao"}]),d=e.computed({get:()=>l.value.length===r.value.length,set(){l.value.length===r.value.length?l.value=[]:l.value=r.value.map((e=>e.id))}});e.watch((()=>t.isBatch),(()=>{l.value=[]}));const m=e.reactive({show:!1,item:{}}),v=async()=>{await n(m.item.video_url),m.show=!1},h=async(e,s)=>{try{const{lists:a}=await u.drawingRecord({page_no:e,page_size:s,...c});o.value.complete(a)}catch(a){o.value.complete(!1)}},g=()=>{var e;null==(e=o.value)||e.refresh()};return(s,n)=>e.e({a:e.f(p.value,((u,s,a)=>({a:e.t(u.name),b:u.type,c:u.type===c.model?1:"",d:e.o((e=>{return s=u.type,void(c.model!==s&&(c.model=s,g()));var s}),u.type)}))),b:e.f(r.value,((u,s,o)=>e.e({a:"9c7f7cf9-1-"+o+",9c7f7cf9-0",b:e.p({src:u.image,width:"100%",height:"340"})},a.isBatch?{c:"9c7f7cf9-2-"+o+",9c7f7cf9-0",d:e.p({"model-value":l.value.includes(u.id),shape:"circle"})}:{},{e:a.isBatch&&l.value.includes(u.id)?1:"",f:e.o((e=>(e=>{t.isBatch||i.navigateTo({path:"/packages/pages/draw_detail/draw_detail",query:{id:e.id}})})(u)),u.id),g:u.id,h:e.o((e=>(e=>{if(t.isBatch){const u=l.value.findIndex((u=>u===e));u>-1?l.value.splice(u,1):l.value.push(e)}})(u.id)),u.id)}))),c:a.isBatch,d:a.isBatch},a.isBatch?{e:e.o((u=>e.isRef(d)?d.value=u:null)),f:e.p({shape:"circle",modelValue:e.unref(d)}),g:e.t(l.value.length),h:e.t(r.value.length),i:e.o((s=>(async s=>{const{cancel:a}=await e.index.showModal({title:"温馨提示",content:"确定删除？"});a||(await u.drawingDelete({ids:s}),l.value=[],g())})(l.value))),j:e.p({size:"medium",type:"error",disabled:!l.value.length})}:{},{k:e.sr(o,"9c7f7cf9-0",{k:"pagingRef"}),l:e.o(h),m:e.o((e=>r.value=e)),n:e.p({"auto-clean-list-when-reload":!1,"safe-area-inset-bottom":!0,fixed:!1,height:"100%",modelValue:r.value}),o:e.o(v),p:e.p({type:"primary",shape:"circle"}),q:e.o((e=>m.show=e)),r:e.p({mode:"center","border-radius":"15",closeable:!0,modelValue:m.show})})}}),t=e._export_sfc(a,[["__scopeId","data-v-9c7f7cf9"]]);wx.createComponent(t);
