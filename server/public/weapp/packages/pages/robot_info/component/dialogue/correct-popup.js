"use strict";const e=require("../../../../../common/vendor.js"),o=require("../../../../../api/robot.js"),u=require("../../../../../api/kb.js");if(require("../../../../../utils/request/index.js"),require("../../../../../utils/request/http.js"),require("../../../../../enums/requestEnums.js"),require("../../../../../utils/request/cancel.js"),require("../../../../../stores/user.js"),require("../../../../../api/user.js"),require("../../../../../enums/constantEnums.js"),require("../../../../../utils/auth.js"),require("../../../../../utils/cache.js"),require("../../../../../utils/unique-id.js"),require("../../../../../router/index.js"),require("../../../../../config/index.js"),require("../../../../../utils/client.js"),require("../../../../../enums/appEnums.js"),!Array){(e.resolveComponent("app-select")+e.resolveComponent("u-form-item")+e.resolveComponent("u-input")+e.resolveComponent("app-upload")+e.resolveComponent("app-upload-file")+e.resolveComponent("u-form")+e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../../components/app-select/app-select.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-form-item/u-form-item.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../../../components/app-upload/app-upload.js")+(()=>"../../../../../components/app-upload-file/app-upload-file.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-form/u-form.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const s=e.defineComponent({__name:"correct-popup",props:{show:{type:Boolean},data:null},emits:["update:show"],setup(s,{emit:a}){const l=s,r=e.shallowRef(),{show:t}=e.useVModels(l,a),p=e.ref({kb_id:"",ask:"",reply:"",images:[],files:[],video:[]}),i=e.computed({get:()=>p.value.images.map((({url:e})=>e)),set(e){p.value.images=e.map((e=>({url:e})))}}),n=e.ref([]);(async()=>{const{lists:e=[]}=await u.getKBList({page_type:0});n.value=e})();const m={kb_id:[{required:!0,message:"请选择知识库"}],ask:[{required:!0,message:"请输入问题"}],reply:[{required:!0,message:"请输入答案"}]},d=()=>{r.value.validate((async e=>{e&&(await o.robotRecordsCorrect(p.value),setTimeout((()=>{t.value=!1}),1e3))}))};return e.watch(t,(e=>{e&&setTimeout((()=>{r.value.setRules(m)}))})),e.watch((()=>l.data),(o=>{Object.assign(p.value,e.lodashExports.cloneDeep(o))})),(o,u)=>({a:e.o((e=>p.value.kb_id=e)),b:e.p({popupTitle:"知识库选择",dataLists:n.value,placeholder:"请选择知识库",value:"id",modelValue:p.value.kb_id}),c:e.p({label:"选择知识库",prop:"kb_id",required:!0}),d:e.o((e=>p.value.ask=e)),e:e.p({placeholder:"请输入问题",border:!0,type:"textarea",height:200,modelValue:p.value.ask}),f:e.p({label:"提问问题",prop:"ask",required:!0}),g:e.o((e=>p.value.reply=e)),h:e.p({placeholder:"请输入答案",border:!0,type:"textarea",height:300,modelValue:p.value.reply}),i:e.p({label:"问题答案",prop:"reply",required:!0}),j:e.o((o=>e.isRef(i)?i.value=o:null)),k:e.p({"max-count":9,modelValue:e.unref(i)}),l:e.p({label:"上传图片"}),m:e.o((e=>p.value.video=e)),n:e.p({maxCount:1,returnType:"object-array",accept:"video",modelValue:p.value.video}),o:e.p({label:"上传视频"}),p:e.o((e=>p.value.files=e)),q:e.p({fileExtname:["doc","docx","pdf","xls","xlsx"],modelValue:p.value.files}),r:e.p({label:"上传附件"}),s:e.sr(r,"aca7a154-1,aca7a154-0",{k:"uFormRef"}),t:e.p({model:p.value,"label-position":"top","border-bottom":!1}),v:e.o(d),w:e.p({type:"primary"}),x:e.o((o=>e.isRef(t)?t.value=o:null)),y:e.p({"safe-area-inset-bottom":!0,closeable:!0,"border-radius":"16",mode:"bottom",modelValue:e.unref(t)})})}});wx.createComponent(s);
