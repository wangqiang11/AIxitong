"use strict";const e=require("../../../../../common/vendor.js"),o=require("../../../../../common/assets.js"),s=require("../../../../../api/robot.js");if(require("../../../../../utils/request/index.js"),require("../../../../../utils/request/http.js"),require("../../../../../enums/requestEnums.js"),require("../../../../../utils/request/cancel.js"),require("../../../../../stores/user.js"),require("../../../../../api/user.js"),require("../../../../../enums/constantEnums.js"),require("../../../../../utils/auth.js"),require("../../../../../utils/cache.js"),require("../../../../../utils/unique-id.js"),require("../../../../../router/index.js"),require("../../../../../config/index.js"),require("../../../../../utils/client.js"),require("../../../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-image")+e.resolveComponent("u-read-more")+e.resolveComponent("u-icon")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+i+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-read-more/u-read-more.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../../node-modules/z-paging/components/z-paging/z-paging.js")+t+r)();const t=()=>"./reply-popup.js",r=()=>"./correct-popup.js",i=()=>"../../../../../components/chat-record-item/text-item.js",n=e.defineComponent({__name:"record",props:{isFeedback:{type:[String,Number],default:-1}},setup(t){const r=t,i=e.useRoute(),n=e.reactive({show:!1,content:""}),a=e.reactive({show:!1,data:{}}),u=e.computed((()=>i.query.id)),c=e.ref([]),l=e.shallowRef();e.watch((()=>r.isFeedback),(e=>{var o;null==(o=l.value)||o.reload()}));const d=async(e,o)=>{var t,i;try{const{lists:i}=await s.getRobotDataRecord({page_no:e,page_size:o,robot_id:u.value,is_feedback:r.isFeedback});i.forEach((e=>{e.show=!1})),null==(t=l.value)||t.complete(i)}catch(n){null==(i=l.value)||i.complete(!1)}},p=e=>{c.value[e].show=!0},m=e=>{c.value[e].show=!1};return(t,r)=>({a:e.f(c.value,((t,r,i)=>{var n;return e.e({a:"47ee6c54-2-"+i+",47ee6c54-1-"+i,b:e.p({width:"44",height:"44",src:t.user.avatar||e.unref(o.DefaultAvatar),"border-radius":"50%"}),c:e.t(null==(n=t.user)?void 0:n.nickname),d:e.t(t.create_time),e:e.t(t.ask),f:t.show},t.show?{g:"47ee6c54-3-"+i+",47ee6c54-1-"+i,h:e.p({"is-markdown":!0,content:t.reply})}:{i:e.t(t.reply)},{j:t.show},t.show?{k:"47ee6c54-4-"+i+",47ee6c54-1-"+i,l:e.p({"is-markdown":!0,content:t.feedback})}:{m:e.t(t.feedback||"-")},{n:e.sr("readmoreRef","47ee6c54-1-"+i+",47ee6c54-0",{f:1}),o:e.o(p,t.id),p:e.o(m,t.id),q:"47ee6c54-1-"+i+",47ee6c54-0",r:e.p({"close-text":"展开全部",index:r,toggle:!0,"text-indent":"0","show-height":"350"}),s:"47ee6c54-5-"+i+",47ee6c54-0",t:e.o((o=>{return s=t,a.show=!0,void(a.data=e.cloneDeep(s));var s}),t.id),v:"47ee6c54-6-"+i+",47ee6c54-0",w:e.o((o=>(async o=>{var t;const{cancel:r}=await e.index.showModal({title:"温馨提示",content:"确定要删除？"});r||(await s.delRobotChatRecord({ids:o,robot_id:u.value}),null==(t=l.value)||t.refresh())})([t.id])),t.id),x:t.id})})),b:o._imports_0$14,c:o._imports_1$4,d:o._imports_2$1,e:e.p({name:"edit-pen",size:32}),f:e.p({name:"trash",size:32}),g:e.sr(l,"47ee6c54-0",{k:"pagingRef"}),h:e.o(d),i:e.o((e=>c.value=e)),j:e.p({"auto-clean-list-when-reload":!1,fixed:!1,modelValue:c.value}),k:e.o((e=>n.show=e)),l:e.p({content:n.content,show:n.show}),m:e.o((e=>a.show=e)),n:e.p({data:a.data,show:a.show})})}});wx.createComponent(n);
