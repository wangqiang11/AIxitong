"use strict";const e=require("../../../common/vendor.js"),s=require("../../../api/kb.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../stores/user.js"),require("../../../api/user.js"),require("../../../enums/constantEnums.js"),require("../../../utils/auth.js"),require("../../../utils/cache.js"),require("../../../utils/unique-id.js"),require("../../../router/index.js"),require("../../../config/index.js"),require("../../../utils/client.js"),require("../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-search")+e.resolveComponent("u-tag")+e.resolveComponent("u-icon")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-search/u-search.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-tag/u-tag.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../node-modules/z-paging/components/z-paging/z-paging.js")+a)();const a=()=>"./components/addPop.js",t=e.defineComponent({__name:"kb_item",setup(a){const t=e.ref(!1),u=e.shallowRef(),o=e.ref(""),i=e.ref(""),n=e.ref(""),r=e.ref(1),l=e.ref([]),c=e.shallowRef(),d=async(e,a)=>{var t,u;try{const{lists:u=[]}=await s.itemFileDataList({page_size:a,page_no:e,keyword:o.value,fd_id:i.value,kb_id:n.value});null==(t=c.value)||t.complete(u)}catch(r){null==(u=c.value)||u.complete(!1)}},m=async s=>{3!=r.value?(t.value=!0,await e.nextTick$1(),setTimeout((()=>{u.value.open(n.value,i.value,s)}),100)):e.index.$u.toast("无权限操作！")};return e.onLoad((e=>{i.value=e.id,n.value=e.kb_id,r.value=e.kb_power})),(a,i)=>e.e({a:a.$theme.navColor,b:a.$theme.navBgColor,c:a.$theme.pageStyle,d:e.o((e=>m(""))),e:e.o((s=>{var a;return null==(a=e.unref(c))?void 0:a.reload()})),f:e.o((e=>o.value=e)),g:e.p({"bg-color":"#fff",height:"80",shape:"square","border-color":"#e5e5e5",placeholder:"请输入关键词","show-action":!1,modelValue:o.value}),h:e.f(l.value,((a,t,u)=>e.e({a:0==a.status},0==a.status?{b:"508ceead-2-"+u+",508ceead-0",c:e.p({type:"info",text:a.status_msg,size:"mini"})}:{},{d:1==a.status},1==a.status?{e:"508ceead-3-"+u+",508ceead-0",f:e.p({type:"warning",text:a.status_msg,size:"mini"})}:{},{g:2==a.status},2==a.status?{h:"508ceead-4-"+u+",508ceead-0",i:e.p({type:"success",text:a.status_msg,size:"mini"})}:{},{j:3==a.status},3==a.status?{k:e.o((s=>{return t=a.error,void e.index.showModal({title:"错误信息",content:t});var t}),t),l:"508ceead-5-"+u+",508ceead-0",m:e.p({type:"error",text:a.status_msg,size:"mini"})}:{},{n:e.t(a.create_time),o:e.t(a.question),p:e.t(a.answer),q:e.t(a.tokens),r:"508ceead-6-"+u+",508ceead-0",s:e.o((e=>m(a.uuid)),t),t:!a.is_default},a.is_default?{}:{v:"508ceead-7-"+u+",508ceead-0",w:e.p({name:"trash"}),x:e.o((t=>(async a=>{e.index.showModal({title:"提示",content:"请确认是否删除！",success:async function(e){var t;e.confirm?(await s.fileDataDel({kb_id:n.value,uuids:[a]}),null==(t=c.value)||t.reload()):e.cancel&&console.log("用户点击取消")}})})(a.uuid)),t)},{y:t}))),i:e.p({name:"edit-pen"}),j:e.sr(c,"508ceead-0",{k:"pagingRef"}),k:e.o(d),l:e.o((e=>l.value=e)),m:e.p({"safe-area-inset-bottom":!1,"auto-clean-list-when-reload":!1,modelValue:l.value}),n:t.value},t.value?{o:e.sr(u,"508ceead-8",{k:"addPopRef"}),p:e.o((()=>{var s;t.value=!1,null==(s=e.unref(c))||s.reload()})),q:e.o((e=>t.value=!1))}:{})}});wx.createPage(t);
