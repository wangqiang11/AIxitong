"use strict";const e=require("../../../../../common/vendor.js"),s=require("../../../../../api/chat.js"),t=require("../../../../../hooks/useLockFn.js"),a=e.ref(0),i=e.ref([]);exports.useSessionList=function(){const n=async()=>{try{const e=await s.getChatCategoryLists({page_type:0});return i.value=(null==e?void 0:e.lists)||[],i.value}catch(e){i.value=[],r()}},{lockFn:o}=t.useLockFn((async()=>{await s.chatCategoryAdd({}),await n(),r()})),r=()=>{var e;a.value=(null==(e=i.value[0])?void 0:e.id)||0},c=e.computed((()=>{var e;return(null==(e=i.value.find((e=>e.id===a.value)))?void 0:e.name)||""}));return{getSessionLists:n,sessionActive:a,initSessionActive:r,sessionLists:i,sessionAdd:o,sessionEdit:async e=>{await s.chatCategoryEdit(e),n()},sessionDelete:async t=>{(await e.index.showModal({title:"确定删除该会话？"})).confirm&&(await s.chatCategoryDelete({id:t}),await n(),r())},sessionClear:async()=>{(await e.index.showModal({title:"确定清除所有会话？"})).confirm&&(await s.chatCategoryClear(),await n(),r())},currentSession:c}};
