"use strict";const e=require("../api/user.js"),t=require("../enums/constantEnums.js"),s=require("../utils/auth.js"),i=require("../utils/cache.js"),r=require("../common/vendor.js"),n=require("../utils/unique-id.js"),o=r.defineStore({id:"userStore",state:()=>({visitorId:i.cache.get(t.VISITOR_ID)||"",userInfo:{},token:s.getToken()||null,temToken:null}),getters:{isLogin:e=>!!e.token},actions:{async getUser(){const t=await e.getUserCenter({token:this.token});this.userInfo=t},login(e){this.token=e,i.cache.set(t.TOKEN_KEY,e)},logout(){this.token="",this.userInfo={},i.cache.remove(t.TOKEN_KEY)},async getFingerprint(){return this.visitorId||(this.visitorId=n.uniqueId(),i.cache.set(t.VISITOR_ID,this.visitorId)),this.visitorId}}});exports.useUserStore=o;
