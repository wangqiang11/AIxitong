"use strict";const t=require("../../../../common/vendor.js"),e=require("./weCropper.js"),i={props:{boundStyle:{type:Object,default:()=>({lineWidth:4,borderColor:"rgb(245, 245, 245)",mask:"rgba(0, 0, 0, 0.35)"})}},data(){return{bottomNavHeight:50,originWidth:200,width:0,height:0,cropperOpt:{id:"cropper",targetId:"targetCropper",pixelRatio:1,width:0,height:0,scale:2.5,zoom:8,cut:{x:(this.width-this.originWidth)/2,y:(this.height-this.originWidth)/2,width:this.originWidth,height:this.originWidth},boundStyle:{lineWidth:t.index.upx2px(this.boundStyle.lineWidth),mask:this.boundStyle.mask,color:this.boundStyle.borderColor}},destWidth:200,rectWidth:200,fileType:"jpg",src:""}},onLoad(i){let r=t.index.getSystemInfoSync();if(this.width=r.windowWidth,this.height=r.windowHeight-this.bottomNavHeight,this.cropperOpt.width=this.width,this.cropperOpt.height=this.height,this.cropperOpt.pixelRatio=r.pixelRatio,i.destWidth&&(this.destWidth=i.destWidth),i.rectWidth){let t=Number(i.rectWidth);this.cropperOpt.cut={x:(this.width-t)/2,y:(this.height-t)/2,width:t,height:t}}this.rectWidth=i.rectWidth,i.fileType&&(this.fileType=i.fileType),this.cropper=new e.WeCropper(this.cropperOpt).on("ready",(t=>{})).on("beforeImageLoad",(t=>{})).on("imageLoad",(t=>{})).on("beforeDraw",((t,e)=>{})),t.index.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"}),t.index.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:t=>{this.src=t.tempFilePaths[0],this.cropper.pushOrign(this.src)}})},methods:{touchStart(t){this.cropper.touchStart(t)},touchMove(t){this.cropper.touchMove(t)},touchEnd(t){this.cropper.touchEnd(t)},getCropperImage(e=!1){if(!this.src)return this.$u.toast("请先选择图片再裁剪");let i={destHeight:Number(this.destWidth),destWidth:Number(this.destWidth),fileType:this.fileType};this.cropper.getCropperImage(i,((i,r)=>{r?t.index.showModal({title:"温馨提示",content:r.message}):e?t.index.previewImage({current:"",urls:[i]}):(t.index.$emit("uAvatarCropper",i),this.$u.route({type:"back"}))}))},uploadTap(){const e=this;t.index.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:t=>{e.src=t.tempFilePaths[0],e.cropper.pushOrign(this.src)}})}}};const r=t._export_sfc(i,[["render",function(e,i,r,o,h,p){return{a:t.o(((...t)=>p.touchStart&&p.touchStart(...t))),b:t.o(((...t)=>p.touchMove&&p.touchMove(...t))),c:t.o(((...t)=>p.touchEnd&&p.touchEnd(...t))),d:h.cropperOpt.width,e:h.cropperOpt.height,f:`-${h.cropperOpt.width*h.cropperOpt.pixelRatio}px`,g:`-${h.cropperOpt.height*h.cropperOpt.pixelRatio}px`,h:h.cropperOpt.width*h.cropperOpt.pixelRatio+"px",i:""+h.cropperOpt.height*h.cropperOpt.pixelRatio,j:h.cropperOpt.height+"px",k:t.o(((...t)=>p.uploadTap&&p.uploadTap(...t))),l:t.o((t=>p.getCropperImage(!1))),m:h.bottomNavHeight+"px"}}],["__scopeId","data-v-5c8658df"]]);wx.createPage(r);
