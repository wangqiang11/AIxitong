"use strict";const r=require("../../../../common/vendor.js"),t={name:"u-image",emits:["click","error","load"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"auto"},shape:{type:String,default:"square"},borderRadius:{type:[String,Number],default:0},lazyLoad:{type:Boolean,default:!0},showMenuByLongpress:{type:Boolean,default:!0},loadingIcon:{type:String,default:"photo"},errorIcon:{type:String,default:"error-circle"},showLoading:{type:Boolean,default:!0},showError:{type:Boolean,default:!0},fade:{type:Boolean,default:!0},webp:{type:Boolean,default:!1},duration:{type:[String,Number],default:500},bgColor:{type:String,default:"#f3f4f6"}},data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{}}},watch:{src:{immediate:!0,handler(r){r?(this.isError=!1,this.loading=!0):(this.isError=!0,this.loading=!1)}}},computed:{wrapStyle(){let r={};return r.width=this.$u.addUnit(this.width),r.height=this.$u.addUnit(this.height),r.borderRadius="circle"==this.shape?"50%":this.$u.addUnit(this.borderRadius),r.overflow=this.borderRadius>0?"hidden":"visible",this.fade&&(r.opacity=this.opacity,r.transition=`opacity ${Number(this.durationTime)/1e3}s ease-in-out`),r}},methods:{onClick(){this.$emit("click")},onErrorHandler(r){this.loading=!1,this.isError=!0,this.$emit("error",r)},onLoadHandler(){if(this.loading=!1,this.isError=!1,this.$emit("load"),!this.fade)return this.removeBgColor();this.opacity=0,this.durationTime=0,setTimeout((()=>{this.durationTime=this.duration,this.opacity=1,setTimeout((()=>{this.removeBgColor()}),this.durationTime)}),50)},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}};if(!Array){r.resolveComponent("u-icon")()}Math;const o=r._export_sfc(t,[["render",function(t,o,e,i,a,d){return r.e({a:!a.isError},a.isError?{}:{b:e.src,c:e.mode,d:r.o(((...r)=>d.onErrorHandler&&d.onErrorHandler(...r))),e:r.o(((...r)=>d.onLoadHandler&&d.onLoadHandler(...r))),f:e.lazyLoad,g:"circle"==e.shape?"50%":t.$u.addUnit(e.borderRadius)},{h:e.showLoading&&a.loading},e.showLoading&&a.loading?r.e({i:t.$slots.loading},t.$slots.loading?{}:{j:r.p({name:e.loadingIcon,width:e.width,height:e.height})},{k:"circle"==e.shape?"50%":t.$u.addUnit(e.borderRadius),l:e.bgColor}):{},{m:e.showError&&a.isError&&!a.loading},e.showError&&a.isError&&!a.loading?r.e({n:t.$slots.error},t.$slots.error?{}:{o:r.p({name:e.errorIcon,width:e.width,height:e.height})},{p:"circle"==e.shape?"50%":t.$u.addUnit(e.borderRadius)}):{},{q:r.o(((...r)=>d.onClick&&d.onClick(...r))),r:r.s(d.wrapStyle),s:r.s(a.backgroundStyle)})}],["__scopeId","data-v-224f9387"]]);wx.createComponent(o);
