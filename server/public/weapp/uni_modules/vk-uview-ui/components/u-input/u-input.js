"use strict";const e=require("../../libs/util/emitter.js"),t=require("../../../../common/vendor.js"),a={name:"u-input",emits:["update:modelValue","input","change","blur","focus","click","touchstart"],mixins:[e.Emitter],props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #888888;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:()=>({})},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!0},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:""},clearable:{type:[Boolean,String]},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!1},disableDefaultPadding:{type:Boolean,default:!0},backgroundColor:{type:String},padding:{type:String},adjustPosition:{type:Boolean,default:!0},adjustKeyboardTo:{type:String,default:"cursor"}},data:()=>({defaultValue:"",inputHeight:70,textareaHeight:100,validateState:!1,focused:!1,showPassword:!1,lastValue:"",uForm:{inputAlign:"",clearable:""}}),watch:{valueCom(e,t){this.defaultValue=e,e!=t&&"select"==this.type&&this.handleInput({detail:{value:e}})}},computed:{valueCom(){return this.modelValue},inputAlignCom(){return this.inputAlign||this.uForm.inputAlign||"left"},clearableCom(){return"boolean"==typeof this.clearable?this.clearable:"boolean"!=typeof this.uForm.clearable||this.uForm.clearable},inputMaxlength(){return Number(this.maxlength)},getStyle(){let e={};return e.minHeight=this.height?this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx",e=Object.assign(e,this.customStyle),e},getCursorSpacing(){return Number(this.cursorSpacing)},uSelectionStart(){return String(this.selectionStart)},uSelectionEnd(){return String(this.selectionEnd)}},created(){this.defaultValue=this.valueCom},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},methods:{handleInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.defaultValue=t,setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),40)},handleBlur(e){setTimeout((()=>{this.focused=!1}),100),this.$emit("blur",e.detail.value),setTimeout((()=>{this.dispatch("u-form-item","onFieldBlur",e.detail.value)}),40)},onFormItemError(e){this.validateState=e},onFocus(e){this.focused=!0,this.$emit("focus")},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.$emit("input",""),this.$emit("update:modelValue","")},inputClick(){this.$emit("click")}}};if(!Array){t.resolveComponent("u-icon")()}Math;const o=t._export_sfc(a,[["render",function(e,a,o,l,i,r){return t.e({a:"textarea"==o.type},"textarea"==o.type?{b:t.s(r.getStyle),c:i.defaultValue,d:o.placeholder,e:o.placeholderStyle,f:o.disabled,g:r.inputMaxlength,h:o.fixed,i:o.focus,j:o.autoHeight,k:r.uSelectionEnd,l:r.uSelectionStart,m:r.getCursorSpacing,n:o.showConfirmbar,o:o.disableDefaultPadding,p:o.adjustPosition,q:o.adjustKeyboardTo,r:t.o(((...e)=>r.handleInput&&r.handleInput(...e))),s:t.o(((...e)=>r.handleBlur&&r.handleBlur(...e))),t:t.o(((...e)=>r.onFocus&&r.onFocus(...e))),v:t.o(((...e)=>r.onConfirm&&r.onConfirm(...e)))}:{w:"password"==o.type?"text":o.type,x:t.s(r.getStyle),y:i.defaultValue,z:"password"==o.type&&!i.showPassword,A:o.placeholder,B:o.placeholderStyle,C:o.disabled||"select"===o.type,D:r.inputMaxlength,E:o.focus,F:o.confirmType,G:r.getCursorSpacing,H:r.uSelectionEnd,I:r.uSelectionStart,J:o.adjustPosition,K:t.o(((...e)=>r.onFocus&&r.onFocus(...e))),L:t.o(((...e)=>r.handleBlur&&r.handleBlur(...e))),M:t.o(((...e)=>r.handleInput&&r.handleInput(...e))),N:t.o(((...e)=>r.onConfirm&&r.onConfirm(...e)))},{O:r.clearableCom&&""!=r.valueCom&&i.focused},r.clearableCom&&""!=r.valueCom&&i.focused?{P:t.p({size:"32",name:"close-circle-fill",color:"#c0c4cc"}),Q:t.o(((...e)=>r.onClear&&r.onClear(...e)))}:{},{R:o.passwordIcon&&"password"==o.type},o.passwordIcon&&"password"==o.type?{S:t.o((e=>i.showPassword=!i.showPassword)),T:t.p({size:"32",name:i.showPassword?"eye-fill":"eye",color:"#c0c4cc"})}:{},{U:"select"==o.type},"select"==o.type?{V:t.p({name:"arrow-down-fill",size:"26",color:"#c0c4cc"}),W:o.selectOpen?1:""}:{},{X:o.border?1:"",Y:i.validateState?1:"",Z:o.padding?o.padding:`0 ${o.border?20:0}rpx`,aa:o.borderColor,ab:r.inputAlignCom,ac:o.backgroundColor,ad:t.o(((...e)=>r.inputClick&&r.inputClick(...e)))})}],["__scopeId","data-v-9d6fbf47"]]);wx.createComponent(o);
