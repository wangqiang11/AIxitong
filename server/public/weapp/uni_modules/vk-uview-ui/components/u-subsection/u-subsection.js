"use strict";const t=require("../../../../common/vendor.js"),e={name:"u-subsection",emits:["change"],props:{list:{type:Array,default:()=>[]},current:{type:[Number,String],default:0},activeColor:{type:String,default:"#303133"},inactiveColor:{type:String,default:"#606266"},mode:{type:String,default:"button"},fontSize:{type:[Number,String],default:28},animation:{type:Boolean,default:!0},height:{type:[Number,String],default:70},bold:{type:Boolean,default:!0},bgColor:{type:String,default:"#eeeeef"},buttonColor:{type:String,default:"#ffffff"},vibrateShort:{type:Boolean,default:!1},offset:{type:Array,default:function(){return[0,0]}}},data(){return{itemBgStyle:{width:0,left:0,backgroundColor:"#ffffff",height:"100%",transition:""},currentIndex:this.current,buttonPadding:3,borderRadius:5,firstTimeVibrateShort:!0}},watch:{current:{immediate:!0,handler(t){this.currentIndex=t,this.changeSectionStatus(t)}}},computed:{listInfo(){return this.list.map(((t,e)=>{if("object"!=typeof t){return{width:0,name:t}}return t.width=0,t}))},noBorderRight(){return t=>{if("subsection"!=this.mode)return;let e="";return t<this.list.length-1&&(e+=" u-none-border-right"),0==t&&(e+=" u-item-first"),t==this.list.length-1&&(e+=" u-item-last"),e}},textStyle(){return t=>{let e={};return"subsection"==this.mode?t==this.currentIndex?e.color="#ffffff":e.color=this.activeColor:t==this.currentIndex?e.color=this.activeColor:e.color=this.inactiveColor,t==this.currentIndex&&this.bold&&(e.fontWeight="bold"),e.fontSize=this.fontSize+"rpx",e}},itemStyle(){return t=>{let e={};return"subsection"==this.mode&&(e.borderColor=this.activeColor,e.borderWidth="1px",e.borderStyle="solid"),e}},subsectionStyle(){let e={};return e.height=t.index.upx2px(this.height)+"px","button"==this.mode&&(e.backgroundColor=this.bgColor,e.padding=`${this.buttonPadding}px`,e.borderRadius=`${this.borderRadius}px`),e},itemBarStyle(){let e={};return e.backgroundColor=this.activeColor,e.zIndex=1,"button"==this.mode&&(e.backgroundColor=this.buttonColor,e.borderRadius=`${this.borderRadius}px`,e.bottom=`${this.buttonPadding}px`,e.height=t.index.upx2px(this.height)-2*this.buttonPadding+"px",e.zIndex=0),Object.assign(this.itemBgStyle,e)}},mounted(){setTimeout((()=>{this.getTabsInfo()}),10)},methods:{changeSectionStatus(e){"subsection"==this.mode&&(e==this.list.length-1&&(this.itemBgStyle.borderRadius=`0 ${this.buttonPadding}px ${this.buttonPadding}px 0`),0==e&&(this.itemBgStyle.borderRadius=`${this.buttonPadding}px 0 0 ${this.buttonPadding}px`),e>0&&e<this.list.length-1&&(this.itemBgStyle.borderRadius="0")),setTimeout((()=>{this.itemBgLeft()}),10),this.vibrateShort&&!this.firstTimeVibrateShort&&t.index.vibrateShort(),this.firstTimeVibrateShort=!1},click(t){t!=this.currentIndex&&(this.currentIndex=t,this.changeSectionStatus(t),this.$emit("change",Number(t)))},getTabsInfo(){let e=t.index.createSelectorQuery().in(this);for(let t=0;t<this.list.length;t++)e.select(".u-item-"+t).boundingClientRect();e.exec((t=>{t.length||setTimeout((()=>{this.getTabsInfo()}),10),t.map(((t,e)=>{this.listInfo[e].width=t.width})),("subsection"==this.mode||"button"==this.mode)&&(this.itemBgStyle.width=this.listInfo[0].width+"px"),this.itemBgLeft()}))},itemBgLeft(){this.animation?this.itemBgStyle.transition="all 0.35s":this.itemBgStyle.transition="all 0s";let t=0;this.listInfo.map(((e,i)=>{i<this.currentIndex&&(t+=e.width)})),"subsection"==this.mode?this.itemBgStyle.left=t+"px":"button"==this.mode&&(this.itemBgStyle.left=t+this.buttonPadding+"px")}}};if(!Array){t.resolveComponent("u-badge")()}Math;const i=t._export_sfc(e,[["render",function(e,i,o,n,r,s){return{a:t.f(s.listInfo,((e,i,n)=>t.e({a:t.t(e.name),b:"item-"+n,c:t.r("item",{item:e,isActive:i===r.currentIndex},n),d:t.s(s.textStyle(i)),e:e.num>0},e.num>0?{f:"6fa6d413-0-"+n,g:t.p({count:e.num,offset:o.offset,size:"mini"})}:{},{h:t.s(s.itemStyle(i)),i:t.o((t=>s.click(i)),i),j:t.n(s.noBorderRight(i)),k:t.n("u-item-"+i),l:i}))),b:t.s(s.itemBarStyle),c:t.s(s.subsectionStyle)}}],["__scopeId","data-v-6fa6d413"]]);wx.createComponent(i);
