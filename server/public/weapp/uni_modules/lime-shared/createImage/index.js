"use strict";var t=Object.defineProperty,e=(e,r,i)=>(((e,r,i)=>{r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i})(e,"symbol"!=typeof r?r+"":r,i),i);const r=require("../../../common/vendor.js"),i=require("../isBrowser/index.js");class s{constructor(){e(this,"currentSrc",null),e(this,"naturalHeight",0),e(this,"naturalWidth",0),e(this,"width",0),e(this,"height",0),e(this,"tagName","IMG"),e(this,"path",""),e(this,"crossOrigin",""),e(this,"referrerPolicy",""),e(this,"onload",(()=>{})),e(this,"onerror",(()=>{})),e(this,"complete",!1)}set src(t){if(console.log("src",t),!t)return this.onerror();t=t.replace(/^@\//,"/"),this.currentSrc=t,r.index.getImageInfo({src:t,success:e=>{e.path=/^\.|^\/(?=[^\/])/.test(t)?`/${e.path}`:e.path,this.complete=!0,this.path=e.path,this.naturalWidth=this.width=e.width,this.naturalHeight=this.height=e.height,this.onload()},fail:()=>{this.onerror()}})}get src(){return this.currentSrc}}exports.createImage=function(t){return t&&t.createImage?t.createImage():"canvas"==this.tagName&&!("toBlob"in this)||t&&!("toBlob"in t)?new s:i.isBrowser?new window.Image:new s};
