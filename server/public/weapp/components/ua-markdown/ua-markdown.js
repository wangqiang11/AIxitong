"use strict";const e=require("../../common/vendor.js"),t=require("./lib/markdown-it.min.js"),l=require("../../hooks/useCopy.js"),n=require("./customLink/index.js"),s=require("./docLInk/index.js");Math||i();const i=()=>"../../uni_modules/mp-html/components/mp-html/mp-html.js",o={__name:"ua-markdown",props:{content:String,showLine:{type:[Boolean,String],default:!0},linkList:{type:Array,default:()=>[]}},emits:["click-link"],setup(i,{emit:o}){const r=i,a=[],c=t.mt({html:!0,breaks:!0,typographer:!0,linkify:!0,lineNumbers:!0,highlight:function(t,l){let n="";try{n=e.common.highlightAuto(t).value}catch(o){n=c.utils.escapeHtml(t)}let s=n.split(/\n/).slice(0,-1).map(((e,t)=>""==e?"":'<li><span class="line-num" data-line="'+(t+1)+'"></span>'+e+"</li>")).join("");s=r.showLine?'<ol style="padding: 0px 30px;">'+s+"</ol>":'<ol style="padding: 0px 7px;list-style:none;">'+s+"</ol>",a.push(t);let i='<div class="markdown-wrap">';return i+='<div class="copy-line" style="text-align: right;font-size: 12px; margin-bottom: -10px;border-radius: 5px 5px 0 0;">',i+=`${l}<a class="code-copy-btn" code-data-index="${a.length-1}">复制代码</a>`,i+="</div>",i+=`<pre class="hljs" style="padding:10px 8px;margin:5px 0;overflow: auto;display: block;border-radius: 5px;"><code>${s}</code></pre>`,i+="</div>",i}});c.use(n.customLinkPlugin),c.use(s.docQuotePlugin);const p=e=>{if(!e)return;let t="";if((e=(e=e.replace(/<br>|<br\/>|<br \/>/g,"\n")).replace(/&nbsp;/g," ")).split("```").length%2){let l=e;"\n"!=l[l.length-1]&&(l+="\n"),t=c.render(u(l),{linkList:r.linkList})}else t=c.render(u(e),{linkList:r.linkList});return t=t.replace(/<table/g,'<table class="table"'),t=t.replace(/<tr/g,'<tr class="tr"'),t=t.replace(/<th>/g,'<th class="th">'),t=t.replace(/<td/g,'<td class="td"'),t=t.replace(/<hr>|<hr\/>|<hr \/>/g,'<hr class="hr">'),console.log(t),t},d=e=>{const{"code-data-index":t,class:n,innerText:s}=e;switch(n){case"code-copy-btn":{const{copy:e}=l.useCopy();console.log(a[t]),e(a[t]);break}case"markdown-custom-link":o("click-link",s)}},u=e=>e;return(t,l)=>({a:e.o(d),b:e.p({selectable:!0,scrollTable:!0,content:p(i.content)})})}};wx.createComponent(o);
