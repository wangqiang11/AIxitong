"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),u=require("../../api/app.js");if(require("../../utils/request/index.js"),require("../../utils/request/http.js"),require("../../enums/requestEnums.js"),require("../../utils/request/cancel.js"),require("../../stores/user.js"),require("../../api/user.js"),require("../../enums/constantEnums.js"),require("../../utils/auth.js"),require("../../utils/cache.js"),require("../../utils/unique-id.js"),require("../../router/index.js"),require("../../config/index.js"),require("../../utils/client.js"),require("../../enums/appEnums.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-loading")+e.resolveComponent("uni-file-picker")+e.resolveComponent("u-input"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-loading/u-loading.js")+(()=>"../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-input/u-input.js"))();const i=e.defineComponent({__name:"chat-input",props:{modelValue:null,placeholder:{default:"请输入问题"},loading:{type:Boolean,default:!1},showManual:{type:Boolean,default:!1},showStop:{type:Boolean},showContinue:{type:Boolean,default:!1},btnColor:{default:"#fff"},safeAreaInsetBottom:{type:Boolean,default:!1},filePlugin:{default:()=>({})},showFileUpload:{type:Boolean,default:!1}},emits:["clear","pause","continue","focus","update:modelValue","update:filePlugin","send"],setup(i,{emit:l}){const n=i,s=e.computed({get:()=>n.modelValue,set(e){l("update:modelValue",e)}}),t=e.shallowRef(),a=e.useVModel(n,"filePlugin",l),r=e.ref(!1),p=async e=>{var o;console.log(e),r.value=!0,null==(o=t.value)||o.clearFiles();const[i]=e.tempFiles;try{const e=await u.uploadFileByType("image",{filePath:i.url,name:"file",header:{}});a.value.url=e.uri,a.value.name=e.name}finally{r.value=!1}};return(u,n)=>e.e({a:void 0!==i.showStop?i.showStop:i.loading},(void 0!==i.showStop?i.showStop:i.loading)?{b:e.p({name:"pause-circle",size:"36"}),c:e.o((e=>l("pause")))}:{},{d:!i.loading&&i.showContinue},!i.loading&&i.showContinue?{e:e.p({name:"play-circle",size:"36"}),f:e.o((e=>l("continue")))}:{},{g:e.unref(a).url},e.unref(a).url?{h:e.unref(a).url,i:e.t(e.unref(a).name),j:e.o((o=>e.unref(a).url="")),k:e.p({name:"close-circle",size:38})}:{},{l:i.showFileUpload},i.showFileUpload?e.e({m:r.value},r.value?{n:e.p({mode:"flower",size:"28"})}:{o:e.p({name:"arrow-upward",size:"28"})},{p:e.sr(t,"2fadb237-3",{k:"filePickerRef"}),q:e.o(p),r:e.p({limit:1,fileMediatype:"image",mode:"list","list-styles":{display:"none"},"auto-upload":!1})}):{},{s:e.p({name:"trash",size:"28"}),t:e.o((e=>l("clear"))),v:e.o((e=>l("focus"))),w:e.o((o=>e.isRef(s)?s.value=o:null)),x:e.p({type:"textarea",placeholder:i.placeholder,maxlength:"-1",height:30,"auto-height":!0,"confirm-type":"send","adjust-position":!1,fixed:!1,"custom-style":{background:"white",maxHeight:"174rpx"},"adjust-keyboard-to":"bottom",modelValue:e.unref(s)}),y:o._imports_0$9,z:e.o((o=>l("send",e.unref(s)))),A:e.n(i.safeAreaInsetBottom?"safe-area-inset-bottom":"")})}}),l=e._export_sfc(i,[["__scopeId","data-v-2fadb237"]]);wx.createComponent(l);
