"use strict";const e=require("../../../common/vendor.js"),u=require("../../../api/app.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../stores/user.js"),require("../../../api/user.js"),require("../../../enums/constantEnums.js"),require("../../../utils/auth.js"),require("../../../utils/cache.js"),require("../../../utils/unique-id.js"),require("../../../router/index.js"),require("../../../config/index.js"),require("../../../utils/client.js"),require("../../../enums/appEnums.js"),!Array){(e.resolveComponent("avatar-upload")+e.resolveComponent("u-form-item")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../components/avatar-upload/avatar-upload.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-form-item/u-form-item.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const o=e.defineComponent({__name:"update-user-info",props:{show:{type:Boolean},logo:{type:String},title:{type:String},userInfo:{type:Object}},emits:["update:show","update"],setup(o,{emit:t}){const r=o,s=e.computed({get:()=>r.show,set(e){t("update:show",e)}}),i=e.ref(),n=async o=>{var t;e.index.showLoading({title:"正在上传中..."});try{const s=await u.uploadImage(o,{},null==(t=r.userInfo)?void 0:t.token);i.value=s.uri,console.log(s),e.index.hideLoading()}catch(s){console.log(s),e.index.hideLoading(),e.index.$u.toast("上传失败，请重试")}},a=u=>{const{nickname:o}=u.detail.value;return i.value?o?void t("update",{avatar:i.value,nickname:o}):e.index.$u.toast("请输入昵称"):e.index.$u.toast("请添加头像")};return(u,t)=>({a:o.logo,b:e.t(o.title),c:e.o(n),d:e.o((e=>i.value=e)),e:e.p({modelValue:i.value}),f:e.p({required:!0,label:"头像",labelWidth:120}),g:e.p({required:!0,label:"昵称",labelWidth:120}),h:e.o((e=>s.value=!1)),i:e.o(a),j:e.o((u=>e.isRef(s)?s.value=u:null)),k:e.p({mode:"bottom","border-radius":"14","mask-close-able":!1,modelValue:e.unref(s)})})}});wx.createComponent(o);
