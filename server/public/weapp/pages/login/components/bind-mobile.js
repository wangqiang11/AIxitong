"use strict";const e=require("../../../common/vendor.js"),s=require("../../../api/user.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../stores/user.js"),require("../../../enums/constantEnums.js"),require("../../../utils/auth.js"),require("../../../utils/cache.js"),require("../../../utils/unique-id.js"),require("../../../router/index.js"),require("../../../config/index.js"),require("../../../utils/client.js"),require("../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const u=e.defineComponent({__name:"bind-mobile",props:{show:{type:Boolean},userInfo:{type:Object}},emits:["update:show","success","close"],setup(u,{emit:o}){const t=u,r=e.computed({get:()=>t.show,set(e){o("update:show",e)}});e.shallowRef(),e.ref(""),e.reactive({type:"bind",mobile:"",code:""});const n=async u=>{var r;const{encryptedData:n,iv:i,code:a}=u.detail,c={code:a,encrypted_data:n,iv:i};n&&(await s.userMnpMobile({...c},{token:null==(r=t.userInfo)?void 0:r.token}),e.index.$u.toast("绑定成功"),o("success"))};return(s,u)=>({a:e.o(n),b:e.p({type:"primary",shape:"circle","hover-class":"none","open-type":"getPhoneNumber"}),c:e.o((e=>o("close"))),d:e.o((s=>e.isRef(r)?r.value=s:null)),e:e.p({mode:"bottom","border-radius":"14","mask-close-able":!1,"safe-area-inset-bottom":!0,closeable:!1,modelValue:e.unref(r)})})}});wx.createComponent(u);
