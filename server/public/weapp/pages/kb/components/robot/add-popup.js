"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../api/robot.js"),o=require("../../../../router/index.js"),r=require("../../../../config/index.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),!Array){(e.resolveComponent("app-upload")+e.resolveComponent("u-form-item")+e.resolveComponent("u-input")+e.resolveComponent("u-form")+e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../components/app-upload/app-upload.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-form-item/u-form-item.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-form/u-form.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const t=e.defineComponent({__name:"add-popup",props:{modelValue:{type:Boolean}},emits:["update:modelValue","update"],setup(t,{emit:i}){const a=t,s=e.shallowRef(),n=e.computed({get:()=>a.modelValue,set(e){i("update:modelValue",e)}}),l=e.ref({image:"",name:"",intro:""}),p={image:[{required:!0,message:"请选择智能体图标",trigger:["change"]}],name:[{required:!0,message:"请输入智能体名称",trigger:["change"]}]},m=()=>{s.value.validate((async e=>{if(e){const{id:e}=await u.postRobot(l.value);i("update"),setTimeout((()=>{n.value=!1,o.router.navigateTo({path:"/packages/pages/robot_info/robot_info",query:{id:e}})}),1e3)}}))};return e.watch(n,(u=>{if(u){setTimeout((()=>{s.value.setRules(p)}));let u=r.config.baseUrl;"/"===u.charAt(u.length-1)&&(u=u.slice(0,-1));const o=e.ref(u+"/resource/image/adminapi/default/robot_icon.gif");l.value={image:o.value,name:"",intro:""}}})),(u,o)=>({a:e.o((e=>l.value.image=e)),b:e.p({modelValue:l.value.image}),c:e.p({label:"智能体图标",prop:"image",required:!0}),d:e.o((e=>l.value.name=e)),e:e.p({placeholder:"给你的智能体取个响亮的名字",border:!0,modelValue:l.value.name}),f:e.p({label:"智能体名称",prop:"name",required:!0}),g:e.o((e=>l.value.intro=e)),h:e.p({type:"textarea",height:200,placeholder:"请简单描述下给你的智能体",border:!0,modelValue:l.value.intro}),i:e.p({label:"智能体简介",prop:"intro"}),j:e.sr(s,"8e72e8a8-1,8e72e8a8-0",{k:"uFormRef"}),k:e.p({model:l.value,"label-position":"top","border-bottom":!1}),l:e.o(m),m:e.p({type:"primary"}),n:e.o((u=>e.isRef(n)?n.value=u:null)),o:e.p({closeable:!0,"border-radius":"16",mode:"bottom",modelValue:e.unref(n)})})}});wx.createComponent(t);
