"use strict";const e=require("../common/vendor.js"),t=require("../router/index.js"),r=require("../utils/util.js"),a=require("../stores/navigationBarTitle.js"),i=require("../stores/app.js"),s=require("../mixins/share.js"),n=require("../api/task_reward.js");exports.useShareMessage=function(){return{resolveOptions:async(s={})=>{const o=a.useNavigationBarTitleStore(),u=t.router.currentRoute.value,h=i.useAppStore(),{style:l}=t.router.routeMatcher.getRouteByPath(u.path)||{};e.index.showLoading({title:"请稍后..."});const{share_title:c,share_image:g,share_content:p,share_page:d}=h.getShareConfig,{pc_name:m,pc_logo:q}=h.getWebsiteConfig,x=2==d,y=await async function(e=!1){const a=t.router.currentRoute.value,i={path:e?"/pages/index/index":a.path,query:e?{}:a.query},s=`${i.path}`,o=i.query;try{const{share_id:e}=await n.getShareId();e&&(o.share_id=e)}catch(u){}return`${s}${r.paramsToStr(o)}`}(x);let S={title:c,path:y,desc:p,imageUrl:g};return x||(S={...S,...s}),S.title||(S.title=x?m:o.getTitle||(null==l?void 0:l.navigationBarTitleText)||m),S.imageUrl||(S.imageUrl=q),S=(e=>({imageUrl:e.imageUrl,path:e.path,title:e.title}))(S),console.log(S),e.index.hideLoading(),S},useShare:(e={})=>{},removeMixinShare:()=>{s.share.onShareAppMessage=void 0}}},exports.useSharedId=async function(){const t=e.index.getEnterOptionsSync().query.share_id;t&&await n.shareClick({share_id:t})};
