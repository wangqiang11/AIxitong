"use strict";const e=require("../../common/vendor.js"),n=require("../../enums/appEnums.js"),s=require("../client.js");exports.EWechat=class{init(e,n){n[e]=this}openNewPage(e){const n=window.open("","_self");n.document.body.innerHTML=e,n.document.forms[0].submit()}async run(t){try{return await s.handleClientEvent({MP_WEIXIN:()=>new Promise((s=>{e.index.requestPayment({provider:"wxpay",...t,success(){s(n.PayStatusEnum.SUCCESS)},fail(){s(n.PayStatusEnum.FAIL)}})})),OA_WEIXIN:()=>new Promise((e=>{this.openNewPage(t),e(n.PayStatusEnum.PENDING)})),H5:()=>new Promise((e=>{this.openNewPage(t),e(n.PayStatusEnum.PENDING)})),ANDROID:()=>new Promise(((s,r)=>{e.index.requestPayment({provider:"wxpay",orderInfo:t,success(){s(n.PayStatusEnum.SUCCESS)},fail(e){console.log(e),s(n.PayStatusEnum.FAIL)}})})),IOS:()=>new Promise(((s,r)=>{t.partnerid=String(t.partnerid),e.index.requestPayment({provider:"wxpay",orderInfo:t,success(){s(n.PayStatusEnum.SUCCESS)},fail(e){console.log(e),s(n.PayStatusEnum.FAIL)}})}))})}catch(r){return Promise.reject(r)}}};
