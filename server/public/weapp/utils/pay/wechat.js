"use strict";const e=require("../../common/vendor.js"),t=require("../../enums/appEnums.js"),n=require("../client.js");exports.Wechat=class{init(e,t){t[e]=this}async run(s){try{return await n.handleClientEvent({MP_WEIXIN:()=>new Promise((n=>{e.index.requestPayment({provider:"wxpay",...s,success(){n(t.PayStatusEnum.SUCCESS)},fail(){n(t.PayStatusEnum.FAIL)}})})),OA_WEIXIN:()=>new Promise((e=>{wechatOa.pay(s).then((()=>{e(t.PayStatusEnum.SUCCESS)})).catch((()=>{e(t.PayStatusEnum.FAIL)}))})),H5:()=>new Promise((e=>{window.open(s,"_self"),e(t.PayStatusEnum.PENDING)})),ANDROID:()=>new Promise(((n,a)=>{e.index.requestPayment({provider:"wxpay",orderInfo:s,success(){n(t.PayStatusEnum.SUCCESS)},fail(e){console.log(e),n(t.PayStatusEnum.FAIL)}})})),IOS:()=>new Promise(((n,a)=>{s.partnerid=String(s.partnerid),e.index.requestPayment({provider:"wxpay",orderInfo:s,success(){n(t.PayStatusEnum.SUCCESS)},fail(e){console.log(e),n(t.PayStatusEnum.FAIL)}})}))})}catch(a){return Promise.reject(a)}}};
